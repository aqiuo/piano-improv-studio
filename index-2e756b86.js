var Ge=Object.defineProperty;var ze=(t,e,s)=>e in t?Ge(t,e,{enumerable:!0,configurable:!0,writable:!0,value:s}):t[e]=s;var Dt=(t,e,s)=>(ze(t,typeof e!="symbol"?e+"":e,s),s),oe=(t,e,s)=>{if(!e.has(t))throw TypeError("Cannot "+s)};var B=(t,e,s)=>(oe(t,e,"read from private field"),s?s.call(t):e.get(t)),gt=(t,e,s)=>{if(e.has(t))throw TypeError("Cannot add the same private member more than once");e instanceof WeakSet?e.add(t):e.set(t,s)},At=(t,e,s,n)=>(oe(t,e,"write to private field"),n?n.call(t,s):e.set(t,s),s);var le=(t,e,s,n)=>({set _(i){At(t,e,i,s)},get _(){return B(t,e,n)}}),mt=(t,e,s)=>(oe(t,e,"access private method"),s);(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))n(i);new MutationObserver(i=>{for(const r of i)if(r.type==="childList")for(const h of r.addedNodes)h.tagName==="LINK"&&h.rel==="modulepreload"&&n(h)}).observe(document,{childList:!0,subtree:!0});function s(i){const r={};return i.integrity&&(r.integrity=i.integrity),i.referrerPolicy&&(r.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?r.credentials="include":i.crossOrigin==="anonymous"?r.credentials="omit":r.credentials="same-origin",r}function n(i){if(i.ep)return;i.ep=!0;const r=s(i);fetch(i.href,r)}})();/**
* @vue/shared v3.5.17
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**//*! #__NO_SIDE_EFFECTS__ */function makeMap(t){const e=Object.create(null);for(const s of t.split(","))e[s]=1;return s=>s in e}const EMPTY_OBJ={},EMPTY_ARR=[],NOOP=()=>{},NO=()=>!1,isOn=t=>t.charCodeAt(0)===111&&t.charCodeAt(1)===110&&(t.charCodeAt(2)>122||t.charCodeAt(2)<97),isModelListener=t=>t.startsWith("onUpdate:"),extend=Object.assign,remove=(t,e)=>{const s=t.indexOf(e);s>-1&&t.splice(s,1)},hasOwnProperty$1=Object.prototype.hasOwnProperty,hasOwn=(t,e)=>hasOwnProperty$1.call(t,e),isArray=Array.isArray,isMap=t=>toTypeString(t)==="[object Map]",isSet=t=>toTypeString(t)==="[object Set]",isFunction=t=>typeof t=="function",isString=t=>typeof t=="string",isSymbol=t=>typeof t=="symbol",isObject=t=>t!==null&&typeof t=="object",isPromise=t=>(isObject(t)||isFunction(t))&&isFunction(t.then)&&isFunction(t.catch),objectToString=Object.prototype.toString,toTypeString=t=>objectToString.call(t),toRawType=t=>toTypeString(t).slice(8,-1),isPlainObject=t=>toTypeString(t)==="[object Object]",isIntegerKey=t=>isString(t)&&t!=="NaN"&&t[0]!=="-"&&""+parseInt(t,10)===t,isReservedProp=makeMap(",key,ref,ref_for,ref_key,onVnodeBeforeMount,onVnodeMounted,onVnodeBeforeUpdate,onVnodeUpdated,onVnodeBeforeUnmount,onVnodeUnmounted"),cacheStringFunction=t=>{const e=Object.create(null);return s=>e[s]||(e[s]=t(s))},camelizeRE=/-(\w)/g,camelize=cacheStringFunction(t=>t.replace(camelizeRE,(e,s)=>s?s.toUpperCase():"")),hyphenateRE=/\B([A-Z])/g,hyphenate=cacheStringFunction(t=>t.replace(hyphenateRE,"-$1").toLowerCase()),capitalize=cacheStringFunction(t=>t.charAt(0).toUpperCase()+t.slice(1)),toHandlerKey=cacheStringFunction(t=>t?`on${capitalize(t)}`:""),hasChanged=(t,e)=>!Object.is(t,e),invokeArrayFns=(t,...e)=>{for(let s=0;s<t.length;s++)t[s](...e)},def=(t,e,s,n=!1)=>{Object.defineProperty(t,e,{configurable:!0,enumerable:!1,writable:n,value:s})},looseToNumber=t=>{const e=parseFloat(t);return isNaN(e)?t:e};let _globalThis;const getGlobalThis=()=>_globalThis||(_globalThis=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:typeof global<"u"?global:{});function normalizeStyle(t){if(isArray(t)){const e={};for(let s=0;s<t.length;s++){const n=t[s],i=isString(n)?parseStringStyle(n):normalizeStyle(n);if(i)for(const r in i)e[r]=i[r]}return e}else if(isString(t)||isObject(t))return t}const listDelimiterRE=/;(?![^(]*\))/g,propertyDelimiterRE=/:([^]+)/,styleCommentRE=/\/\*[^]*?\*\//g;function parseStringStyle(t){const e={};return t.replace(styleCommentRE,"").split(listDelimiterRE).forEach(s=>{if(s){const n=s.split(propertyDelimiterRE);n.length>1&&(e[n[0].trim()]=n[1].trim())}}),e}function normalizeClass(t){let e="";if(isString(t))e=t;else if(isArray(t))for(let s=0;s<t.length;s++){const n=normalizeClass(t[s]);n&&(e+=n+" ")}else if(isObject(t))for(const s in t)t[s]&&(e+=s+" ");return e.trim()}const specialBooleanAttrs="itemscope,allowfullscreen,formnovalidate,ismap,nomodule,novalidate,readonly",isSpecialBooleanAttr=makeMap(specialBooleanAttrs);function includeBooleanAttr(t){return!!t||t===""}const isRef$1=t=>!!(t&&t.__v_isRef===!0),toDisplayString=t=>isString(t)?t:t==null?"":isArray(t)||isObject(t)&&(t.toString===objectToString||!isFunction(t.toString))?isRef$1(t)?toDisplayString(t.value):JSON.stringify(t,replacer,2):String(t),replacer=(t,e)=>isRef$1(e)?replacer(t,e.value):isMap(e)?{[`Map(${e.size})`]:[...e.entries()].reduce((s,[n,i],r)=>(s[stringifySymbol(n,r)+" =>"]=i,s),{})}:isSet(e)?{[`Set(${e.size})`]:[...e.values()].map(s=>stringifySymbol(s))}:isSymbol(e)?stringifySymbol(e):isObject(e)&&!isArray(e)&&!isPlainObject(e)?String(e):e,stringifySymbol=(t,e="")=>{var s;return isSymbol(t)?`Symbol(${(s=t.description)!=null?s:e})`:t};/**
* @vue/reactivity v3.5.17
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/let activeEffectScope;class EffectScope{constructor(e=!1){this.detached=e,this._active=!0,this._on=0,this.effects=[],this.cleanups=[],this._isPaused=!1,this.parent=activeEffectScope,!e&&activeEffectScope&&(this.index=(activeEffectScope.scopes||(activeEffectScope.scopes=[])).push(this)-1)}get active(){return this._active}pause(){if(this._active){this._isPaused=!0;let e,s;if(this.scopes)for(e=0,s=this.scopes.length;e<s;e++)this.scopes[e].pause();for(e=0,s=this.effects.length;e<s;e++)this.effects[e].pause()}}resume(){if(this._active&&this._isPaused){this._isPaused=!1;let e,s;if(this.scopes)for(e=0,s=this.scopes.length;e<s;e++)this.scopes[e].resume();for(e=0,s=this.effects.length;e<s;e++)this.effects[e].resume()}}run(e){if(this._active){const s=activeEffectScope;try{return activeEffectScope=this,e()}finally{activeEffectScope=s}}}on(){++this._on===1&&(this.prevScope=activeEffectScope,activeEffectScope=this)}off(){this._on>0&&--this._on===0&&(activeEffectScope=this.prevScope,this.prevScope=void 0)}stop(e){if(this._active){this._active=!1;let s,n;for(s=0,n=this.effects.length;s<n;s++)this.effects[s].stop();for(this.effects.length=0,s=0,n=this.cleanups.length;s<n;s++)this.cleanups[s]();if(this.cleanups.length=0,this.scopes){for(s=0,n=this.scopes.length;s<n;s++)this.scopes[s].stop(!0);this.scopes.length=0}if(!this.detached&&this.parent&&!e){const i=this.parent.scopes.pop();i&&i!==this&&(this.parent.scopes[this.index]=i,i.index=this.index)}this.parent=void 0}}}function getCurrentScope(){return activeEffectScope}let activeSub;const pausedQueueEffects=new WeakSet;class ReactiveEffect{constructor(e){this.fn=e,this.deps=void 0,this.depsTail=void 0,this.flags=5,this.next=void 0,this.cleanup=void 0,this.scheduler=void 0,activeEffectScope&&activeEffectScope.active&&activeEffectScope.effects.push(this)}pause(){this.flags|=64}resume(){this.flags&64&&(this.flags&=-65,pausedQueueEffects.has(this)&&(pausedQueueEffects.delete(this),this.trigger()))}notify(){this.flags&2&&!(this.flags&32)||this.flags&8||batch(this)}run(){if(!(this.flags&1))return this.fn();this.flags|=2,cleanupEffect(this),prepareDeps(this);const e=activeSub,s=shouldTrack;activeSub=this,shouldTrack=!0;try{return this.fn()}finally{cleanupDeps(this),activeSub=e,shouldTrack=s,this.flags&=-3}}stop(){if(this.flags&1){for(let e=this.deps;e;e=e.nextDep)removeSub(e);this.deps=this.depsTail=void 0,cleanupEffect(this),this.onStop&&this.onStop(),this.flags&=-2}}trigger(){this.flags&64?pausedQueueEffects.add(this):this.scheduler?this.scheduler():this.runIfDirty()}runIfDirty(){isDirty(this)&&this.run()}get dirty(){return isDirty(this)}}let batchDepth=0,batchedSub,batchedComputed;function batch(t,e=!1){if(t.flags|=8,e){t.next=batchedComputed,batchedComputed=t;return}t.next=batchedSub,batchedSub=t}function startBatch(){batchDepth++}function endBatch(){if(--batchDepth>0)return;if(batchedComputed){let e=batchedComputed;for(batchedComputed=void 0;e;){const s=e.next;e.next=void 0,e.flags&=-9,e=s}}let t;for(;batchedSub;){let e=batchedSub;for(batchedSub=void 0;e;){const s=e.next;if(e.next=void 0,e.flags&=-9,e.flags&1)try{e.trigger()}catch(n){t||(t=n)}e=s}}if(t)throw t}function prepareDeps(t){for(let e=t.deps;e;e=e.nextDep)e.version=-1,e.prevActiveLink=e.dep.activeLink,e.dep.activeLink=e}function cleanupDeps(t){let e,s=t.depsTail,n=s;for(;n;){const i=n.prevDep;n.version===-1?(n===s&&(s=i),removeSub(n),removeDep(n)):e=n,n.dep.activeLink=n.prevActiveLink,n.prevActiveLink=void 0,n=i}t.deps=e,t.depsTail=s}function isDirty(t){for(let e=t.deps;e;e=e.nextDep)if(e.dep.version!==e.version||e.dep.computed&&(refreshComputed(e.dep.computed)||e.dep.version!==e.version))return!0;return!!t._dirty}function refreshComputed(t){if(t.flags&4&&!(t.flags&16)||(t.flags&=-17,t.globalVersion===globalVersion)||(t.globalVersion=globalVersion,!t.isSSR&&t.flags&128&&(!t.deps&&!t._dirty||!isDirty(t))))return;t.flags|=2;const e=t.dep,s=activeSub,n=shouldTrack;activeSub=t,shouldTrack=!0;try{prepareDeps(t);const i=t.fn(t._value);(e.version===0||hasChanged(i,t._value))&&(t.flags|=128,t._value=i,e.version++)}catch(i){throw e.version++,i}finally{activeSub=s,shouldTrack=n,cleanupDeps(t),t.flags&=-3}}function removeSub(t,e=!1){const{dep:s,prevSub:n,nextSub:i}=t;if(n&&(n.nextSub=i,t.prevSub=void 0),i&&(i.prevSub=n,t.nextSub=void 0),s.subs===t&&(s.subs=n,!n&&s.computed)){s.computed.flags&=-5;for(let r=s.computed.deps;r;r=r.nextDep)removeSub(r,!0)}!e&&!--s.sc&&s.map&&s.map.delete(s.key)}function removeDep(t){const{prevDep:e,nextDep:s}=t;e&&(e.nextDep=s,t.prevDep=void 0),s&&(s.prevDep=e,t.nextDep=void 0)}let shouldTrack=!0;const trackStack=[];function pauseTracking(){trackStack.push(shouldTrack),shouldTrack=!1}function resetTracking(){const t=trackStack.pop();shouldTrack=t===void 0?!0:t}function cleanupEffect(t){const{cleanup:e}=t;if(t.cleanup=void 0,e){const s=activeSub;activeSub=void 0;try{e()}finally{activeSub=s}}}let globalVersion=0;class Link{constructor(e,s){this.sub=e,this.dep=s,this.version=s.version,this.nextDep=this.prevDep=this.nextSub=this.prevSub=this.prevActiveLink=void 0}}class Dep{constructor(e){this.computed=e,this.version=0,this.activeLink=void 0,this.subs=void 0,this.map=void 0,this.key=void 0,this.sc=0,this.__v_skip=!0}track(e){if(!activeSub||!shouldTrack||activeSub===this.computed)return;let s=this.activeLink;if(s===void 0||s.sub!==activeSub)s=this.activeLink=new Link(activeSub,this),activeSub.deps?(s.prevDep=activeSub.depsTail,activeSub.depsTail.nextDep=s,activeSub.depsTail=s):activeSub.deps=activeSub.depsTail=s,addSub(s);else if(s.version===-1&&(s.version=this.version,s.nextDep)){const n=s.nextDep;n.prevDep=s.prevDep,s.prevDep&&(s.prevDep.nextDep=n),s.prevDep=activeSub.depsTail,s.nextDep=void 0,activeSub.depsTail.nextDep=s,activeSub.depsTail=s,activeSub.deps===s&&(activeSub.deps=n)}return s}trigger(e){this.version++,globalVersion++,this.notify(e)}notify(e){startBatch();try{for(let s=this.subs;s;s=s.prevSub)s.sub.notify()&&s.sub.dep.notify()}finally{endBatch()}}}function addSub(t){if(t.dep.sc++,t.sub.flags&4){const e=t.dep.computed;if(e&&!t.dep.subs){e.flags|=20;for(let n=e.deps;n;n=n.nextDep)addSub(n)}const s=t.dep.subs;s!==t&&(t.prevSub=s,s&&(s.nextSub=t)),t.dep.subs=t}}const targetMap=new WeakMap,ITERATE_KEY=Symbol(""),MAP_KEY_ITERATE_KEY=Symbol(""),ARRAY_ITERATE_KEY=Symbol("");function track(t,e,s){if(shouldTrack&&activeSub){let n=targetMap.get(t);n||targetMap.set(t,n=new Map);let i=n.get(s);i||(n.set(s,i=new Dep),i.map=n,i.key=s),i.track()}}function trigger(t,e,s,n,i,r){const h=targetMap.get(t);if(!h){globalVersion++;return}const T=E=>{E&&E.trigger()};if(startBatch(),e==="clear")h.forEach(T);else{const E=isArray(t),v=E&&isIntegerKey(s);if(E&&s==="length"){const y=Number(n);h.forEach((F,k)=>{(k==="length"||k===ARRAY_ITERATE_KEY||!isSymbol(k)&&k>=y)&&T(F)})}else switch((s!==void 0||h.has(void 0))&&T(h.get(s)),v&&T(h.get(ARRAY_ITERATE_KEY)),e){case"add":E?v&&T(h.get("length")):(T(h.get(ITERATE_KEY)),isMap(t)&&T(h.get(MAP_KEY_ITERATE_KEY)));break;case"delete":E||(T(h.get(ITERATE_KEY)),isMap(t)&&T(h.get(MAP_KEY_ITERATE_KEY)));break;case"set":isMap(t)&&T(h.get(ITERATE_KEY));break}}endBatch()}function reactiveReadArray(t){const e=toRaw(t);return e===t?e:(track(e,"iterate",ARRAY_ITERATE_KEY),isShallow(t)?e:e.map(toReactive))}function shallowReadArray(t){return track(t=toRaw(t),"iterate",ARRAY_ITERATE_KEY),t}const arrayInstrumentations={__proto__:null,[Symbol.iterator](){return iterator(this,Symbol.iterator,toReactive)},concat(...t){return reactiveReadArray(this).concat(...t.map(e=>isArray(e)?reactiveReadArray(e):e))},entries(){return iterator(this,"entries",t=>(t[1]=toReactive(t[1]),t))},every(t,e){return apply(this,"every",t,e,void 0,arguments)},filter(t,e){return apply(this,"filter",t,e,s=>s.map(toReactive),arguments)},find(t,e){return apply(this,"find",t,e,toReactive,arguments)},findIndex(t,e){return apply(this,"findIndex",t,e,void 0,arguments)},findLast(t,e){return apply(this,"findLast",t,e,toReactive,arguments)},findLastIndex(t,e){return apply(this,"findLastIndex",t,e,void 0,arguments)},forEach(t,e){return apply(this,"forEach",t,e,void 0,arguments)},includes(...t){return searchProxy(this,"includes",t)},indexOf(...t){return searchProxy(this,"indexOf",t)},join(t){return reactiveReadArray(this).join(t)},lastIndexOf(...t){return searchProxy(this,"lastIndexOf",t)},map(t,e){return apply(this,"map",t,e,void 0,arguments)},pop(){return noTracking(this,"pop")},push(...t){return noTracking(this,"push",t)},reduce(t,...e){return reduce(this,"reduce",t,e)},reduceRight(t,...e){return reduce(this,"reduceRight",t,e)},shift(){return noTracking(this,"shift")},some(t,e){return apply(this,"some",t,e,void 0,arguments)},splice(...t){return noTracking(this,"splice",t)},toReversed(){return reactiveReadArray(this).toReversed()},toSorted(t){return reactiveReadArray(this).toSorted(t)},toSpliced(...t){return reactiveReadArray(this).toSpliced(...t)},unshift(...t){return noTracking(this,"unshift",t)},values(){return iterator(this,"values",toReactive)}};function iterator(t,e,s){const n=shallowReadArray(t),i=n[e]();return n!==t&&!isShallow(t)&&(i._next=i.next,i.next=()=>{const r=i._next();return r.value&&(r.value=s(r.value)),r}),i}const arrayProto=Array.prototype;function apply(t,e,s,n,i,r){const h=shallowReadArray(t),T=h!==t&&!isShallow(t),E=h[e];if(E!==arrayProto[e]){const F=E.apply(t,r);return T?toReactive(F):F}let v=s;h!==t&&(T?v=function(F,k){return s.call(this,toReactive(F),k,t)}:s.length>2&&(v=function(F,k){return s.call(this,F,k,t)}));const y=E.call(h,v,n);return T&&i?i(y):y}function reduce(t,e,s,n){const i=shallowReadArray(t);let r=s;return i!==t&&(isShallow(t)?s.length>3&&(r=function(h,T,E){return s.call(this,h,T,E,t)}):r=function(h,T,E){return s.call(this,h,toReactive(T),E,t)}),i[e](r,...n)}function searchProxy(t,e,s){const n=toRaw(t);track(n,"iterate",ARRAY_ITERATE_KEY);const i=n[e](...s);return(i===-1||i===!1)&&isProxy(s[0])?(s[0]=toRaw(s[0]),n[e](...s)):i}function noTracking(t,e,s=[]){pauseTracking(),startBatch();const n=toRaw(t)[e].apply(t,s);return endBatch(),resetTracking(),n}const isNonTrackableKeys=makeMap("__proto__,__v_isRef,__isVue"),builtInSymbols=new Set(Object.getOwnPropertyNames(Symbol).filter(t=>t!=="arguments"&&t!=="caller").map(t=>Symbol[t]).filter(isSymbol));function hasOwnProperty(t){isSymbol(t)||(t=String(t));const e=toRaw(this);return track(e,"has",t),e.hasOwnProperty(t)}class BaseReactiveHandler{constructor(e=!1,s=!1){this._isReadonly=e,this._isShallow=s}get(e,s,n){if(s==="__v_skip")return e.__v_skip;const i=this._isReadonly,r=this._isShallow;if(s==="__v_isReactive")return!i;if(s==="__v_isReadonly")return i;if(s==="__v_isShallow")return r;if(s==="__v_raw")return n===(i?r?shallowReadonlyMap:readonlyMap:r?shallowReactiveMap:reactiveMap).get(e)||Object.getPrototypeOf(e)===Object.getPrototypeOf(n)?e:void 0;const h=isArray(e);if(!i){let E;if(h&&(E=arrayInstrumentations[s]))return E;if(s==="hasOwnProperty")return hasOwnProperty}const T=Reflect.get(e,s,isRef(e)?e:n);return(isSymbol(s)?builtInSymbols.has(s):isNonTrackableKeys(s))||(i||track(e,"get",s),r)?T:isRef(T)?h&&isIntegerKey(s)?T:T.value:isObject(T)?i?readonly(T):reactive(T):T}}class MutableReactiveHandler extends BaseReactiveHandler{constructor(e=!1){super(!1,e)}set(e,s,n,i){let r=e[s];if(!this._isShallow){const E=isReadonly(r);if(!isShallow(n)&&!isReadonly(n)&&(r=toRaw(r),n=toRaw(n)),!isArray(e)&&isRef(r)&&!isRef(n))return E?!1:(r.value=n,!0)}const h=isArray(e)&&isIntegerKey(s)?Number(s)<e.length:hasOwn(e,s),T=Reflect.set(e,s,n,isRef(e)?e:i);return e===toRaw(i)&&(h?hasChanged(n,r)&&trigger(e,"set",s,n):trigger(e,"add",s,n)),T}deleteProperty(e,s){const n=hasOwn(e,s);e[s];const i=Reflect.deleteProperty(e,s);return i&&n&&trigger(e,"delete",s,void 0),i}has(e,s){const n=Reflect.has(e,s);return(!isSymbol(s)||!builtInSymbols.has(s))&&track(e,"has",s),n}ownKeys(e){return track(e,"iterate",isArray(e)?"length":ITERATE_KEY),Reflect.ownKeys(e)}}class ReadonlyReactiveHandler extends BaseReactiveHandler{constructor(e=!1){super(!0,e)}set(e,s){return!0}deleteProperty(e,s){return!0}}const mutableHandlers=new MutableReactiveHandler,readonlyHandlers=new ReadonlyReactiveHandler,shallowReactiveHandlers=new MutableReactiveHandler(!0),shallowReadonlyHandlers=new ReadonlyReactiveHandler(!0),toShallow=t=>t,getProto=t=>Reflect.getPrototypeOf(t);function createIterableMethod(t,e,s){return function(...n){const i=this.__v_raw,r=toRaw(i),h=isMap(r),T=t==="entries"||t===Symbol.iterator&&h,E=t==="keys"&&h,v=i[t](...n),y=s?toShallow:e?toReadonly:toReactive;return!e&&track(r,"iterate",E?MAP_KEY_ITERATE_KEY:ITERATE_KEY),{next(){const{value:F,done:k}=v.next();return k?{value:F,done:k}:{value:T?[y(F[0]),y(F[1])]:y(F),done:k}},[Symbol.iterator](){return this}}}}function createReadonlyMethod(t){return function(...e){return t==="delete"?!1:t==="clear"?void 0:this}}function createInstrumentations(t,e){const s={get(i){const r=this.__v_raw,h=toRaw(r),T=toRaw(i);t||(hasChanged(i,T)&&track(h,"get",i),track(h,"get",T));const{has:E}=getProto(h),v=e?toShallow:t?toReadonly:toReactive;if(E.call(h,i))return v(r.get(i));if(E.call(h,T))return v(r.get(T));r!==h&&r.get(i)},get size(){const i=this.__v_raw;return!t&&track(toRaw(i),"iterate",ITERATE_KEY),Reflect.get(i,"size",i)},has(i){const r=this.__v_raw,h=toRaw(r),T=toRaw(i);return t||(hasChanged(i,T)&&track(h,"has",i),track(h,"has",T)),i===T?r.has(i):r.has(i)||r.has(T)},forEach(i,r){const h=this,T=h.__v_raw,E=toRaw(T),v=e?toShallow:t?toReadonly:toReactive;return!t&&track(E,"iterate",ITERATE_KEY),T.forEach((y,F)=>i.call(r,v(y),v(F),h))}};return extend(s,t?{add:createReadonlyMethod("add"),set:createReadonlyMethod("set"),delete:createReadonlyMethod("delete"),clear:createReadonlyMethod("clear")}:{add(i){!e&&!isShallow(i)&&!isReadonly(i)&&(i=toRaw(i));const r=toRaw(this);return getProto(r).has.call(r,i)||(r.add(i),trigger(r,"add",i,i)),this},set(i,r){!e&&!isShallow(r)&&!isReadonly(r)&&(r=toRaw(r));const h=toRaw(this),{has:T,get:E}=getProto(h);let v=T.call(h,i);v||(i=toRaw(i),v=T.call(h,i));const y=E.call(h,i);return h.set(i,r),v?hasChanged(r,y)&&trigger(h,"set",i,r):trigger(h,"add",i,r),this},delete(i){const r=toRaw(this),{has:h,get:T}=getProto(r);let E=h.call(r,i);E||(i=toRaw(i),E=h.call(r,i)),T&&T.call(r,i);const v=r.delete(i);return E&&trigger(r,"delete",i,void 0),v},clear(){const i=toRaw(this),r=i.size!==0,h=i.clear();return r&&trigger(i,"clear",void 0,void 0),h}}),["keys","values","entries",Symbol.iterator].forEach(i=>{s[i]=createIterableMethod(i,t,e)}),s}function createInstrumentationGetter(t,e){const s=createInstrumentations(t,e);return(n,i,r)=>i==="__v_isReactive"?!t:i==="__v_isReadonly"?t:i==="__v_raw"?n:Reflect.get(hasOwn(s,i)&&i in n?s:n,i,r)}const mutableCollectionHandlers={get:createInstrumentationGetter(!1,!1)},shallowCollectionHandlers={get:createInstrumentationGetter(!1,!0)},readonlyCollectionHandlers={get:createInstrumentationGetter(!0,!1)},shallowReadonlyCollectionHandlers={get:createInstrumentationGetter(!0,!0)},reactiveMap=new WeakMap,shallowReactiveMap=new WeakMap,readonlyMap=new WeakMap,shallowReadonlyMap=new WeakMap;function targetTypeMap(t){switch(t){case"Object":case"Array":return 1;case"Map":case"Set":case"WeakMap":case"WeakSet":return 2;default:return 0}}function getTargetType(t){return t.__v_skip||!Object.isExtensible(t)?0:targetTypeMap(toRawType(t))}function reactive(t){return isReadonly(t)?t:createReactiveObject(t,!1,mutableHandlers,mutableCollectionHandlers,reactiveMap)}function shallowReactive(t){return createReactiveObject(t,!1,shallowReactiveHandlers,shallowCollectionHandlers,shallowReactiveMap)}function readonly(t){return createReactiveObject(t,!0,readonlyHandlers,readonlyCollectionHandlers,readonlyMap)}function shallowReadonly(t){return createReactiveObject(t,!0,shallowReadonlyHandlers,shallowReadonlyCollectionHandlers,shallowReadonlyMap)}function createReactiveObject(t,e,s,n,i){if(!isObject(t)||t.__v_raw&&!(e&&t.__v_isReactive))return t;const r=getTargetType(t);if(r===0)return t;const h=i.get(t);if(h)return h;const T=new Proxy(t,r===2?n:s);return i.set(t,T),T}function isReactive(t){return isReadonly(t)?isReactive(t.__v_raw):!!(t&&t.__v_isReactive)}function isReadonly(t){return!!(t&&t.__v_isReadonly)}function isShallow(t){return!!(t&&t.__v_isShallow)}function isProxy(t){return t?!!t.__v_raw:!1}function toRaw(t){const e=t&&t.__v_raw;return e?toRaw(e):t}function markRaw(t){return!hasOwn(t,"__v_skip")&&Object.isExtensible(t)&&def(t,"__v_skip",!0),t}const toReactive=t=>isObject(t)?reactive(t):t,toReadonly=t=>isObject(t)?readonly(t):t;function isRef(t){return t?t.__v_isRef===!0:!1}function ref(t){return createRef(t,!1)}function createRef(t,e){return isRef(t)?t:new RefImpl(t,e)}class RefImpl{constructor(e,s){this.dep=new Dep,this.__v_isRef=!0,this.__v_isShallow=!1,this._rawValue=s?e:toRaw(e),this._value=s?e:toReactive(e),this.__v_isShallow=s}get value(){return this.dep.track(),this._value}set value(e){const s=this._rawValue,n=this.__v_isShallow||isShallow(e)||isReadonly(e);e=n?e:toRaw(e),hasChanged(e,s)&&(this._rawValue=e,this._value=n?e:toReactive(e),this.dep.trigger())}}function unref(t){return isRef(t)?t.value:t}const shallowUnwrapHandlers={get:(t,e,s)=>e==="__v_raw"?t:unref(Reflect.get(t,e,s)),set:(t,e,s,n)=>{const i=t[e];return isRef(i)&&!isRef(s)?(i.value=s,!0):Reflect.set(t,e,s,n)}};function proxyRefs(t){return isReactive(t)?t:new Proxy(t,shallowUnwrapHandlers)}class ComputedRefImpl{constructor(e,s,n){this.fn=e,this.setter=s,this._value=void 0,this.dep=new Dep(this),this.__v_isRef=!0,this.deps=void 0,this.depsTail=void 0,this.flags=16,this.globalVersion=globalVersion-1,this.next=void 0,this.effect=this,this.__v_isReadonly=!s,this.isSSR=n}notify(){if(this.flags|=16,!(this.flags&8)&&activeSub!==this)return batch(this,!0),!0}get value(){const e=this.dep.track();return refreshComputed(this),e&&(e.version=this.dep.version),this._value}set value(e){this.setter&&this.setter(e)}}function computed$1(t,e,s=!1){let n,i;return isFunction(t)?n=t:(n=t.get,i=t.set),new ComputedRefImpl(n,i,s)}const INITIAL_WATCHER_VALUE={},cleanupMap=new WeakMap;let activeWatcher;function onWatcherCleanup(t,e=!1,s=activeWatcher){if(s){let n=cleanupMap.get(s);n||cleanupMap.set(s,n=[]),n.push(t)}}function watch$1(t,e,s=EMPTY_OBJ){const{immediate:n,deep:i,once:r,scheduler:h,augmentJob:T,call:E}=s,v=d=>i?d:isShallow(d)||i===!1||i===0?traverse(d,1):traverse(d);let y,F,k,w,f=!1,a=!1;if(isRef(t)?(F=()=>t.value,f=isShallow(t)):isReactive(t)?(F=()=>v(t),f=!0):isArray(t)?(a=!0,f=t.some(d=>isReactive(d)||isShallow(d)),F=()=>t.map(d=>{if(isRef(d))return d.value;if(isReactive(d))return v(d);if(isFunction(d))return E?E(d,2):d()})):isFunction(t)?e?F=E?()=>E(t,2):t:F=()=>{if(k){pauseTracking();try{k()}finally{resetTracking()}}const d=activeWatcher;activeWatcher=y;try{return E?E(t,3,[w]):t(w)}finally{activeWatcher=d}}:F=NOOP,e&&i){const d=F,O=i===!0?1/0:i;F=()=>traverse(d(),O)}const u=getCurrentScope(),g=()=>{y.stop(),u&&u.active&&remove(u.effects,y)};if(r&&e){const d=e;e=(...O)=>{d(...O),g()}}let R=a?new Array(t.length).fill(INITIAL_WATCHER_VALUE):INITIAL_WATCHER_VALUE;const S=d=>{if(!(!(y.flags&1)||!y.dirty&&!d))if(e){const O=y.run();if(i||f||(a?O.some((M,V)=>hasChanged(M,R[V])):hasChanged(O,R))){k&&k();const M=activeWatcher;activeWatcher=y;try{const V=[O,R===INITIAL_WATCHER_VALUE?void 0:a&&R[0]===INITIAL_WATCHER_VALUE?[]:R,w];R=O,E?E(e,3,V):e(...V)}finally{activeWatcher=M}}}else y.run()};return T&&T(S),y=new ReactiveEffect(F),y.scheduler=h?()=>h(S,!1):S,w=d=>onWatcherCleanup(d,!1,y),k=y.onStop=()=>{const d=cleanupMap.get(y);if(d){if(E)E(d,4);else for(const O of d)O();cleanupMap.delete(y)}},e?n?S(!0):R=y.run():h?h(S.bind(null,!0),!0):y.run(),g.pause=y.pause.bind(y),g.resume=y.resume.bind(y),g.stop=g,g}function traverse(t,e=1/0,s){if(e<=0||!isObject(t)||t.__v_skip||(s=s||new Set,s.has(t)))return t;if(s.add(t),e--,isRef(t))traverse(t.value,e,s);else if(isArray(t))for(let n=0;n<t.length;n++)traverse(t[n],e,s);else if(isSet(t)||isMap(t))t.forEach(n=>{traverse(n,e,s)});else if(isPlainObject(t)){for(const n in t)traverse(t[n],e,s);for(const n of Object.getOwnPropertySymbols(t))Object.prototype.propertyIsEnumerable.call(t,n)&&traverse(t[n],e,s)}return t}/**
* @vue/runtime-core v3.5.17
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/const stack=[];let isWarning=!1;function warn$1(t,...e){if(isWarning)return;isWarning=!0,pauseTracking();const s=stack.length?stack[stack.length-1].component:null,n=s&&s.appContext.config.warnHandler,i=getComponentTrace();if(n)callWithErrorHandling(n,s,11,[t+e.map(r=>{var h,T;return(T=(h=r.toString)==null?void 0:h.call(r))!=null?T:JSON.stringify(r)}).join(""),s&&s.proxy,i.map(({vnode:r})=>`at <${formatComponentName(s,r.type)}>`).join(`
`),i]);else{const r=[`[Vue warn]: ${t}`,...e];i.length&&r.push(`
`,...formatTrace(i)),console.warn(...r)}resetTracking(),isWarning=!1}function getComponentTrace(){let t=stack[stack.length-1];if(!t)return[];const e=[];for(;t;){const s=e[0];s&&s.vnode===t?s.recurseCount++:e.push({vnode:t,recurseCount:0});const n=t.component&&t.component.parent;t=n&&n.vnode}return e}function formatTrace(t){const e=[];return t.forEach((s,n)=>{e.push(...n===0?[]:[`
`],...formatTraceEntry(s))}),e}function formatTraceEntry({vnode:t,recurseCount:e}){const s=e>0?`... (${e} recursive calls)`:"",n=t.component?t.component.parent==null:!1,i=` at <${formatComponentName(t.component,t.type,n)}`,r=">"+s;return t.props?[i,...formatProps(t.props),r]:[i+r]}function formatProps(t){const e=[],s=Object.keys(t);return s.slice(0,3).forEach(n=>{e.push(...formatProp(n,t[n]))}),s.length>3&&e.push(" ..."),e}function formatProp(t,e,s){return isString(e)?(e=JSON.stringify(e),s?e:[`${t}=${e}`]):typeof e=="number"||typeof e=="boolean"||e==null?s?e:[`${t}=${e}`]:isRef(e)?(e=formatProp(t,toRaw(e.value),!0),s?e:[`${t}=Ref<`,e,">"]):isFunction(e)?[`${t}=fn${e.name?`<${e.name}>`:""}`]:(e=toRaw(e),s?e:[`${t}=`,e])}function callWithErrorHandling(t,e,s,n){try{return n?t(...n):t()}catch(i){handleError(i,e,s)}}function callWithAsyncErrorHandling(t,e,s,n){if(isFunction(t)){const i=callWithErrorHandling(t,e,s,n);return i&&isPromise(i)&&i.catch(r=>{handleError(r,e,s)}),i}if(isArray(t)){const i=[];for(let r=0;r<t.length;r++)i.push(callWithAsyncErrorHandling(t[r],e,s,n));return i}}function handleError(t,e,s,n=!0){const i=e?e.vnode:null,{errorHandler:r,throwUnhandledErrorInProduction:h}=e&&e.appContext.config||EMPTY_OBJ;if(e){let T=e.parent;const E=e.proxy,v=`https://vuejs.org/error-reference/#runtime-${s}`;for(;T;){const y=T.ec;if(y){for(let F=0;F<y.length;F++)if(y[F](t,E,v)===!1)return}T=T.parent}if(r){pauseTracking(),callWithErrorHandling(r,null,10,[t,E,v]),resetTracking();return}}logError(t,s,i,n,h)}function logError(t,e,s,n=!0,i=!1){if(i)throw t;console.error(t)}const queue=[];let flushIndex=-1;const pendingPostFlushCbs=[];let activePostFlushCbs=null,postFlushIndex=0;const resolvedPromise=Promise.resolve();let currentFlushPromise=null;function nextTick(t){const e=currentFlushPromise||resolvedPromise;return t?e.then(this?t.bind(this):t):e}function findInsertionIndex(t){let e=flushIndex+1,s=queue.length;for(;e<s;){const n=e+s>>>1,i=queue[n],r=getId(i);r<t||r===t&&i.flags&2?e=n+1:s=n}return e}function queueJob(t){if(!(t.flags&1)){const e=getId(t),s=queue[queue.length-1];!s||!(t.flags&2)&&e>=getId(s)?queue.push(t):queue.splice(findInsertionIndex(e),0,t),t.flags|=1,queueFlush()}}function queueFlush(){currentFlushPromise||(currentFlushPromise=resolvedPromise.then(flushJobs))}function queuePostFlushCb(t){isArray(t)?pendingPostFlushCbs.push(...t):activePostFlushCbs&&t.id===-1?activePostFlushCbs.splice(postFlushIndex+1,0,t):t.flags&1||(pendingPostFlushCbs.push(t),t.flags|=1),queueFlush()}function flushPreFlushCbs(t,e,s=flushIndex+1){for(;s<queue.length;s++){const n=queue[s];if(n&&n.flags&2){if(t&&n.id!==t.uid)continue;queue.splice(s,1),s--,n.flags&4&&(n.flags&=-2),n(),n.flags&4||(n.flags&=-2)}}}function flushPostFlushCbs(t){if(pendingPostFlushCbs.length){const e=[...new Set(pendingPostFlushCbs)].sort((s,n)=>getId(s)-getId(n));if(pendingPostFlushCbs.length=0,activePostFlushCbs){activePostFlushCbs.push(...e);return}for(activePostFlushCbs=e,postFlushIndex=0;postFlushIndex<activePostFlushCbs.length;postFlushIndex++){const s=activePostFlushCbs[postFlushIndex];s.flags&4&&(s.flags&=-2),s.flags&8||s(),s.flags&=-2}activePostFlushCbs=null,postFlushIndex=0}}const getId=t=>t.id==null?t.flags&2?-1:1/0:t.id;function flushJobs(t){const e=NOOP;try{for(flushIndex=0;flushIndex<queue.length;flushIndex++){const s=queue[flushIndex];s&&!(s.flags&8)&&(s.flags&4&&(s.flags&=-2),callWithErrorHandling(s,s.i,s.i?15:14),s.flags&4||(s.flags&=-2))}}finally{for(;flushIndex<queue.length;flushIndex++){const s=queue[flushIndex];s&&(s.flags&=-2)}flushIndex=-1,queue.length=0,flushPostFlushCbs(),currentFlushPromise=null,(queue.length||pendingPostFlushCbs.length)&&flushJobs()}}let currentRenderingInstance=null,currentScopeId=null;function setCurrentRenderingInstance(t){const e=currentRenderingInstance;return currentRenderingInstance=t,currentScopeId=t&&t.type.__scopeId||null,e}function withCtx(t,e=currentRenderingInstance,s){if(!e||t._n)return t;const n=(...i)=>{n._d&&setBlockTracking(-1);const r=setCurrentRenderingInstance(e);let h;try{h=t(...i)}finally{setCurrentRenderingInstance(r),n._d&&setBlockTracking(1)}return h};return n._n=!0,n._c=!0,n._d=!0,n}function withDirectives(t,e){if(currentRenderingInstance===null)return t;const s=getComponentPublicInstance(currentRenderingInstance),n=t.dirs||(t.dirs=[]);for(let i=0;i<e.length;i++){let[r,h,T,E=EMPTY_OBJ]=e[i];r&&(isFunction(r)&&(r={mounted:r,updated:r}),r.deep&&traverse(h),n.push({dir:r,instance:s,value:h,oldValue:void 0,arg:T,modifiers:E}))}return t}function invokeDirectiveHook(t,e,s,n){const i=t.dirs,r=e&&e.dirs;for(let h=0;h<i.length;h++){const T=i[h];r&&(T.oldValue=r[h].value);let E=T.dir[n];E&&(pauseTracking(),callWithAsyncErrorHandling(E,s,8,[t.el,T,t,e]),resetTracking())}}const TeleportEndKey=Symbol("_vte"),isTeleport=t=>t.__isTeleport;function setTransitionHooks(t,e){t.shapeFlag&6&&t.component?(t.transition=e,setTransitionHooks(t.component.subTree,e)):t.shapeFlag&128?(t.ssContent.transition=e.clone(t.ssContent),t.ssFallback.transition=e.clone(t.ssFallback)):t.transition=e}function markAsyncBoundary(t){t.ids=[t.ids[0]+t.ids[2]+++"-",0,0]}function setRef(t,e,s,n,i=!1){if(isArray(t)){t.forEach((f,a)=>setRef(f,e&&(isArray(e)?e[a]:e),s,n,i));return}if(isAsyncWrapper(n)&&!i){n.shapeFlag&512&&n.type.__asyncResolved&&n.component.subTree.component&&setRef(t,e,s,n.component.subTree);return}const r=n.shapeFlag&4?getComponentPublicInstance(n.component):n.el,h=i?null:r,{i:T,r:E}=t,v=e&&e.r,y=T.refs===EMPTY_OBJ?T.refs={}:T.refs,F=T.setupState,k=toRaw(F),w=F===EMPTY_OBJ?()=>!1:f=>hasOwn(k,f);if(v!=null&&v!==E&&(isString(v)?(y[v]=null,w(v)&&(F[v]=null)):isRef(v)&&(v.value=null)),isFunction(E))callWithErrorHandling(E,T,12,[h,y]);else{const f=isString(E),a=isRef(E);if(f||a){const u=()=>{if(t.f){const g=f?w(E)?F[E]:y[E]:E.value;i?isArray(g)&&remove(g,r):isArray(g)?g.includes(r)||g.push(r):f?(y[E]=[r],w(E)&&(F[E]=y[E])):(E.value=[r],t.k&&(y[t.k]=E.value))}else f?(y[E]=h,w(E)&&(F[E]=h)):a&&(E.value=h,t.k&&(y[t.k]=h))};h?(u.id=-1,queuePostRenderEffect(u,s)):u()}}}getGlobalThis().requestIdleCallback;getGlobalThis().cancelIdleCallback;const isAsyncWrapper=t=>!!t.type.__asyncLoader,isKeepAlive=t=>t.type.__isKeepAlive;function onActivated(t,e){registerKeepAliveHook(t,"a",e)}function onDeactivated(t,e){registerKeepAliveHook(t,"da",e)}function registerKeepAliveHook(t,e,s=currentInstance){const n=t.__wdc||(t.__wdc=()=>{let i=s;for(;i;){if(i.isDeactivated)return;i=i.parent}return t()});if(injectHook(e,n,s),s){let i=s.parent;for(;i&&i.parent;)isKeepAlive(i.parent.vnode)&&injectToKeepAliveRoot(n,e,s,i),i=i.parent}}function injectToKeepAliveRoot(t,e,s,n){const i=injectHook(e,t,n,!0);onUnmounted(()=>{remove(n[e],i)},s)}function injectHook(t,e,s=currentInstance,n=!1){if(s){const i=s[t]||(s[t]=[]),r=e.__weh||(e.__weh=(...h)=>{pauseTracking();const T=setCurrentInstance(s),E=callWithAsyncErrorHandling(e,s,t,h);return T(),resetTracking(),E});return n?i.unshift(r):i.push(r),r}}const createHook=t=>(e,s=currentInstance)=>{(!isInSSRComponentSetup||t==="sp")&&injectHook(t,(...n)=>e(...n),s)},onBeforeMount=createHook("bm"),onMounted=createHook("m"),onBeforeUpdate=createHook("bu"),onUpdated=createHook("u"),onBeforeUnmount=createHook("bum"),onUnmounted=createHook("um"),onServerPrefetch=createHook("sp"),onRenderTriggered=createHook("rtg"),onRenderTracked=createHook("rtc");function onErrorCaptured(t,e=currentInstance){injectHook("ec",t,e)}const NULL_DYNAMIC_COMPONENT=Symbol.for("v-ndc");function renderList(t,e,s,n){let i;const r=s&&s[n],h=isArray(t);if(h||isString(t)){const T=h&&isReactive(t);let E=!1,v=!1;T&&(E=!isShallow(t),v=isReadonly(t),t=shallowReadArray(t)),i=new Array(t.length);for(let y=0,F=t.length;y<F;y++)i[y]=e(E?v?toReadonly(toReactive(t[y])):toReactive(t[y]):t[y],y,void 0,r&&r[y])}else if(typeof t=="number"){i=new Array(t);for(let T=0;T<t;T++)i[T]=e(T+1,T,void 0,r&&r[T])}else if(isObject(t))if(t[Symbol.iterator])i=Array.from(t,(T,E)=>e(T,E,void 0,r&&r[E]));else{const T=Object.keys(t);i=new Array(T.length);for(let E=0,v=T.length;E<v;E++){const y=T[E];i[E]=e(t[y],y,E,r&&r[E])}}else i=[];return s&&(s[n]=i),i}const getPublicInstance=t=>t?isStatefulComponent(t)?getComponentPublicInstance(t):getPublicInstance(t.parent):null,publicPropertiesMap=extend(Object.create(null),{$:t=>t,$el:t=>t.vnode.el,$data:t=>t.data,$props:t=>t.props,$attrs:t=>t.attrs,$slots:t=>t.slots,$refs:t=>t.refs,$parent:t=>getPublicInstance(t.parent),$root:t=>getPublicInstance(t.root),$host:t=>t.ce,$emit:t=>t.emit,$options:t=>resolveMergedOptions(t),$forceUpdate:t=>t.f||(t.f=()=>{queueJob(t.update)}),$nextTick:t=>t.n||(t.n=nextTick.bind(t.proxy)),$watch:t=>instanceWatch.bind(t)}),hasSetupBinding=(t,e)=>t!==EMPTY_OBJ&&!t.__isScriptSetup&&hasOwn(t,e),PublicInstanceProxyHandlers={get({_:t},e){if(e==="__v_skip")return!0;const{ctx:s,setupState:n,data:i,props:r,accessCache:h,type:T,appContext:E}=t;let v;if(e[0]!=="$"){const w=h[e];if(w!==void 0)switch(w){case 1:return n[e];case 2:return i[e];case 4:return s[e];case 3:return r[e]}else{if(hasSetupBinding(n,e))return h[e]=1,n[e];if(i!==EMPTY_OBJ&&hasOwn(i,e))return h[e]=2,i[e];if((v=t.propsOptions[0])&&hasOwn(v,e))return h[e]=3,r[e];if(s!==EMPTY_OBJ&&hasOwn(s,e))return h[e]=4,s[e];shouldCacheAccess&&(h[e]=0)}}const y=publicPropertiesMap[e];let F,k;if(y)return e==="$attrs"&&track(t.attrs,"get",""),y(t);if((F=T.__cssModules)&&(F=F[e]))return F;if(s!==EMPTY_OBJ&&hasOwn(s,e))return h[e]=4,s[e];if(k=E.config.globalProperties,hasOwn(k,e))return k[e]},set({_:t},e,s){const{data:n,setupState:i,ctx:r}=t;return hasSetupBinding(i,e)?(i[e]=s,!0):n!==EMPTY_OBJ&&hasOwn(n,e)?(n[e]=s,!0):hasOwn(t.props,e)||e[0]==="$"&&e.slice(1)in t?!1:(r[e]=s,!0)},has({_:{data:t,setupState:e,accessCache:s,ctx:n,appContext:i,propsOptions:r}},h){let T;return!!s[h]||t!==EMPTY_OBJ&&hasOwn(t,h)||hasSetupBinding(e,h)||(T=r[0])&&hasOwn(T,h)||hasOwn(n,h)||hasOwn(publicPropertiesMap,h)||hasOwn(i.config.globalProperties,h)},defineProperty(t,e,s){return s.get!=null?t._.accessCache[e]=0:hasOwn(s,"value")&&this.set(t,e,s.value,null),Reflect.defineProperty(t,e,s)}};function normalizePropsOrEmits(t){return isArray(t)?t.reduce((e,s)=>(e[s]=null,e),{}):t}let shouldCacheAccess=!0;function applyOptions(t){const e=resolveMergedOptions(t),s=t.proxy,n=t.ctx;shouldCacheAccess=!1,e.beforeCreate&&callHook(e.beforeCreate,t,"bc");const{data:i,computed:r,methods:h,watch:T,provide:E,inject:v,created:y,beforeMount:F,mounted:k,beforeUpdate:w,updated:f,activated:a,deactivated:u,beforeDestroy:g,beforeUnmount:R,destroyed:S,unmounted:d,render:O,renderTracked:M,renderTriggered:V,errorCaptured:_,serverPrefetch:b,expose:m,inheritAttrs:I,components:j,directives:Y,filters:X}=e;if(v&&resolveInjections(v,n,null),h)for(const z in h){const st=h[z];isFunction(st)&&(n[z]=st.bind(s))}if(i){const z=i.call(s,s);isObject(z)&&(t.data=reactive(z))}if(shouldCacheAccess=!0,r)for(const z in r){const st=r[z],dt=isFunction(st)?st.bind(s,s):isFunction(st.get)?st.get.bind(s,s):NOOP,ft=!isFunction(st)&&isFunction(st.set)?st.set.bind(s):NOOP,pt=computed({get:dt,set:ft});Object.defineProperty(n,z,{enumerable:!0,configurable:!0,get:()=>pt.value,set:U=>pt.value=U})}if(T)for(const z in T)createWatcher(T[z],n,s,z);if(E){const z=isFunction(E)?E.call(s):E;Reflect.ownKeys(z).forEach(st=>{provide(st,z[st])})}y&&callHook(y,t,"c");function Q(z,st){isArray(st)?st.forEach(dt=>z(dt.bind(s))):st&&z(st.bind(s))}if(Q(onBeforeMount,F),Q(onMounted,k),Q(onBeforeUpdate,w),Q(onUpdated,f),Q(onActivated,a),Q(onDeactivated,u),Q(onErrorCaptured,_),Q(onRenderTracked,M),Q(onRenderTriggered,V),Q(onBeforeUnmount,R),Q(onUnmounted,d),Q(onServerPrefetch,b),isArray(m))if(m.length){const z=t.exposed||(t.exposed={});m.forEach(st=>{Object.defineProperty(z,st,{get:()=>s[st],set:dt=>s[st]=dt})})}else t.exposed||(t.exposed={});O&&t.render===NOOP&&(t.render=O),I!=null&&(t.inheritAttrs=I),j&&(t.components=j),Y&&(t.directives=Y),b&&markAsyncBoundary(t)}function resolveInjections(t,e,s=NOOP){isArray(t)&&(t=normalizeInject(t));for(const n in t){const i=t[n];let r;isObject(i)?"default"in i?r=inject(i.from||n,i.default,!0):r=inject(i.from||n):r=inject(i),isRef(r)?Object.defineProperty(e,n,{enumerable:!0,configurable:!0,get:()=>r.value,set:h=>r.value=h}):e[n]=r}}function callHook(t,e,s){callWithAsyncErrorHandling(isArray(t)?t.map(n=>n.bind(e.proxy)):t.bind(e.proxy),e,s)}function createWatcher(t,e,s,n){let i=n.includes(".")?createPathGetter(s,n):()=>s[n];if(isString(t)){const r=e[t];isFunction(r)&&watch(i,r)}else if(isFunction(t))watch(i,t.bind(s));else if(isObject(t))if(isArray(t))t.forEach(r=>createWatcher(r,e,s,n));else{const r=isFunction(t.handler)?t.handler.bind(s):e[t.handler];isFunction(r)&&watch(i,r,t)}}function resolveMergedOptions(t){const e=t.type,{mixins:s,extends:n}=e,{mixins:i,optionsCache:r,config:{optionMergeStrategies:h}}=t.appContext,T=r.get(e);let E;return T?E=T:!i.length&&!s&&!n?E=e:(E={},i.length&&i.forEach(v=>mergeOptions(E,v,h,!0)),mergeOptions(E,e,h)),isObject(e)&&r.set(e,E),E}function mergeOptions(t,e,s,n=!1){const{mixins:i,extends:r}=e;r&&mergeOptions(t,r,s,!0),i&&i.forEach(h=>mergeOptions(t,h,s,!0));for(const h in e)if(!(n&&h==="expose")){const T=internalOptionMergeStrats[h]||s&&s[h];t[h]=T?T(t[h],e[h]):e[h]}return t}const internalOptionMergeStrats={data:mergeDataFn,props:mergeEmitsOrPropsOptions,emits:mergeEmitsOrPropsOptions,methods:mergeObjectOptions,computed:mergeObjectOptions,beforeCreate:mergeAsArray,created:mergeAsArray,beforeMount:mergeAsArray,mounted:mergeAsArray,beforeUpdate:mergeAsArray,updated:mergeAsArray,beforeDestroy:mergeAsArray,beforeUnmount:mergeAsArray,destroyed:mergeAsArray,unmounted:mergeAsArray,activated:mergeAsArray,deactivated:mergeAsArray,errorCaptured:mergeAsArray,serverPrefetch:mergeAsArray,components:mergeObjectOptions,directives:mergeObjectOptions,watch:mergeWatchOptions,provide:mergeDataFn,inject:mergeInject};function mergeDataFn(t,e){return e?t?function(){return extend(isFunction(t)?t.call(this,this):t,isFunction(e)?e.call(this,this):e)}:e:t}function mergeInject(t,e){return mergeObjectOptions(normalizeInject(t),normalizeInject(e))}function normalizeInject(t){if(isArray(t)){const e={};for(let s=0;s<t.length;s++)e[t[s]]=t[s];return e}return t}function mergeAsArray(t,e){return t?[...new Set([].concat(t,e))]:e}function mergeObjectOptions(t,e){return t?extend(Object.create(null),t,e):e}function mergeEmitsOrPropsOptions(t,e){return t?isArray(t)&&isArray(e)?[...new Set([...t,...e])]:extend(Object.create(null),normalizePropsOrEmits(t),normalizePropsOrEmits(e??{})):e}function mergeWatchOptions(t,e){if(!t)return e;if(!e)return t;const s=extend(Object.create(null),t);for(const n in e)s[n]=mergeAsArray(t[n],e[n]);return s}function createAppContext(){return{app:null,config:{isNativeTag:NO,performance:!1,globalProperties:{},optionMergeStrategies:{},errorHandler:void 0,warnHandler:void 0,compilerOptions:{}},mixins:[],components:{},directives:{},provides:Object.create(null),optionsCache:new WeakMap,propsCache:new WeakMap,emitsCache:new WeakMap}}let uid$1=0;function createAppAPI(t,e){return function(n,i=null){isFunction(n)||(n=extend({},n)),i!=null&&!isObject(i)&&(i=null);const r=createAppContext(),h=new WeakSet,T=[];let E=!1;const v=r.app={_uid:uid$1++,_component:n,_props:i,_container:null,_context:r,_instance:null,version,get config(){return r.config},set config(y){},use(y,...F){return h.has(y)||(y&&isFunction(y.install)?(h.add(y),y.install(v,...F)):isFunction(y)&&(h.add(y),y(v,...F))),v},mixin(y){return r.mixins.includes(y)||r.mixins.push(y),v},component(y,F){return F?(r.components[y]=F,v):r.components[y]},directive(y,F){return F?(r.directives[y]=F,v):r.directives[y]},mount(y,F,k){if(!E){const w=v._ceVNode||createVNode(n,i);return w.appContext=r,k===!0?k="svg":k===!1&&(k=void 0),F&&e?e(w,y):t(w,y,k),E=!0,v._container=y,y.__vue_app__=v,getComponentPublicInstance(w.component)}},onUnmount(y){T.push(y)},unmount(){E&&(callWithAsyncErrorHandling(T,v._instance,16),t(null,v._container),delete v._container.__vue_app__)},provide(y,F){return r.provides[y]=F,v},runWithContext(y){const F=currentApp;currentApp=v;try{return y()}finally{currentApp=F}}};return v}}let currentApp=null;function provide(t,e){if(currentInstance){let s=currentInstance.provides;const n=currentInstance.parent&&currentInstance.parent.provides;n===s&&(s=currentInstance.provides=Object.create(n)),s[t]=e}}function inject(t,e,s=!1){const n=currentInstance||currentRenderingInstance;if(n||currentApp){let i=currentApp?currentApp._context.provides:n?n.parent==null||n.ce?n.vnode.appContext&&n.vnode.appContext.provides:n.parent.provides:void 0;if(i&&t in i)return i[t];if(arguments.length>1)return s&&isFunction(e)?e.call(n&&n.proxy):e}}const internalObjectProto={},createInternalObject=()=>Object.create(internalObjectProto),isInternalObject=t=>Object.getPrototypeOf(t)===internalObjectProto;function initProps(t,e,s,n=!1){const i={},r=createInternalObject();t.propsDefaults=Object.create(null),setFullProps(t,e,i,r);for(const h in t.propsOptions[0])h in i||(i[h]=void 0);s?t.props=n?i:shallowReactive(i):t.type.props?t.props=i:t.props=r,t.attrs=r}function updateProps(t,e,s,n){const{props:i,attrs:r,vnode:{patchFlag:h}}=t,T=toRaw(i),[E]=t.propsOptions;let v=!1;if((n||h>0)&&!(h&16)){if(h&8){const y=t.vnode.dynamicProps;for(let F=0;F<y.length;F++){let k=y[F];if(isEmitListener(t.emitsOptions,k))continue;const w=e[k];if(E)if(hasOwn(r,k))w!==r[k]&&(r[k]=w,v=!0);else{const f=camelize(k);i[f]=resolvePropValue(E,T,f,w,t,!1)}else w!==r[k]&&(r[k]=w,v=!0)}}}else{setFullProps(t,e,i,r)&&(v=!0);let y;for(const F in T)(!e||!hasOwn(e,F)&&((y=hyphenate(F))===F||!hasOwn(e,y)))&&(E?s&&(s[F]!==void 0||s[y]!==void 0)&&(i[F]=resolvePropValue(E,T,F,void 0,t,!0)):delete i[F]);if(r!==T)for(const F in r)(!e||!hasOwn(e,F))&&(delete r[F],v=!0)}v&&trigger(t.attrs,"set","")}function setFullProps(t,e,s,n){const[i,r]=t.propsOptions;let h=!1,T;if(e)for(let E in e){if(isReservedProp(E))continue;const v=e[E];let y;i&&hasOwn(i,y=camelize(E))?!r||!r.includes(y)?s[y]=v:(T||(T={}))[y]=v:isEmitListener(t.emitsOptions,E)||(!(E in n)||v!==n[E])&&(n[E]=v,h=!0)}if(r){const E=toRaw(s),v=T||EMPTY_OBJ;for(let y=0;y<r.length;y++){const F=r[y];s[F]=resolvePropValue(i,E,F,v[F],t,!hasOwn(v,F))}}return h}function resolvePropValue(t,e,s,n,i,r){const h=t[s];if(h!=null){const T=hasOwn(h,"default");if(T&&n===void 0){const E=h.default;if(h.type!==Function&&!h.skipFactory&&isFunction(E)){const{propsDefaults:v}=i;if(s in v)n=v[s];else{const y=setCurrentInstance(i);n=v[s]=E.call(null,e),y()}}else n=E;i.ce&&i.ce._setProp(s,n)}h[0]&&(r&&!T?n=!1:h[1]&&(n===""||n===hyphenate(s))&&(n=!0))}return n}const mixinPropsCache=new WeakMap;function normalizePropsOptions(t,e,s=!1){const n=s?mixinPropsCache:e.propsCache,i=n.get(t);if(i)return i;const r=t.props,h={},T=[];let E=!1;if(!isFunction(t)){const y=F=>{E=!0;const[k,w]=normalizePropsOptions(F,e,!0);extend(h,k),w&&T.push(...w)};!s&&e.mixins.length&&e.mixins.forEach(y),t.extends&&y(t.extends),t.mixins&&t.mixins.forEach(y)}if(!r&&!E)return isObject(t)&&n.set(t,EMPTY_ARR),EMPTY_ARR;if(isArray(r))for(let y=0;y<r.length;y++){const F=camelize(r[y]);validatePropName(F)&&(h[F]=EMPTY_OBJ)}else if(r)for(const y in r){const F=camelize(y);if(validatePropName(F)){const k=r[y],w=h[F]=isArray(k)||isFunction(k)?{type:k}:extend({},k),f=w.type;let a=!1,u=!0;if(isArray(f))for(let g=0;g<f.length;++g){const R=f[g],S=isFunction(R)&&R.name;if(S==="Boolean"){a=!0;break}else S==="String"&&(u=!1)}else a=isFunction(f)&&f.name==="Boolean";w[0]=a,w[1]=u,(a||hasOwn(w,"default"))&&T.push(F)}}const v=[h,T];return isObject(t)&&n.set(t,v),v}function validatePropName(t){return t[0]!=="$"&&!isReservedProp(t)}const isInternalKey=t=>t[0]==="_"||t==="$stable",normalizeSlotValue=t=>isArray(t)?t.map(normalizeVNode):[normalizeVNode(t)],normalizeSlot=(t,e,s)=>{if(e._n)return e;const n=withCtx((...i)=>normalizeSlotValue(e(...i)),s);return n._c=!1,n},normalizeObjectSlots=(t,e,s)=>{const n=t._ctx;for(const i in t){if(isInternalKey(i))continue;const r=t[i];if(isFunction(r))e[i]=normalizeSlot(i,r,n);else if(r!=null){const h=normalizeSlotValue(r);e[i]=()=>h}}},normalizeVNodeSlots=(t,e)=>{const s=normalizeSlotValue(e);t.slots.default=()=>s},assignSlots=(t,e,s)=>{for(const n in e)(s||!isInternalKey(n))&&(t[n]=e[n])},initSlots=(t,e,s)=>{const n=t.slots=createInternalObject();if(t.vnode.shapeFlag&32){const i=e.__;i&&def(n,"__",i,!0);const r=e._;r?(assignSlots(n,e,s),s&&def(n,"_",r,!0)):normalizeObjectSlots(e,n)}else e&&normalizeVNodeSlots(t,e)},updateSlots=(t,e,s)=>{const{vnode:n,slots:i}=t;let r=!0,h=EMPTY_OBJ;if(n.shapeFlag&32){const T=e._;T?s&&T===1?r=!1:assignSlots(i,e,s):(r=!e.$stable,normalizeObjectSlots(e,i)),h=e}else e&&(normalizeVNodeSlots(t,e),h={default:1});if(r)for(const T in i)!isInternalKey(T)&&h[T]==null&&delete i[T]},queuePostRenderEffect=queueEffectWithSuspense;function createRenderer(t){return baseCreateRenderer(t)}function baseCreateRenderer(t,e){const s=getGlobalThis();s.__VUE__=!0;const{insert:n,remove:i,patchProp:r,createElement:h,createText:T,createComment:E,setText:v,setElementText:y,parentNode:F,nextSibling:k,setScopeId:w=NOOP,insertStaticContent:f}=t,a=(o,l,C,N=null,H=null,it=null,W=void 0,rt=null,K=!!l.dynamicChildren)=>{if(o===l)return;o&&!isSameVNodeType(o,l)&&(N=$(o),U(o,H,it,!0),o=null),l.patchFlag===-2&&(K=!1,l.dynamicChildren=null);const{type:Z,ref:ht,shapeFlag:D}=l;switch(Z){case Text:u(o,l,C,N);break;case Comment:g(o,l,C,N);break;case Static:o==null&&R(l,C,N,W);break;case Fragment:j(o,l,C,N,H,it,W,rt,K);break;default:D&1?O(o,l,C,N,H,it,W,rt,K):D&6?Y(o,l,C,N,H,it,W,rt,K):(D&64||D&128)&&Z.process(o,l,C,N,H,it,W,rt,K,at)}ht!=null&&H?setRef(ht,o&&o.ref,it,l||o,!l):ht==null&&o&&o.ref!=null&&setRef(o.ref,null,it,o,!0)},u=(o,l,C,N)=>{if(o==null)n(l.el=T(l.children),C,N);else{const H=l.el=o.el;l.children!==o.children&&v(H,l.children)}},g=(o,l,C,N)=>{o==null?n(l.el=E(l.children||""),C,N):l.el=o.el},R=(o,l,C,N)=>{[o.el,o.anchor]=f(o.children,l,C,N,o.el,o.anchor)},S=({el:o,anchor:l},C,N)=>{let H;for(;o&&o!==l;)H=k(o),n(o,C,N),o=H;n(l,C,N)},d=({el:o,anchor:l})=>{let C;for(;o&&o!==l;)C=k(o),i(o),o=C;i(l)},O=(o,l,C,N,H,it,W,rt,K)=>{l.type==="svg"?W="svg":l.type==="math"&&(W="mathml"),o==null?M(l,C,N,H,it,W,rt,K):b(o,l,H,it,W,rt,K)},M=(o,l,C,N,H,it,W,rt)=>{let K,Z;const{props:ht,shapeFlag:D,transition:ct,dirs:vt}=o;if(K=o.el=h(o.type,it,ht&&ht.is,ht),D&8?y(K,o.children):D&16&&_(o.children,K,null,N,H,resolveChildrenNamespace(o,it),W,rt),vt&&invokeDirectiveHook(o,null,N,"created"),V(K,o,o.scopeId,W,N),ht){for(const xt in ht)xt!=="value"&&!isReservedProp(xt)&&r(K,xt,null,ht[xt],it,N);"value"in ht&&r(K,"value",null,ht.value,it),(Z=ht.onVnodeBeforeMount)&&invokeVNodeHook(Z,N,o)}vt&&invokeDirectiveHook(o,null,N,"beforeMount");const bt=needTransition(H,ct);bt&&ct.beforeEnter(K),n(K,l,C),((Z=ht&&ht.onVnodeMounted)||bt||vt)&&queuePostRenderEffect(()=>{Z&&invokeVNodeHook(Z,N,o),bt&&ct.enter(K),vt&&invokeDirectiveHook(o,null,N,"mounted")},H)},V=(o,l,C,N,H)=>{if(C&&w(o,C),N)for(let it=0;it<N.length;it++)w(o,N[it]);if(H){let it=H.subTree;if(l===it||isSuspense(it.type)&&(it.ssContent===l||it.ssFallback===l)){const W=H.vnode;V(o,W,W.scopeId,W.slotScopeIds,H.parent)}}},_=(o,l,C,N,H,it,W,rt,K=0)=>{for(let Z=K;Z<o.length;Z++){const ht=o[Z]=rt?cloneIfMounted(o[Z]):normalizeVNode(o[Z]);a(null,ht,l,C,N,H,it,W,rt)}},b=(o,l,C,N,H,it,W)=>{const rt=l.el=o.el;let{patchFlag:K,dynamicChildren:Z,dirs:ht}=l;K|=o.patchFlag&16;const D=o.props||EMPTY_OBJ,ct=l.props||EMPTY_OBJ;let vt;if(C&&toggleRecurse(C,!1),(vt=ct.onVnodeBeforeUpdate)&&invokeVNodeHook(vt,C,l,o),ht&&invokeDirectiveHook(l,o,C,"beforeUpdate"),C&&toggleRecurse(C,!0),(D.innerHTML&&ct.innerHTML==null||D.textContent&&ct.textContent==null)&&y(rt,""),Z?m(o.dynamicChildren,Z,rt,C,N,resolveChildrenNamespace(l,H),it):W||st(o,l,rt,null,C,N,resolveChildrenNamespace(l,H),it,!1),K>0){if(K&16)I(rt,D,ct,C,H);else if(K&2&&D.class!==ct.class&&r(rt,"class",null,ct.class,H),K&4&&r(rt,"style",D.style,ct.style,H),K&8){const bt=l.dynamicProps;for(let xt=0;xt<bt.length;xt++){const Et=bt[xt],Rt=D[Et],Pt=ct[Et];(Pt!==Rt||Et==="value")&&r(rt,Et,Rt,Pt,H,C)}}K&1&&o.children!==l.children&&y(rt,l.children)}else!W&&Z==null&&I(rt,D,ct,C,H);((vt=ct.onVnodeUpdated)||ht)&&queuePostRenderEffect(()=>{vt&&invokeVNodeHook(vt,C,l,o),ht&&invokeDirectiveHook(l,o,C,"updated")},N)},m=(o,l,C,N,H,it,W)=>{for(let rt=0;rt<l.length;rt++){const K=o[rt],Z=l[rt],ht=K.el&&(K.type===Fragment||!isSameVNodeType(K,Z)||K.shapeFlag&198)?F(K.el):C;a(K,Z,ht,null,N,H,it,W,!0)}},I=(o,l,C,N,H)=>{if(l!==C){if(l!==EMPTY_OBJ)for(const it in l)!isReservedProp(it)&&!(it in C)&&r(o,it,l[it],null,H,N);for(const it in C){if(isReservedProp(it))continue;const W=C[it],rt=l[it];W!==rt&&it!=="value"&&r(o,it,rt,W,H,N)}"value"in C&&r(o,"value",l.value,C.value,H)}},j=(o,l,C,N,H,it,W,rt,K)=>{const Z=l.el=o?o.el:T(""),ht=l.anchor=o?o.anchor:T("");let{patchFlag:D,dynamicChildren:ct,slotScopeIds:vt}=l;vt&&(rt=rt?rt.concat(vt):vt),o==null?(n(Z,C,N),n(ht,C,N),_(l.children||[],C,ht,H,it,W,rt,K)):D>0&&D&64&&ct&&o.dynamicChildren?(m(o.dynamicChildren,ct,C,H,it,W,rt),(l.key!=null||H&&l===H.subTree)&&traverseStaticChildren(o,l,!0)):st(o,l,C,ht,H,it,W,rt,K)},Y=(o,l,C,N,H,it,W,rt,K)=>{l.slotScopeIds=rt,o==null?l.shapeFlag&512?H.ctx.activate(l,C,N,W,K):X(l,C,N,H,it,W,K):lt(o,l,K)},X=(o,l,C,N,H,it,W)=>{const rt=o.component=createComponentInstance(o,N,H);if(isKeepAlive(o)&&(rt.ctx.renderer=at),setupComponent(rt,!1,W),rt.asyncDep){if(H&&H.registerDep(rt,Q,W),!o.el){const K=rt.subTree=createVNode(Comment);g(null,K,l,C)}}else Q(rt,o,l,C,H,it,W)},lt=(o,l,C)=>{const N=l.component=o.component;if(shouldUpdateComponent(o,l,C))if(N.asyncDep&&!N.asyncResolved){z(N,l,C);return}else N.next=l,N.update();else l.el=o.el,N.vnode=l},Q=(o,l,C,N,H,it,W)=>{const rt=()=>{if(o.isMounted){let{next:D,bu:ct,u:vt,parent:bt,vnode:xt}=o;{const Tt=locateNonHydratedAsyncRoot(o);if(Tt){D&&(D.el=xt.el,z(o,D,W)),Tt.asyncDep.then(()=>{o.isUnmounted||rt()});return}}let Et=D,Rt;toggleRecurse(o,!1),D?(D.el=xt.el,z(o,D,W)):D=xt,ct&&invokeArrayFns(ct),(Rt=D.props&&D.props.onVnodeBeforeUpdate)&&invokeVNodeHook(Rt,bt,D,xt),toggleRecurse(o,!0);const Pt=renderComponentRoot(o),Nt=o.subTree;o.subTree=Pt,a(Nt,Pt,F(Nt.el),$(Nt),o,H,it),D.el=Pt.el,Et===null&&updateHOCHostEl(o,Pt.el),vt&&queuePostRenderEffect(vt,H),(Rt=D.props&&D.props.onVnodeUpdated)&&queuePostRenderEffect(()=>invokeVNodeHook(Rt,bt,D,xt),H)}else{let D;const{el:ct,props:vt}=l,{bm:bt,m:xt,parent:Et,root:Rt,type:Pt}=o,Nt=isAsyncWrapper(l);if(toggleRecurse(o,!1),bt&&invokeArrayFns(bt),!Nt&&(D=vt&&vt.onVnodeBeforeMount)&&invokeVNodeHook(D,Et,l),toggleRecurse(o,!0),ct&&P){const Tt=()=>{o.subTree=renderComponentRoot(o),P(ct,o.subTree,o,H,null)};Nt&&Pt.__asyncHydrate?Pt.__asyncHydrate(ct,o,Tt):Tt()}else{Rt.ce&&Rt.ce._def.shadowRoot!==!1&&Rt.ce._injectChildStyle(Pt);const Tt=o.subTree=renderComponentRoot(o);a(null,Tt,C,N,o,H,it),l.el=Tt.el}if(xt&&queuePostRenderEffect(xt,H),!Nt&&(D=vt&&vt.onVnodeMounted)){const Tt=l;queuePostRenderEffect(()=>invokeVNodeHook(D,Et,Tt),H)}(l.shapeFlag&256||Et&&isAsyncWrapper(Et.vnode)&&Et.vnode.shapeFlag&256)&&o.a&&queuePostRenderEffect(o.a,H),o.isMounted=!0,l=C=N=null}};o.scope.on();const K=o.effect=new ReactiveEffect(rt);o.scope.off();const Z=o.update=K.run.bind(K),ht=o.job=K.runIfDirty.bind(K);ht.i=o,ht.id=o.uid,K.scheduler=()=>queueJob(ht),toggleRecurse(o,!0),Z()},z=(o,l,C)=>{l.component=o;const N=o.vnode.props;o.vnode=l,o.next=null,updateProps(o,l.props,N,C),updateSlots(o,l.children,C),pauseTracking(),flushPreFlushCbs(o),resetTracking()},st=(o,l,C,N,H,it,W,rt,K=!1)=>{const Z=o&&o.children,ht=o?o.shapeFlag:0,D=l.children,{patchFlag:ct,shapeFlag:vt}=l;if(ct>0){if(ct&128){ft(Z,D,C,N,H,it,W,rt,K);return}else if(ct&256){dt(Z,D,C,N,H,it,W,rt,K);return}}vt&8?(ht&16&&q(Z,H,it),D!==Z&&y(C,D)):ht&16?vt&16?ft(Z,D,C,N,H,it,W,rt,K):q(Z,H,it,!0):(ht&8&&y(C,""),vt&16&&_(D,C,N,H,it,W,rt,K))},dt=(o,l,C,N,H,it,W,rt,K)=>{o=o||EMPTY_ARR,l=l||EMPTY_ARR;const Z=o.length,ht=l.length,D=Math.min(Z,ht);let ct;for(ct=0;ct<D;ct++){const vt=l[ct]=K?cloneIfMounted(l[ct]):normalizeVNode(l[ct]);a(o[ct],vt,C,null,H,it,W,rt,K)}Z>ht?q(o,H,it,!0,!1,D):_(l,C,N,H,it,W,rt,K,D)},ft=(o,l,C,N,H,it,W,rt,K)=>{let Z=0;const ht=l.length;let D=o.length-1,ct=ht-1;for(;Z<=D&&Z<=ct;){const vt=o[Z],bt=l[Z]=K?cloneIfMounted(l[Z]):normalizeVNode(l[Z]);if(isSameVNodeType(vt,bt))a(vt,bt,C,null,H,it,W,rt,K);else break;Z++}for(;Z<=D&&Z<=ct;){const vt=o[D],bt=l[ct]=K?cloneIfMounted(l[ct]):normalizeVNode(l[ct]);if(isSameVNodeType(vt,bt))a(vt,bt,C,null,H,it,W,rt,K);else break;D--,ct--}if(Z>D){if(Z<=ct){const vt=ct+1,bt=vt<ht?l[vt].el:N;for(;Z<=ct;)a(null,l[Z]=K?cloneIfMounted(l[Z]):normalizeVNode(l[Z]),C,bt,H,it,W,rt,K),Z++}}else if(Z>ct)for(;Z<=D;)U(o[Z],H,it,!0),Z++;else{const vt=Z,bt=Z,xt=new Map;for(Z=bt;Z<=ct;Z++){const ut=l[Z]=K?cloneIfMounted(l[Z]):normalizeVNode(l[Z]);ut.key!=null&&xt.set(ut.key,Z)}let Et,Rt=0;const Pt=ct-bt+1;let Nt=!1,Tt=0;const It=new Array(Pt);for(Z=0;Z<Pt;Z++)It[Z]=0;for(Z=vt;Z<=D;Z++){const ut=o[Z];if(Rt>=Pt){U(ut,H,it,!0);continue}let _t;if(ut.key!=null)_t=xt.get(ut.key);else for(Et=bt;Et<=ct;Et++)if(It[Et-bt]===0&&isSameVNodeType(ut,l[Et])){_t=Et;break}_t===void 0?U(ut,H,it,!0):(It[_t-bt]=Z+1,_t>=Tt?Tt=_t:Nt=!0,a(ut,l[_t],C,null,H,it,W,rt,K),Rt++)}const Yt=Nt?getSequence(It):EMPTY_ARR;for(Et=Yt.length-1,Z=Pt-1;Z>=0;Z--){const ut=bt+Z,_t=l[ut],ot=ut+1<ht?l[ut+1].el:N;It[Z]===0?a(null,_t,C,ot,H,it,W,rt,K):Nt&&(Et<0||Z!==Yt[Et]?pt(_t,C,ot,2):Et--)}}},pt=(o,l,C,N,H=null)=>{const{el:it,type:W,transition:rt,children:K,shapeFlag:Z}=o;if(Z&6){pt(o.component.subTree,l,C,N);return}if(Z&128){o.suspense.move(l,C,N);return}if(Z&64){W.move(o,l,C,at);return}if(W===Fragment){n(it,l,C);for(let D=0;D<K.length;D++)pt(K[D],l,C,N);n(o.anchor,l,C);return}if(W===Static){S(o,l,C);return}if(N!==2&&Z&1&&rt)if(N===0)rt.beforeEnter(it),n(it,l,C),queuePostRenderEffect(()=>rt.enter(it),H);else{const{leave:D,delayLeave:ct,afterLeave:vt}=rt,bt=()=>{o.ctx.isUnmounted?i(it):n(it,l,C)},xt=()=>{D(it,()=>{bt(),vt&&vt()})};ct?ct(it,bt,xt):xt()}else n(it,l,C)},U=(o,l,C,N=!1,H=!1)=>{const{type:it,props:W,ref:rt,children:K,dynamicChildren:Z,shapeFlag:ht,patchFlag:D,dirs:ct,cacheIndex:vt}=o;if(D===-2&&(H=!1),rt!=null&&(pauseTracking(),setRef(rt,null,C,o,!0),resetTracking()),vt!=null&&(l.renderCache[vt]=void 0),ht&256){l.ctx.deactivate(o);return}const bt=ht&1&&ct,xt=!isAsyncWrapper(o);let Et;if(xt&&(Et=W&&W.onVnodeBeforeUnmount)&&invokeVNodeHook(Et,l,o),ht&6)L(o.component,C,N);else{if(ht&128){o.suspense.unmount(C,N);return}bt&&invokeDirectiveHook(o,null,l,"beforeUnmount"),ht&64?o.type.remove(o,l,C,at,N):Z&&!Z.hasOnce&&(it!==Fragment||D>0&&D&64)?q(Z,l,C,!1,!0):(it===Fragment&&D&384||!H&&ht&16)&&q(K,l,C),N&&x(o)}(xt&&(Et=W&&W.onVnodeUnmounted)||bt)&&queuePostRenderEffect(()=>{Et&&invokeVNodeHook(Et,l,o),bt&&invokeDirectiveHook(o,null,l,"unmounted")},C)},x=o=>{const{type:l,el:C,anchor:N,transition:H}=o;if(l===Fragment){A(C,N);return}if(l===Static){d(o);return}const it=()=>{i(C),H&&!H.persisted&&H.afterLeave&&H.afterLeave()};if(o.shapeFlag&1&&H&&!H.persisted){const{leave:W,delayLeave:rt}=H,K=()=>W(C,it);rt?rt(o.el,it,K):K()}else it()},A=(o,l)=>{let C;for(;o!==l;)C=k(o),i(o),o=C;i(l)},L=(o,l,C)=>{const{bum:N,scope:H,job:it,subTree:W,um:rt,m:K,a:Z,parent:ht,slots:{__:D}}=o;invalidateMount(K),invalidateMount(Z),N&&invokeArrayFns(N),ht&&isArray(D)&&D.forEach(ct=>{ht.renderCache[ct]=void 0}),H.stop(),it&&(it.flags|=8,U(W,o,l,C)),rt&&queuePostRenderEffect(rt,l),queuePostRenderEffect(()=>{o.isUnmounted=!0},l),l&&l.pendingBranch&&!l.isUnmounted&&o.asyncDep&&!o.asyncResolved&&o.suspenseId===l.pendingId&&(l.deps--,l.deps===0&&l.resolve())},q=(o,l,C,N=!1,H=!1,it=0)=>{for(let W=it;W<o.length;W++)U(o[W],l,C,N,H)},$=o=>{if(o.shapeFlag&6)return $(o.component.subTree);if(o.shapeFlag&128)return o.suspense.next();const l=k(o.anchor||o.el),C=l&&l[TeleportEndKey];return C?k(C):l};let G=!1;const nt=(o,l,C)=>{o==null?l._vnode&&U(l._vnode,null,null,!0):a(l._vnode||null,o,l,null,null,null,C),l._vnode=o,G||(G=!0,flushPreFlushCbs(),flushPostFlushCbs(),G=!1)},at={p:a,um:U,m:pt,r:x,mt:X,mc:_,pc:st,pbc:m,n:$,o:t};let c,P;return e&&([c,P]=e(at)),{render:nt,hydrate:c,createApp:createAppAPI(nt,c)}}function resolveChildrenNamespace({type:t,props:e},s){return s==="svg"&&t==="foreignObject"||s==="mathml"&&t==="annotation-xml"&&e&&e.encoding&&e.encoding.includes("html")?void 0:s}function toggleRecurse({effect:t,job:e},s){s?(t.flags|=32,e.flags|=4):(t.flags&=-33,e.flags&=-5)}function needTransition(t,e){return(!t||t&&!t.pendingBranch)&&e&&!e.persisted}function traverseStaticChildren(t,e,s=!1){const n=t.children,i=e.children;if(isArray(n)&&isArray(i))for(let r=0;r<n.length;r++){const h=n[r];let T=i[r];T.shapeFlag&1&&!T.dynamicChildren&&((T.patchFlag<=0||T.patchFlag===32)&&(T=i[r]=cloneIfMounted(i[r]),T.el=h.el),!s&&T.patchFlag!==-2&&traverseStaticChildren(h,T)),T.type===Text&&(T.el=h.el),T.type===Comment&&!T.el&&(T.el=h.el)}}function getSequence(t){const e=t.slice(),s=[0];let n,i,r,h,T;const E=t.length;for(n=0;n<E;n++){const v=t[n];if(v!==0){if(i=s[s.length-1],t[i]<v){e[n]=i,s.push(n);continue}for(r=0,h=s.length-1;r<h;)T=r+h>>1,t[s[T]]<v?r=T+1:h=T;v<t[s[r]]&&(r>0&&(e[n]=s[r-1]),s[r]=n)}}for(r=s.length,h=s[r-1];r-- >0;)s[r]=h,h=e[h];return s}function locateNonHydratedAsyncRoot(t){const e=t.subTree.component;if(e)return e.asyncDep&&!e.asyncResolved?e:locateNonHydratedAsyncRoot(e)}function invalidateMount(t){if(t)for(let e=0;e<t.length;e++)t[e].flags|=8}const ssrContextKey=Symbol.for("v-scx"),useSSRContext=()=>inject(ssrContextKey);function watch(t,e,s){return doWatch(t,e,s)}function doWatch(t,e,s=EMPTY_OBJ){const{immediate:n,deep:i,flush:r,once:h}=s,T=extend({},s),E=e&&n||!e&&r!=="post";let v;if(isInSSRComponentSetup){if(r==="sync"){const w=useSSRContext();v=w.__watcherHandles||(w.__watcherHandles=[])}else if(!E){const w=()=>{};return w.stop=NOOP,w.resume=NOOP,w.pause=NOOP,w}}const y=currentInstance;T.call=(w,f,a)=>callWithAsyncErrorHandling(w,y,f,a);let F=!1;r==="post"?T.scheduler=w=>{queuePostRenderEffect(w,y&&y.suspense)}:r!=="sync"&&(F=!0,T.scheduler=(w,f)=>{f?w():queueJob(w)}),T.augmentJob=w=>{e&&(w.flags|=4),F&&(w.flags|=2,y&&(w.id=y.uid,w.i=y))};const k=watch$1(t,e,T);return isInSSRComponentSetup&&(v?v.push(k):E&&k()),k}function instanceWatch(t,e,s){const n=this.proxy,i=isString(t)?t.includes(".")?createPathGetter(n,t):()=>n[t]:t.bind(n,n);let r;isFunction(e)?r=e:(r=e.handler,s=e);const h=setCurrentInstance(this),T=doWatch(i,r.bind(n),s);return h(),T}function createPathGetter(t,e){const s=e.split(".");return()=>{let n=t;for(let i=0;i<s.length&&n;i++)n=n[s[i]];return n}}const getModelModifiers=(t,e)=>e==="modelValue"||e==="model-value"?t.modelModifiers:t[`${e}Modifiers`]||t[`${camelize(e)}Modifiers`]||t[`${hyphenate(e)}Modifiers`];function emit(t,e,...s){if(t.isUnmounted)return;const n=t.vnode.props||EMPTY_OBJ;let i=s;const r=e.startsWith("update:"),h=r&&getModelModifiers(n,e.slice(7));h&&(h.trim&&(i=s.map(y=>isString(y)?y.trim():y)),h.number&&(i=s.map(looseToNumber)));let T,E=n[T=toHandlerKey(e)]||n[T=toHandlerKey(camelize(e))];!E&&r&&(E=n[T=toHandlerKey(hyphenate(e))]),E&&callWithAsyncErrorHandling(E,t,6,i);const v=n[T+"Once"];if(v){if(!t.emitted)t.emitted={};else if(t.emitted[T])return;t.emitted[T]=!0,callWithAsyncErrorHandling(v,t,6,i)}}function normalizeEmitsOptions(t,e,s=!1){const n=e.emitsCache,i=n.get(t);if(i!==void 0)return i;const r=t.emits;let h={},T=!1;if(!isFunction(t)){const E=v=>{const y=normalizeEmitsOptions(v,e,!0);y&&(T=!0,extend(h,y))};!s&&e.mixins.length&&e.mixins.forEach(E),t.extends&&E(t.extends),t.mixins&&t.mixins.forEach(E)}return!r&&!T?(isObject(t)&&n.set(t,null),null):(isArray(r)?r.forEach(E=>h[E]=null):extend(h,r),isObject(t)&&n.set(t,h),h)}function isEmitListener(t,e){return!t||!isOn(e)?!1:(e=e.slice(2).replace(/Once$/,""),hasOwn(t,e[0].toLowerCase()+e.slice(1))||hasOwn(t,hyphenate(e))||hasOwn(t,e))}function markAttrsAccessed(){}function renderComponentRoot(t){const{type:e,vnode:s,proxy:n,withProxy:i,propsOptions:[r],slots:h,attrs:T,emit:E,render:v,renderCache:y,props:F,data:k,setupState:w,ctx:f,inheritAttrs:a}=t,u=setCurrentRenderingInstance(t);let g,R;try{if(s.shapeFlag&4){const d=i||n,O=d;g=normalizeVNode(v.call(O,d,y,F,w,k,f)),R=T}else{const d=e;g=normalizeVNode(d.length>1?d(F,{attrs:T,slots:h,emit:E}):d(F,null)),R=e.props?T:getFunctionalFallthrough(T)}}catch(d){blockStack.length=0,handleError(d,t,1),g=createVNode(Comment)}let S=g;if(R&&a!==!1){const d=Object.keys(R),{shapeFlag:O}=S;d.length&&O&7&&(r&&d.some(isModelListener)&&(R=filterModelListeners(R,r)),S=cloneVNode(S,R,!1,!0))}return s.dirs&&(S=cloneVNode(S,null,!1,!0),S.dirs=S.dirs?S.dirs.concat(s.dirs):s.dirs),s.transition&&setTransitionHooks(S,s.transition),g=S,setCurrentRenderingInstance(u),g}const getFunctionalFallthrough=t=>{let e;for(const s in t)(s==="class"||s==="style"||isOn(s))&&((e||(e={}))[s]=t[s]);return e},filterModelListeners=(t,e)=>{const s={};for(const n in t)(!isModelListener(n)||!(n.slice(9)in e))&&(s[n]=t[n]);return s};function shouldUpdateComponent(t,e,s){const{props:n,children:i,component:r}=t,{props:h,children:T,patchFlag:E}=e,v=r.emitsOptions;if(e.dirs||e.transition)return!0;if(s&&E>=0){if(E&1024)return!0;if(E&16)return n?hasPropsChanged(n,h,v):!!h;if(E&8){const y=e.dynamicProps;for(let F=0;F<y.length;F++){const k=y[F];if(h[k]!==n[k]&&!isEmitListener(v,k))return!0}}}else return(i||T)&&(!T||!T.$stable)?!0:n===h?!1:n?h?hasPropsChanged(n,h,v):!0:!!h;return!1}function hasPropsChanged(t,e,s){const n=Object.keys(e);if(n.length!==Object.keys(t).length)return!0;for(let i=0;i<n.length;i++){const r=n[i];if(e[r]!==t[r]&&!isEmitListener(s,r))return!0}return!1}function updateHOCHostEl({vnode:t,parent:e},s){for(;e;){const n=e.subTree;if(n.suspense&&n.suspense.activeBranch===t&&(n.el=t.el),n===t)(t=e.vnode).el=s,e=e.parent;else break}}const isSuspense=t=>t.__isSuspense;function queueEffectWithSuspense(t,e){e&&e.pendingBranch?isArray(t)?e.effects.push(...t):e.effects.push(t):queuePostFlushCb(t)}const Fragment=Symbol.for("v-fgt"),Text=Symbol.for("v-txt"),Comment=Symbol.for("v-cmt"),Static=Symbol.for("v-stc"),blockStack=[];let currentBlock=null;function openBlock(t=!1){blockStack.push(currentBlock=t?null:[])}function closeBlock(){blockStack.pop(),currentBlock=blockStack[blockStack.length-1]||null}let isBlockTreeEnabled=1;function setBlockTracking(t,e=!1){isBlockTreeEnabled+=t,t<0&&currentBlock&&e&&(currentBlock.hasOnce=!0)}function setupBlock(t){return t.dynamicChildren=isBlockTreeEnabled>0?currentBlock||EMPTY_ARR:null,closeBlock(),isBlockTreeEnabled>0&&currentBlock&&currentBlock.push(t),t}function createElementBlock(t,e,s,n,i,r){return setupBlock(createBaseVNode(t,e,s,n,i,r,!0))}function createBlock(t,e,s,n,i){return setupBlock(createVNode(t,e,s,n,i,!0))}function isVNode(t){return t?t.__v_isVNode===!0:!1}function isSameVNodeType(t,e){return t.type===e.type&&t.key===e.key}const normalizeKey=({key:t})=>t??null,normalizeRef=({ref:t,ref_key:e,ref_for:s})=>(typeof t=="number"&&(t=""+t),t!=null?isString(t)||isRef(t)||isFunction(t)?{i:currentRenderingInstance,r:t,k:e,f:!!s}:t:null);function createBaseVNode(t,e=null,s=null,n=0,i=null,r=t===Fragment?0:1,h=!1,T=!1){const E={__v_isVNode:!0,__v_skip:!0,type:t,props:e,key:e&&normalizeKey(e),ref:e&&normalizeRef(e),scopeId:currentScopeId,slotScopeIds:null,children:s,component:null,suspense:null,ssContent:null,ssFallback:null,dirs:null,transition:null,el:null,anchor:null,target:null,targetStart:null,targetAnchor:null,staticCount:0,shapeFlag:r,patchFlag:n,dynamicProps:i,dynamicChildren:null,appContext:null,ctx:currentRenderingInstance};return T?(normalizeChildren(E,s),r&128&&t.normalize(E)):s&&(E.shapeFlag|=isString(s)?8:16),isBlockTreeEnabled>0&&!h&&currentBlock&&(E.patchFlag>0||r&6)&&E.patchFlag!==32&&currentBlock.push(E),E}const createVNode=_createVNode;function _createVNode(t,e=null,s=null,n=0,i=null,r=!1){if((!t||t===NULL_DYNAMIC_COMPONENT)&&(t=Comment),isVNode(t)){const T=cloneVNode(t,e,!0);return s&&normalizeChildren(T,s),isBlockTreeEnabled>0&&!r&&currentBlock&&(T.shapeFlag&6?currentBlock[currentBlock.indexOf(t)]=T:currentBlock.push(T)),T.patchFlag=-2,T}if(isClassComponent(t)&&(t=t.__vccOpts),e){e=guardReactiveProps(e);let{class:T,style:E}=e;T&&!isString(T)&&(e.class=normalizeClass(T)),isObject(E)&&(isProxy(E)&&!isArray(E)&&(E=extend({},E)),e.style=normalizeStyle(E))}const h=isString(t)?1:isSuspense(t)?128:isTeleport(t)?64:isObject(t)?4:isFunction(t)?2:0;return createBaseVNode(t,e,s,n,i,h,r,!0)}function guardReactiveProps(t){return t?isProxy(t)||isInternalObject(t)?extend({},t):t:null}function cloneVNode(t,e,s=!1,n=!1){const{props:i,ref:r,patchFlag:h,children:T,transition:E}=t,v=e?mergeProps(i||{},e):i,y={__v_isVNode:!0,__v_skip:!0,type:t.type,props:v,key:v&&normalizeKey(v),ref:e&&e.ref?s&&r?isArray(r)?r.concat(normalizeRef(e)):[r,normalizeRef(e)]:normalizeRef(e):r,scopeId:t.scopeId,slotScopeIds:t.slotScopeIds,children:T,target:t.target,targetStart:t.targetStart,targetAnchor:t.targetAnchor,staticCount:t.staticCount,shapeFlag:t.shapeFlag,patchFlag:e&&t.type!==Fragment?h===-1?16:h|16:h,dynamicProps:t.dynamicProps,dynamicChildren:t.dynamicChildren,appContext:t.appContext,dirs:t.dirs,transition:E,component:t.component,suspense:t.suspense,ssContent:t.ssContent&&cloneVNode(t.ssContent),ssFallback:t.ssFallback&&cloneVNode(t.ssFallback),el:t.el,anchor:t.anchor,ctx:t.ctx,ce:t.ce};return E&&n&&setTransitionHooks(y,E.clone(y)),y}function createTextVNode(t=" ",e=0){return createVNode(Text,null,t,e)}function createStaticVNode(t,e){const s=createVNode(Static,null,t);return s.staticCount=e,s}function createCommentVNode(t="",e=!1){return e?(openBlock(),createBlock(Comment,null,t)):createVNode(Comment,null,t)}function normalizeVNode(t){return t==null||typeof t=="boolean"?createVNode(Comment):isArray(t)?createVNode(Fragment,null,t.slice()):isVNode(t)?cloneIfMounted(t):createVNode(Text,null,String(t))}function cloneIfMounted(t){return t.el===null&&t.patchFlag!==-1||t.memo?t:cloneVNode(t)}function normalizeChildren(t,e){let s=0;const{shapeFlag:n}=t;if(e==null)e=null;else if(isArray(e))s=16;else if(typeof e=="object")if(n&65){const i=e.default;i&&(i._c&&(i._d=!1),normalizeChildren(t,i()),i._c&&(i._d=!0));return}else{s=32;const i=e._;!i&&!isInternalObject(e)?e._ctx=currentRenderingInstance:i===3&&currentRenderingInstance&&(currentRenderingInstance.slots._===1?e._=1:(e._=2,t.patchFlag|=1024))}else isFunction(e)?(e={default:e,_ctx:currentRenderingInstance},s=32):(e=String(e),n&64?(s=16,e=[createTextVNode(e)]):s=8);t.children=e,t.shapeFlag|=s}function mergeProps(...t){const e={};for(let s=0;s<t.length;s++){const n=t[s];for(const i in n)if(i==="class")e.class!==n.class&&(e.class=normalizeClass([e.class,n.class]));else if(i==="style")e.style=normalizeStyle([e.style,n.style]);else if(isOn(i)){const r=e[i],h=n[i];h&&r!==h&&!(isArray(r)&&r.includes(h))&&(e[i]=r?[].concat(r,h):h)}else i!==""&&(e[i]=n[i])}return e}function invokeVNodeHook(t,e,s,n=null){callWithAsyncErrorHandling(t,e,7,[s,n])}const emptyAppContext=createAppContext();let uid=0;function createComponentInstance(t,e,s){const n=t.type,i=(e?e.appContext:t.appContext)||emptyAppContext,r={uid:uid++,vnode:t,type:n,parent:e,appContext:i,root:null,next:null,subTree:null,effect:null,update:null,job:null,scope:new EffectScope(!0),render:null,proxy:null,exposed:null,exposeProxy:null,withProxy:null,provides:e?e.provides:Object.create(i.provides),ids:e?e.ids:["",0,0],accessCache:null,renderCache:[],components:null,directives:null,propsOptions:normalizePropsOptions(n,i),emitsOptions:normalizeEmitsOptions(n,i),emit:null,emitted:null,propsDefaults:EMPTY_OBJ,inheritAttrs:n.inheritAttrs,ctx:EMPTY_OBJ,data:EMPTY_OBJ,props:EMPTY_OBJ,attrs:EMPTY_OBJ,slots:EMPTY_OBJ,refs:EMPTY_OBJ,setupState:EMPTY_OBJ,setupContext:null,suspense:s,suspenseId:s?s.pendingId:0,asyncDep:null,asyncResolved:!1,isMounted:!1,isUnmounted:!1,isDeactivated:!1,bc:null,c:null,bm:null,m:null,bu:null,u:null,um:null,bum:null,da:null,a:null,rtg:null,rtc:null,ec:null,sp:null};return r.ctx={_:r},r.root=e?e.root:r,r.emit=emit.bind(null,r),t.ce&&t.ce(r),r}let currentInstance=null;const getCurrentInstance=()=>currentInstance||currentRenderingInstance;let internalSetCurrentInstance,setInSSRSetupState;{const t=getGlobalThis(),e=(s,n)=>{let i;return(i=t[s])||(i=t[s]=[]),i.push(n),r=>{i.length>1?i.forEach(h=>h(r)):i[0](r)}};internalSetCurrentInstance=e("__VUE_INSTANCE_SETTERS__",s=>currentInstance=s),setInSSRSetupState=e("__VUE_SSR_SETTERS__",s=>isInSSRComponentSetup=s)}const setCurrentInstance=t=>{const e=currentInstance;return internalSetCurrentInstance(t),t.scope.on(),()=>{t.scope.off(),internalSetCurrentInstance(e)}},unsetCurrentInstance=()=>{currentInstance&&currentInstance.scope.off(),internalSetCurrentInstance(null)};function isStatefulComponent(t){return t.vnode.shapeFlag&4}let isInSSRComponentSetup=!1;function setupComponent(t,e=!1,s=!1){e&&setInSSRSetupState(e);const{props:n,children:i}=t.vnode,r=isStatefulComponent(t);initProps(t,n,r,e),initSlots(t,i,s||e);const h=r?setupStatefulComponent(t,e):void 0;return e&&setInSSRSetupState(!1),h}function setupStatefulComponent(t,e){const s=t.type;t.accessCache=Object.create(null),t.proxy=new Proxy(t.ctx,PublicInstanceProxyHandlers);const{setup:n}=s;if(n){pauseTracking();const i=t.setupContext=n.length>1?createSetupContext(t):null,r=setCurrentInstance(t),h=callWithErrorHandling(n,t,0,[t.props,i]),T=isPromise(h);if(resetTracking(),r(),(T||t.sp)&&!isAsyncWrapper(t)&&markAsyncBoundary(t),T){if(h.then(unsetCurrentInstance,unsetCurrentInstance),e)return h.then(E=>{handleSetupResult(t,E,e)}).catch(E=>{handleError(E,t,0)});t.asyncDep=h}else handleSetupResult(t,h,e)}else finishComponentSetup(t,e)}function handleSetupResult(t,e,s){isFunction(e)?t.type.__ssrInlineRender?t.ssrRender=e:t.render=e:isObject(e)&&(t.setupState=proxyRefs(e)),finishComponentSetup(t,s)}let compile;function finishComponentSetup(t,e,s){const n=t.type;if(!t.render){if(!e&&compile&&!n.render){const i=n.template||resolveMergedOptions(t).template;if(i){const{isCustomElement:r,compilerOptions:h}=t.appContext.config,{delimiters:T,compilerOptions:E}=n,v=extend(extend({isCustomElement:r,delimiters:T},h),E);n.render=compile(i,v)}}t.render=n.render||NOOP}{const i=setCurrentInstance(t);pauseTracking();try{applyOptions(t)}finally{resetTracking(),i()}}}const attrsProxyHandlers={get(t,e){return track(t,"get",""),t[e]}};function createSetupContext(t){const e=s=>{t.exposed=s||{}};return{attrs:new Proxy(t.attrs,attrsProxyHandlers),slots:t.slots,emit:t.emit,expose:e}}function getComponentPublicInstance(t){return t.exposed?t.exposeProxy||(t.exposeProxy=new Proxy(proxyRefs(markRaw(t.exposed)),{get(e,s){if(s in e)return e[s];if(s in publicPropertiesMap)return publicPropertiesMap[s](t)},has(e,s){return s in e||s in publicPropertiesMap}})):t.proxy}const classifyRE=/(?:^|[-_])(\w)/g,classify=t=>t.replace(classifyRE,e=>e.toUpperCase()).replace(/[-_]/g,"");function getComponentName(t,e=!0){return isFunction(t)?t.displayName||t.name:t.name||e&&t.__name}function formatComponentName(t,e,s=!1){let n=getComponentName(e);if(!n&&e.__file){const i=e.__file.match(/([^/\\]+)\.\w+$/);i&&(n=i[1])}if(!n&&t&&t.parent){const i=r=>{for(const h in r)if(r[h]===e)return h};n=i(t.components||t.parent.type.components)||i(t.appContext.components)}return n?classify(n):s?"App":"Anonymous"}function isClassComponent(t){return isFunction(t)&&"__vccOpts"in t}const computed=(t,e)=>computed$1(t,e,isInSSRComponentSetup),version="3.5.17";/**
* @vue/runtime-dom v3.5.17
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/let policy;const tt=typeof window<"u"&&window.trustedTypes;if(tt)try{policy=tt.createPolicy("vue",{createHTML:t=>t})}catch{}const unsafeToTrustedHTML=policy?t=>policy.createHTML(t):t=>t,svgNS="http://www.w3.org/2000/svg",mathmlNS="http://www.w3.org/1998/Math/MathML",doc=typeof document<"u"?document:null,templateContainer=doc&&doc.createElement("template"),nodeOps={insert:(t,e,s)=>{e.insertBefore(t,s||null)},remove:t=>{const e=t.parentNode;e&&e.removeChild(t)},createElement:(t,e,s,n)=>{const i=e==="svg"?doc.createElementNS(svgNS,t):e==="mathml"?doc.createElementNS(mathmlNS,t):s?doc.createElement(t,{is:s}):doc.createElement(t);return t==="select"&&n&&n.multiple!=null&&i.setAttribute("multiple",n.multiple),i},createText:t=>doc.createTextNode(t),createComment:t=>doc.createComment(t),setText:(t,e)=>{t.nodeValue=e},setElementText:(t,e)=>{t.textContent=e},parentNode:t=>t.parentNode,nextSibling:t=>t.nextSibling,querySelector:t=>doc.querySelector(t),setScopeId(t,e){t.setAttribute(e,"")},insertStaticContent(t,e,s,n,i,r){const h=s?s.previousSibling:e.lastChild;if(i&&(i===r||i.nextSibling))for(;e.insertBefore(i.cloneNode(!0),s),!(i===r||!(i=i.nextSibling)););else{templateContainer.innerHTML=unsafeToTrustedHTML(n==="svg"?`<svg>${t}</svg>`:n==="mathml"?`<math>${t}</math>`:t);const T=templateContainer.content;if(n==="svg"||n==="mathml"){const E=T.firstChild;for(;E.firstChild;)T.appendChild(E.firstChild);T.removeChild(E)}e.insertBefore(T,s)}return[h?h.nextSibling:e.firstChild,s?s.previousSibling:e.lastChild]}},vtcKey=Symbol("_vtc");function patchClass(t,e,s){const n=t[vtcKey];n&&(e=(e?[e,...n]:[...n]).join(" ")),e==null?t.removeAttribute("class"):s?t.setAttribute("class",e):t.className=e}const vShowOriginalDisplay=Symbol("_vod"),vShowHidden=Symbol("_vsh"),CSS_VAR_TEXT=Symbol("");function useCssVars(t){const e=getCurrentInstance();if(!e)return;const s=e.ut=(i=t(e.proxy))=>{Array.from(document.querySelectorAll(`[data-v-owner="${e.uid}"]`)).forEach(r=>setVarsOnNode(r,i))},n=()=>{const i=t(e.proxy);e.ce?setVarsOnNode(e.ce,i):setVarsOnVNode(e.subTree,i),s(i)};onBeforeUpdate(()=>{queuePostFlushCb(n)}),onMounted(()=>{watch(n,NOOP,{flush:"post"});const i=new MutationObserver(n);i.observe(e.subTree.el.parentNode,{childList:!0}),onUnmounted(()=>i.disconnect())})}function setVarsOnVNode(t,e){if(t.shapeFlag&128){const s=t.suspense;t=s.activeBranch,s.pendingBranch&&!s.isHydrating&&s.effects.push(()=>{setVarsOnVNode(s.activeBranch,e)})}for(;t.component;)t=t.component.subTree;if(t.shapeFlag&1&&t.el)setVarsOnNode(t.el,e);else if(t.type===Fragment)t.children.forEach(s=>setVarsOnVNode(s,e));else if(t.type===Static){let{el:s,anchor:n}=t;for(;s&&(setVarsOnNode(s,e),s!==n);)s=s.nextSibling}}function setVarsOnNode(t,e){if(t.nodeType===1){const s=t.style;let n="";for(const i in e)s.setProperty(`--${i}`,e[i]),n+=`--${i}: ${e[i]};`;s[CSS_VAR_TEXT]=n}}const displayRE=/(^|;)\s*display\s*:/;function patchStyle(t,e,s){const n=t.style,i=isString(s);let r=!1;if(s&&!i){if(e)if(isString(e))for(const h of e.split(";")){const T=h.slice(0,h.indexOf(":")).trim();s[T]==null&&setStyle(n,T,"")}else for(const h in e)s[h]==null&&setStyle(n,h,"");for(const h in s)h==="display"&&(r=!0),setStyle(n,h,s[h])}else if(i){if(e!==s){const h=n[CSS_VAR_TEXT];h&&(s+=";"+h),n.cssText=s,r=displayRE.test(s)}}else e&&t.removeAttribute("style");vShowOriginalDisplay in t&&(t[vShowOriginalDisplay]=r?n.display:"",t[vShowHidden]&&(n.display="none"))}const importantRE=/\s*!important$/;function setStyle(t,e,s){if(isArray(s))s.forEach(n=>setStyle(t,e,n));else if(s==null&&(s=""),e.startsWith("--"))t.setProperty(e,s);else{const n=autoPrefix(t,e);importantRE.test(s)?t.setProperty(hyphenate(n),s.replace(importantRE,""),"important"):t[n]=s}}const prefixes=["Webkit","Moz","ms"],prefixCache={};function autoPrefix(t,e){const s=prefixCache[e];if(s)return s;let n=camelize(e);if(n!=="filter"&&n in t)return prefixCache[e]=n;n=capitalize(n);for(let i=0;i<prefixes.length;i++){const r=prefixes[i]+n;if(r in t)return prefixCache[e]=r}return e}const xlinkNS="http://www.w3.org/1999/xlink";function patchAttr(t,e,s,n,i,r=isSpecialBooleanAttr(e)){n&&e.startsWith("xlink:")?s==null?t.removeAttributeNS(xlinkNS,e.slice(6,e.length)):t.setAttributeNS(xlinkNS,e,s):s==null||r&&!includeBooleanAttr(s)?t.removeAttribute(e):t.setAttribute(e,r?"":isSymbol(s)?String(s):s)}function patchDOMProp(t,e,s,n,i){if(e==="innerHTML"||e==="textContent"){s!=null&&(t[e]=e==="innerHTML"?unsafeToTrustedHTML(s):s);return}const r=t.tagName;if(e==="value"&&r!=="PROGRESS"&&!r.includes("-")){const T=r==="OPTION"?t.getAttribute("value")||"":t.value,E=s==null?t.type==="checkbox"?"on":"":String(s);(T!==E||!("_value"in t))&&(t.value=E),s==null&&t.removeAttribute(e),t._value=s;return}let h=!1;if(s===""||s==null){const T=typeof t[e];T==="boolean"?s=includeBooleanAttr(s):s==null&&T==="string"?(s="",h=!0):T==="number"&&(s=0,h=!0)}try{t[e]=s}catch{}h&&t.removeAttribute(i||e)}function addEventListener(t,e,s,n){t.addEventListener(e,s,n)}function removeEventListener(t,e,s,n){t.removeEventListener(e,s,n)}const veiKey=Symbol("_vei");function patchEvent(t,e,s,n,i=null){const r=t[veiKey]||(t[veiKey]={}),h=r[e];if(n&&h)h.value=n;else{const[T,E]=parseName(e);if(n){const v=r[e]=createInvoker(n,i);addEventListener(t,T,v,E)}else h&&(removeEventListener(t,T,h,E),r[e]=void 0)}}const optionsModifierRE=/(?:Once|Passive|Capture)$/;function parseName(t){let e;if(optionsModifierRE.test(t)){e={};let n;for(;n=t.match(optionsModifierRE);)t=t.slice(0,t.length-n[0].length),e[n[0].toLowerCase()]=!0}return[t[2]===":"?t.slice(3):hyphenate(t.slice(2)),e]}let cachedNow=0;const p=Promise.resolve(),getNow=()=>cachedNow||(p.then(()=>cachedNow=0),cachedNow=Date.now());function createInvoker(t,e){const s=n=>{if(!n._vts)n._vts=Date.now();else if(n._vts<=s.attached)return;callWithAsyncErrorHandling(patchStopImmediatePropagation(n,s.value),e,5,[n])};return s.value=t,s.attached=getNow(),s}function patchStopImmediatePropagation(t,e){if(isArray(e)){const s=t.stopImmediatePropagation;return t.stopImmediatePropagation=()=>{s.call(t),t._stopped=!0},e.map(n=>i=>!i._stopped&&n&&n(i))}else return e}const isNativeOn=t=>t.charCodeAt(0)===111&&t.charCodeAt(1)===110&&t.charCodeAt(2)>96&&t.charCodeAt(2)<123,patchProp=(t,e,s,n,i,r)=>{const h=i==="svg";e==="class"?patchClass(t,n,h):e==="style"?patchStyle(t,s,n):isOn(e)?isModelListener(e)||patchEvent(t,e,s,n,r):(e[0]==="."?(e=e.slice(1),!0):e[0]==="^"?(e=e.slice(1),!1):shouldSetAsProp(t,e,n,h))?(patchDOMProp(t,e,n),!t.tagName.includes("-")&&(e==="value"||e==="checked"||e==="selected")&&patchAttr(t,e,n,h,r,e!=="value")):t._isVueCE&&(/[A-Z]/.test(e)||!isString(n))?patchDOMProp(t,camelize(e),n,r,e):(e==="true-value"?t._trueValue=n:e==="false-value"&&(t._falseValue=n),patchAttr(t,e,n,h))};function shouldSetAsProp(t,e,s,n){if(n)return!!(e==="innerHTML"||e==="textContent"||e in t&&isNativeOn(e)&&isFunction(s));if(e==="spellcheck"||e==="draggable"||e==="translate"||e==="autocorrect"||e==="form"||e==="list"&&t.tagName==="INPUT"||e==="type"&&t.tagName==="TEXTAREA")return!1;if(e==="width"||e==="height"){const i=t.tagName;if(i==="IMG"||i==="VIDEO"||i==="CANVAS"||i==="SOURCE")return!1}return isNativeOn(e)&&isString(s)?!1:e in t}const getModelAssigner=t=>{const e=t.props["onUpdate:modelValue"]||!1;return isArray(e)?s=>invokeArrayFns(e,s):e};function onCompositionStart(t){t.target.composing=!0}function onCompositionEnd(t){const e=t.target;e.composing&&(e.composing=!1,e.dispatchEvent(new Event("input")))}const assignKey=Symbol("_assign"),vModelText={created(t,{modifiers:{lazy:e,trim:s,number:n}},i){t[assignKey]=getModelAssigner(i);const r=n||i.props&&i.props.type==="number";addEventListener(t,e?"change":"input",h=>{if(h.target.composing)return;let T=t.value;s&&(T=T.trim()),r&&(T=looseToNumber(T)),t[assignKey](T)}),s&&addEventListener(t,"change",()=>{t.value=t.value.trim()}),e||(addEventListener(t,"compositionstart",onCompositionStart),addEventListener(t,"compositionend",onCompositionEnd),addEventListener(t,"change",onCompositionEnd))},mounted(t,{value:e}){t.value=e??""},beforeUpdate(t,{value:e,oldValue:s,modifiers:{lazy:n,trim:i,number:r}},h){if(t[assignKey]=getModelAssigner(h),t.composing)return;const T=(r||t.type==="number")&&!/^0\d/.test(t.value)?looseToNumber(t.value):t.value,E=e??"";T!==E&&(document.activeElement===t&&t.type!=="range"&&(n&&e===s||i&&t.value.trim()===E)||(t.value=E))}},systemModifiers=["ctrl","shift","alt","meta"],modifierGuards={stop:t=>t.stopPropagation(),prevent:t=>t.preventDefault(),self:t=>t.target!==t.currentTarget,ctrl:t=>!t.ctrlKey,shift:t=>!t.shiftKey,alt:t=>!t.altKey,meta:t=>!t.metaKey,left:t=>"button"in t&&t.button!==0,middle:t=>"button"in t&&t.button!==1,right:t=>"button"in t&&t.button!==2,exact:(t,e)=>systemModifiers.some(s=>t[`${s}Key`]&&!e.includes(s))},withModifiers=(t,e)=>{const s=t._withMods||(t._withMods={}),n=e.join(".");return s[n]||(s[n]=(i,...r)=>{for(let h=0;h<e.length;h++){const T=modifierGuards[e[h]];if(T&&T(i,e))return}return t(i,...r)})},keyNames={esc:"escape",space:" ",up:"arrow-up",left:"arrow-left",right:"arrow-right",down:"arrow-down",delete:"backspace"},withKeys=(t,e)=>{const s=t._withKeys||(t._withKeys={}),n=e.join(".");return s[n]||(s[n]=i=>{if(!("key"in i))return;const r=hyphenate(i.key);if(e.some(h=>h===r||keyNames[h]===r))return t(i)})},rendererOptions=extend({patchProp},nodeOps);let renderer;function ensureRenderer(){return renderer||(renderer=createRenderer(rendererOptions))}const createApp=(...t)=>{const e=ensureRenderer().createApp(...t),{mount:s}=e;return e.mount=n=>{const i=normalizeContainer(n);if(!i)return;const r=e._component;!isFunction(r)&&!r.render&&!r.template&&(r.template=i.innerHTML),i.nodeType===1&&(i.textContent="");const h=s(i,!1,resolveRootNamespace(i));return i instanceof Element&&(i.removeAttribute("v-cloak"),i.setAttribute("data-v-app","")),h},e};function resolveRootNamespace(t){if(t instanceof SVGElement)return"svg";if(typeof MathMLElement=="function"&&t instanceof MathMLElement)return"mathml"}function normalizeContainer(t){return isString(t)?document.querySelector(t):t}function getAugmentedNamespace(t){if(t.__esModule)return t;var e=t.default;if(typeof e=="function"){var s=function n(){return this instanceof n?Reflect.construct(e,arguments,this.constructor):e.apply(this,arguments)};s.prototype=e.prototype}else s={};return Object.defineProperty(s,"__esModule",{value:!0}),Object.keys(t).forEach(function(n){var i=Object.getOwnPropertyDescriptor(t,n);Object.defineProperty(s,n,i.get?i:{enumerable:!0,get:function(){return t[n]}})}),s}function commonjsRequire(t){throw new Error('Could not dynamically require "'+t+'". Please configure the dynamicRequireTargets or/and ignoreDynamicRequires option of @rollup/plugin-commonjs appropriately for this require call to work.')}var pdf={exports:{}};const __viteBrowserExternal={},__viteBrowserExternal$1=Object.freeze(Object.defineProperty({__proto__:null,default:__viteBrowserExternal},Symbol.toStringTag,{value:"Module"})),require$$5=getAugmentedNamespace(__viteBrowserExternal$1);(function(module,exports){(function(e,s){module.exports=s()})(globalThis,()=>(()=>{var __webpack_modules__=[,(t,e,s)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.VerbosityLevel=e.Util=e.UnknownErrorException=e.UnexpectedResponseException=e.UNSUPPORTED_FEATURES=e.TextRenderingMode=e.StreamType=e.RenderingIntentFlag=e.PermissionFlag=e.PasswordResponses=e.PasswordException=e.PageActionEventType=e.OPS=e.MissingPDFException=e.LINE_FACTOR=e.LINE_DESCENT_FACTOR=e.InvalidPDFException=e.ImageKind=e.IDENTITY_MATRIX=e.FormatError=e.FontType=e.FeatureTest=e.FONT_IDENTITY_MATRIX=e.DocumentActionEventType=e.CMapCompressionType=e.BaseException=e.AnnotationType=e.AnnotationStateModelType=e.AnnotationReviewState=e.AnnotationReplyType=e.AnnotationMode=e.AnnotationMarkedState=e.AnnotationFlag=e.AnnotationFieldFlag=e.AnnotationEditorType=e.AnnotationEditorPrefix=e.AnnotationEditorParamsType=e.AnnotationBorderStyleType=e.AnnotationActionEventType=e.AbortException=void 0,e.arrayByteLength=H,e.arraysToBytes=it,e.assert=x,e.bytesToString=C,e.createPromiseCapability=_t,e.createValidAbsoluteUrl=L,e.escapeString=Et,e.getModificationDate=ut,e.getVerbosityLevel=dt,e.info=ft,e.isArrayBuffer=It,e.isArrayEqual=Yt,e.isAscii=Rt,e.objectFromMap=K,e.objectSize=rt,e.setVerbosityLevel=st,e.shadow=q,e.string32=W,e.stringToBytes=N,e.stringToPDFString=xt,e.stringToUTF16BEString=Pt,e.stringToUTF8String=Nt,e.unreachable=U,e.utf8StringToString=Tt,e.warn=pt,s(2);const n=[1,0,0,1,0,0];e.IDENTITY_MATRIX=n;const i=[.001,0,0,.001,0,0];e.FONT_IDENTITY_MATRIX=i;const r=1.35;e.LINE_FACTOR=r;const h=.35;e.LINE_DESCENT_FACTOR=h;const T={ANY:1,DISPLAY:2,PRINT:4,ANNOTATIONS_FORMS:16,ANNOTATIONS_STORAGE:32,ANNOTATIONS_DISABLE:64,OPLIST:256};e.RenderingIntentFlag=T;const E={DISABLE:0,ENABLE:1,ENABLE_FORMS:2,ENABLE_STORAGE:3};e.AnnotationMode=E;const v="pdfjs_internal_editor_";e.AnnotationEditorPrefix=v;const y={DISABLE:-1,NONE:0,FREETEXT:3,INK:15};e.AnnotationEditorType=y;const F={FREETEXT_SIZE:1,FREETEXT_COLOR:2,FREETEXT_OPACITY:3,INK_COLOR:11,INK_THICKNESS:12,INK_OPACITY:13};e.AnnotationEditorParamsType=F;const k={PRINT:4,MODIFY_CONTENTS:8,COPY:16,MODIFY_ANNOTATIONS:32,FILL_INTERACTIVE_FORMS:256,COPY_FOR_ACCESSIBILITY:512,ASSEMBLE:1024,PRINT_HIGH_QUALITY:2048};e.PermissionFlag=k;const w={FILL:0,STROKE:1,FILL_STROKE:2,INVISIBLE:3,FILL_ADD_TO_PATH:4,STROKE_ADD_TO_PATH:5,FILL_STROKE_ADD_TO_PATH:6,ADD_TO_PATH:7,FILL_STROKE_MASK:3,ADD_TO_PATH_FLAG:4};e.TextRenderingMode=w;const f={GRAYSCALE_1BPP:1,RGB_24BPP:2,RGBA_32BPP:3};e.ImageKind=f;const a={TEXT:1,LINK:2,FREETEXT:3,LINE:4,SQUARE:5,CIRCLE:6,POLYGON:7,POLYLINE:8,HIGHLIGHT:9,UNDERLINE:10,SQUIGGLY:11,STRIKEOUT:12,STAMP:13,CARET:14,INK:15,POPUP:16,FILEATTACHMENT:17,SOUND:18,MOVIE:19,WIDGET:20,SCREEN:21,PRINTERMARK:22,TRAPNET:23,WATERMARK:24,THREED:25,REDACT:26};e.AnnotationType=a;const u={MARKED:"Marked",REVIEW:"Review"};e.AnnotationStateModelType=u;const g={MARKED:"Marked",UNMARKED:"Unmarked"};e.AnnotationMarkedState=g;const R={ACCEPTED:"Accepted",REJECTED:"Rejected",CANCELLED:"Cancelled",COMPLETED:"Completed",NONE:"None"};e.AnnotationReviewState=R;const S={GROUP:"Group",REPLY:"R"};e.AnnotationReplyType=S;const d={INVISIBLE:1,HIDDEN:2,PRINT:4,NOZOOM:8,NOROTATE:16,NOVIEW:32,READONLY:64,LOCKED:128,TOGGLENOVIEW:256,LOCKEDCONTENTS:512};e.AnnotationFlag=d;const O={READONLY:1,REQUIRED:2,NOEXPORT:4,MULTILINE:4096,PASSWORD:8192,NOTOGGLETOOFF:16384,RADIO:32768,PUSHBUTTON:65536,COMBO:131072,EDIT:262144,SORT:524288,FILESELECT:1048576,MULTISELECT:2097152,DONOTSPELLCHECK:4194304,DONOTSCROLL:8388608,COMB:16777216,RICHTEXT:33554432,RADIOSINUNISON:33554432,COMMITONSELCHANGE:67108864};e.AnnotationFieldFlag=O;const M={SOLID:1,DASHED:2,BEVELED:3,INSET:4,UNDERLINE:5};e.AnnotationBorderStyleType=M;const V={E:"Mouse Enter",X:"Mouse Exit",D:"Mouse Down",U:"Mouse Up",Fo:"Focus",Bl:"Blur",PO:"PageOpen",PC:"PageClose",PV:"PageVisible",PI:"PageInvisible",K:"Keystroke",F:"Format",V:"Validate",C:"Calculate"};e.AnnotationActionEventType=V;const _={WC:"WillClose",WS:"WillSave",DS:"DidSave",WP:"WillPrint",DP:"DidPrint"};e.DocumentActionEventType=_;const b={O:"PageOpen",C:"PageClose"};e.PageActionEventType=b;const m={UNKNOWN:"UNKNOWN",FLATE:"FLATE",LZW:"LZW",DCT:"DCT",JPX:"JPX",JBIG:"JBIG",A85:"A85",AHX:"AHX",CCF:"CCF",RLX:"RLX"};e.StreamType=m;const I={UNKNOWN:"UNKNOWN",TYPE1:"TYPE1",TYPE1STANDARD:"TYPE1STANDARD",TYPE1C:"TYPE1C",CIDFONTTYPE0:"CIDFONTTYPE0",CIDFONTTYPE0C:"CIDFONTTYPE0C",TRUETYPE:"TRUETYPE",CIDFONTTYPE2:"CIDFONTTYPE2",TYPE3:"TYPE3",OPENTYPE:"OPENTYPE",TYPE0:"TYPE0",MMTYPE1:"MMTYPE1"};e.FontType=I;const j={ERRORS:0,WARNINGS:1,INFOS:5};e.VerbosityLevel=j;const Y={NONE:0,BINARY:1,STREAM:2};e.CMapCompressionType=Y;const X={dependency:1,setLineWidth:2,setLineCap:3,setLineJoin:4,setMiterLimit:5,setDash:6,setRenderingIntent:7,setFlatness:8,setGState:9,save:10,restore:11,transform:12,moveTo:13,lineTo:14,curveTo:15,curveTo2:16,curveTo3:17,closePath:18,rectangle:19,stroke:20,closeStroke:21,fill:22,eoFill:23,fillStroke:24,eoFillStroke:25,closeFillStroke:26,closeEOFillStroke:27,endPath:28,clip:29,eoClip:30,beginText:31,endText:32,setCharSpacing:33,setWordSpacing:34,setHScale:35,setLeading:36,setFont:37,setTextRenderingMode:38,setTextRise:39,moveText:40,setLeadingMoveText:41,setTextMatrix:42,nextLine:43,showText:44,showSpacedText:45,nextLineShowText:46,nextLineSetSpacingShowText:47,setCharWidth:48,setCharWidthAndBounds:49,setStrokeColorSpace:50,setFillColorSpace:51,setStrokeColor:52,setStrokeColorN:53,setFillColor:54,setFillColorN:55,setStrokeGray:56,setFillGray:57,setStrokeRGBColor:58,setFillRGBColor:59,setStrokeCMYKColor:60,setFillCMYKColor:61,shadingFill:62,beginInlineImage:63,beginImageData:64,endInlineImage:65,paintXObject:66,markPoint:67,markPointProps:68,beginMarkedContent:69,beginMarkedContentProps:70,endMarkedContent:71,beginCompat:72,endCompat:73,paintFormXObjectBegin:74,paintFormXObjectEnd:75,beginGroup:76,endGroup:77,beginAnnotations:78,endAnnotations:79,beginAnnotation:80,endAnnotation:81,paintJpegXObject:82,paintImageMaskXObject:83,paintImageMaskXObjectGroup:84,paintImageXObject:85,paintInlineImageXObject:86,paintInlineImageXObjectGroup:87,paintImageXObjectRepeat:88,paintImageMaskXObjectRepeat:89,paintSolidColorImageMask:90,constructPath:91};e.OPS=X;const lt={unknown:"unknown",forms:"forms",javaScript:"javaScript",signatures:"signatures",smask:"smask",shadingPattern:"shadingPattern",font:"font",errorTilingPattern:"errorTilingPattern",errorExtGState:"errorExtGState",errorXObject:"errorXObject",errorFontLoadType3:"errorFontLoadType3",errorFontState:"errorFontState",errorFontMissing:"errorFontMissing",errorFontTranslate:"errorFontTranslate",errorColorSpace:"errorColorSpace",errorOperatorList:"errorOperatorList",errorFontToUnicode:"errorFontToUnicode",errorFontLoadNative:"errorFontLoadNative",errorFontBuildPath:"errorFontBuildPath",errorFontGetPath:"errorFontGetPath",errorMarkedContent:"errorMarkedContent",errorContentSubStream:"errorContentSubStream"};e.UNSUPPORTED_FEATURES=lt;const Q={NEED_PASSWORD:1,INCORRECT_PASSWORD:2};e.PasswordResponses=Q;let z=j.WARNINGS;function st(ot){Number.isInteger(ot)&&(z=ot)}function dt(){return z}function ft(ot){z>=j.INFOS&&console.log(`Info: ${ot}`)}function pt(ot){z>=j.WARNINGS&&console.log(`Warning: ${ot}`)}function U(ot){throw new Error(ot)}function x(ot,J){ot||U(J)}function A(ot){if(!ot)return!1;switch(ot.protocol){case"http:":case"https:":case"ftp:":case"mailto:":case"tel:":return!0;default:return!1}}function L(ot,J=null,et=null){if(!ot)return null;try{if(et&&typeof ot=="string"){if(et.addDefaultProtocol&&ot.startsWith("www.")){const St=ot.match(/\./g);St&&St.length>=2&&(ot=`http://${ot}`)}if(et.tryConvertEncoding)try{ot=Nt(ot)}catch{}}const yt=J?new URL(ot,J):new URL(ot);if(A(yt))return yt}catch{}return null}function q(ot,J,et){return Object.defineProperty(ot,J,{value:et,enumerable:!0,configurable:!0,writable:!1}),et}const $=function(){function J(et,yt){this.constructor===J&&U("Cannot initialize BaseException."),this.message=et,this.name=yt}return J.prototype=new Error,J.constructor=J,J}();e.BaseException=$;class G extends ${constructor(J,et){super(J,"PasswordException"),this.code=et}}e.PasswordException=G;class nt extends ${constructor(J,et){super(J,"UnknownErrorException"),this.details=et}}e.UnknownErrorException=nt;class at extends ${constructor(J){super(J,"InvalidPDFException")}}e.InvalidPDFException=at;class c extends ${constructor(J){super(J,"MissingPDFException")}}e.MissingPDFException=c;class P extends ${constructor(J,et){super(J,"UnexpectedResponseException"),this.status=et}}e.UnexpectedResponseException=P;class o extends ${constructor(J){super(J,"FormatError")}}e.FormatError=o;class l extends ${constructor(J){super(J,"AbortException")}}e.AbortException=l;function C(ot){(typeof ot!="object"||ot===null||ot.length===void 0)&&U("Invalid argument for bytesToString");const J=ot.length,et=8192;if(J<et)return String.fromCharCode.apply(null,ot);const yt=[];for(let St=0;St<J;St+=et){const Ct=Math.min(St+et,J),wt=ot.subarray(St,Ct);yt.push(String.fromCharCode.apply(null,wt))}return yt.join("")}function N(ot){typeof ot!="string"&&U("Invalid argument for stringToBytes");const J=ot.length,et=new Uint8Array(J);for(let yt=0;yt<J;++yt)et[yt]=ot.charCodeAt(yt)&255;return et}function H(ot){if(ot.length!==void 0)return ot.length;if(ot.byteLength!==void 0)return ot.byteLength;U("Invalid argument for arrayByteLength")}function it(ot){const J=ot.length;if(J===1&&ot[0]instanceof Uint8Array)return ot[0];let et=0;for(let Ct=0;Ct<J;Ct++)et+=H(ot[Ct]);let yt=0;const St=new Uint8Array(et);for(let Ct=0;Ct<J;Ct++){let wt=ot[Ct];wt instanceof Uint8Array||(typeof wt=="string"?wt=N(wt):wt=new Uint8Array(wt));const Ft=wt.byteLength;St.set(wt,yt),yt+=Ft}return St}function W(ot){return String.fromCharCode(ot>>24&255,ot>>16&255,ot>>8&255,ot&255)}function rt(ot){return Object.keys(ot).length}function K(ot){const J=Object.create(null);for(const[et,yt]of ot)J[et]=yt;return J}function Z(){const ot=new Uint8Array(4);return ot[0]=1,new Uint32Array(ot.buffer,0,1)[0]===1}function ht(){try{return new Function(""),!0}catch{return!1}}class D{static get isLittleEndian(){return q(this,"isLittleEndian",Z())}static get isEvalSupported(){return q(this,"isEvalSupported",ht())}static get isOffscreenCanvasSupported(){return q(this,"isOffscreenCanvasSupported",typeof OffscreenCanvas<"u")}}e.FeatureTest=D;const ct=[...Array(256).keys()].map(ot=>ot.toString(16).padStart(2,"0"));class vt{static makeHexColor(J,et,yt){return`#${ct[J]}${ct[et]}${ct[yt]}`}static scaleMinMax(J,et){let yt;J[0]?(J[0]<0&&(yt=et[0],et[0]=et[1],et[1]=yt),et[0]*=J[0],et[1]*=J[0],J[3]<0&&(yt=et[2],et[2]=et[3],et[3]=yt),et[2]*=J[3],et[3]*=J[3]):(yt=et[0],et[0]=et[2],et[2]=yt,yt=et[1],et[1]=et[3],et[3]=yt,J[1]<0&&(yt=et[2],et[2]=et[3],et[3]=yt),et[2]*=J[1],et[3]*=J[1],J[2]<0&&(yt=et[0],et[0]=et[1],et[1]=yt),et[0]*=J[2],et[1]*=J[2]),et[0]+=J[4],et[1]+=J[4],et[2]+=J[5],et[3]+=J[5]}static transform(J,et){return[J[0]*et[0]+J[2]*et[1],J[1]*et[0]+J[3]*et[1],J[0]*et[2]+J[2]*et[3],J[1]*et[2]+J[3]*et[3],J[0]*et[4]+J[2]*et[5]+J[4],J[1]*et[4]+J[3]*et[5]+J[5]]}static applyTransform(J,et){const yt=J[0]*et[0]+J[1]*et[2]+et[4],St=J[0]*et[1]+J[1]*et[3]+et[5];return[yt,St]}static applyInverseTransform(J,et){const yt=et[0]*et[3]-et[1]*et[2],St=(J[0]*et[3]-J[1]*et[2]+et[2]*et[5]-et[4]*et[3])/yt,Ct=(-J[0]*et[1]+J[1]*et[0]+et[4]*et[1]-et[5]*et[0])/yt;return[St,Ct]}static getAxialAlignedBoundingBox(J,et){const yt=vt.applyTransform(J,et),St=vt.applyTransform(J.slice(2,4),et),Ct=vt.applyTransform([J[0],J[3]],et),wt=vt.applyTransform([J[2],J[1]],et);return[Math.min(yt[0],St[0],Ct[0],wt[0]),Math.min(yt[1],St[1],Ct[1],wt[1]),Math.max(yt[0],St[0],Ct[0],wt[0]),Math.max(yt[1],St[1],Ct[1],wt[1])]}static inverseTransform(J){const et=J[0]*J[3]-J[1]*J[2];return[J[3]/et,-J[1]/et,-J[2]/et,J[0]/et,(J[2]*J[5]-J[4]*J[3])/et,(J[4]*J[1]-J[5]*J[0])/et]}static apply3dTransform(J,et){return[J[0]*et[0]+J[1]*et[1]+J[2]*et[2],J[3]*et[0]+J[4]*et[1]+J[5]*et[2],J[6]*et[0]+J[7]*et[1]+J[8]*et[2]]}static singularValueDecompose2dScale(J){const et=[J[0],J[2],J[1],J[3]],yt=J[0]*et[0]+J[1]*et[2],St=J[0]*et[1]+J[1]*et[3],Ct=J[2]*et[0]+J[3]*et[2],wt=J[2]*et[1]+J[3]*et[3],Ft=(yt+wt)/2,Lt=Math.sqrt((yt+wt)**2-4*(yt*wt-Ct*St))/2,Ot=Ft+Lt||1,kt=Ft-Lt||1;return[Math.sqrt(Ot),Math.sqrt(kt)]}static normalizeRect(J){const et=J.slice(0);return J[0]>J[2]&&(et[0]=J[2],et[2]=J[0]),J[1]>J[3]&&(et[1]=J[3],et[3]=J[1]),et}static intersect(J,et){const yt=Math.max(Math.min(J[0],J[2]),Math.min(et[0],et[2])),St=Math.min(Math.max(J[0],J[2]),Math.max(et[0],et[2]));if(yt>St)return null;const Ct=Math.max(Math.min(J[1],J[3]),Math.min(et[1],et[3])),wt=Math.min(Math.max(J[1],J[3]),Math.max(et[1],et[3]));return Ct>wt?null:[yt,Ct,St,wt]}static bezierBoundingBox(J,et,yt,St,Ct,wt,Ft,Lt){const Ot=[],kt=[[],[]];let Vt,Bt,$t,Mt,jt,Ht,Kt,Xt;for(let Jt=0;Jt<2;++Jt){if(Jt===0?(Bt=6*J-12*yt+6*Ct,Vt=-3*J+9*yt-9*Ct+3*Ft,$t=3*yt-3*J):(Bt=6*et-12*St+6*wt,Vt=-3*et+9*St-9*wt+3*Lt,$t=3*St-3*et),Math.abs(Vt)<1e-12){if(Math.abs(Bt)<1e-12)continue;Mt=-$t/Bt,0<Mt&&Mt<1&&Ot.push(Mt);continue}Kt=Bt*Bt-4*$t*Vt,Xt=Math.sqrt(Kt),!(Kt<0)&&(jt=(-Bt+Xt)/(2*Vt),0<jt&&jt<1&&Ot.push(jt),Ht=(-Bt-Xt)/(2*Vt),0<Ht&&Ht<1&&Ot.push(Ht))}let Gt=Ot.length,Ut;const Wt=Gt;for(;Gt--;)Mt=Ot[Gt],Ut=1-Mt,kt[0][Gt]=Ut*Ut*Ut*J+3*Ut*Ut*Mt*yt+3*Ut*Mt*Mt*Ct+Mt*Mt*Mt*Ft,kt[1][Gt]=Ut*Ut*Ut*et+3*Ut*Ut*Mt*St+3*Ut*Mt*Mt*wt+Mt*Mt*Mt*Lt;return kt[0][Wt]=J,kt[1][Wt]=et,kt[0][Wt+1]=Ft,kt[1][Wt+1]=Lt,kt[0].length=kt[1].length=Wt+2,[Math.min(...kt[0]),Math.min(...kt[1]),Math.max(...kt[0]),Math.max(...kt[1])]}}e.Util=vt;const bt=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,728,711,710,729,733,731,730,732,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,8226,8224,8225,8230,8212,8211,402,8260,8249,8250,8722,8240,8222,8220,8221,8216,8217,8218,8482,64257,64258,321,338,352,376,381,305,322,339,353,382,0,8364];function xt(ot){if(ot[0]>="ï"){let et;if(ot[0]==="þ"&&ot[1]==="ÿ"?et="utf-16be":ot[0]==="ÿ"&&ot[1]==="þ"?et="utf-16le":ot[0]==="ï"&&ot[1]==="»"&&ot[2]==="¿"&&(et="utf-8"),et)try{const yt=new TextDecoder(et,{fatal:!0}),St=N(ot);return yt.decode(St)}catch(yt){pt(`stringToPDFString: "${yt}".`)}}const J=[];for(let et=0,yt=ot.length;et<yt;et++){const St=bt[ot.charCodeAt(et)];J.push(St?String.fromCharCode(St):ot.charAt(et))}return J.join("")}function Et(ot){return ot.replace(/([()\\\n\r])/g,J=>J===`
`?"\\n":J==="\r"?"\\r":`\\${J}`)}function Rt(ot){return/^[\x00-\x7F]*$/.test(ot)}function Pt(ot){const J=["þÿ"];for(let et=0,yt=ot.length;et<yt;et++){const St=ot.charCodeAt(et);J.push(String.fromCharCode(St>>8&255),String.fromCharCode(St&255))}return J.join("")}function Nt(ot){return decodeURIComponent(escape(ot))}function Tt(ot){return unescape(encodeURIComponent(ot))}function It(ot){return typeof ot=="object"&&ot!==null&&ot.byteLength!==void 0}function Yt(ot,J){if(ot.length!==J.length)return!1;for(let et=0,yt=ot.length;et<yt;et++)if(ot[et]!==J[et])return!1;return!0}function ut(ot=new Date){return[ot.getUTCFullYear().toString(),(ot.getUTCMonth()+1).toString().padStart(2,"0"),ot.getUTCDate().toString().padStart(2,"0"),ot.getUTCHours().toString().padStart(2,"0"),ot.getUTCMinutes().toString().padStart(2,"0"),ot.getUTCSeconds().toString().padStart(2,"0")].join("")}function _t(){const ot=Object.create(null);let J=!1;return Object.defineProperty(ot,"settled",{get(){return J}}),ot.promise=new Promise(function(et,yt){ot.resolve=function(St){J=!0,et(St)},ot.reject=function(St){J=!0,yt(St)}}),ot}},(t,e,s)=>{s(3)},(t,e)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.isNodeJS=void 0;const s=typeof process=="object"&&process+""=="[object process]"&&!process.versions.nw&&!(process.versions.electron&&process.type&&process.type!=="browser");e.isNodeJS=s},(__unused_webpack_module,exports,__w_pdfjs_require__)=>{var t,s,n,i,r,h,T,E,v,ce,F,k;Object.defineProperty(exports,"__esModule",{value:!0}),exports.build=exports.RenderTask=exports.PDFWorkerUtil=exports.PDFWorker=exports.PDFPageProxy=exports.PDFDocumentProxy=exports.PDFDocumentLoadingTask=exports.PDFDataRangeTransport=exports.LoopbackPort=exports.DefaultStandardFontDataFactory=exports.DefaultCanvasFactory=exports.DefaultCMapReaderFactory=void 0,exports.getDocument=getDocument,exports.setPDFNetworkStreamFactory=setPDFNetworkStreamFactory,exports.version=void 0;var _util=__w_pdfjs_require__(1),_annotation_storage=__w_pdfjs_require__(5),_display_utils=__w_pdfjs_require__(8),_font_loader=__w_pdfjs_require__(11),_canvas=__w_pdfjs_require__(12),_worker_options=__w_pdfjs_require__(15),_is_node=__w_pdfjs_require__(3),_message_handler=__w_pdfjs_require__(16),_metadata=__w_pdfjs_require__(17),_optional_content_config=__w_pdfjs_require__(18),_transport_stream=__w_pdfjs_require__(19),_xfa_text=__w_pdfjs_require__(20);const DEFAULT_RANGE_CHUNK_SIZE=65536,RENDERING_CANCELLED_TIMEOUT=100;let DefaultCanvasFactory=_display_utils.DOMCanvasFactory;exports.DefaultCanvasFactory=DefaultCanvasFactory;let DefaultCMapReaderFactory=_display_utils.DOMCMapReaderFactory;exports.DefaultCMapReaderFactory=DefaultCMapReaderFactory;let DefaultStandardFontDataFactory=_display_utils.DOMStandardFontDataFactory;if(exports.DefaultStandardFontDataFactory=DefaultStandardFontDataFactory,_is_node.isNodeJS){const{NodeCanvasFactory:f,NodeCMapReaderFactory:a,NodeStandardFontDataFactory:u}=__w_pdfjs_require__(21);exports.DefaultCanvasFactory=DefaultCanvasFactory=f,exports.DefaultCMapReaderFactory=DefaultCMapReaderFactory=a,exports.DefaultStandardFontDataFactory=DefaultStandardFontDataFactory=u}let createPDFNetworkStream;function setPDFNetworkStreamFactory(f){createPDFNetworkStream=f}function getDocument(f){const a=new PDFDocumentLoadingTask;let u;if(typeof f=="string"||f instanceof URL)u={url:f};else if((0,_util.isArrayBuffer)(f))u={data:f};else if(f instanceof PDFDataRangeTransport)u={range:f};else{if(typeof f!="object")throw new Error("Invalid parameter in getDocument, need either string, URL, TypedArray, or parameter object.");if(!f.url&&!f.data&&!f.range)throw new Error("Invalid parameter object: need either .data, .range or .url");u=f}const g=Object.create(null);let R=null,S=null;for(const O in u){const M=u[O];switch(O){case"url":if(typeof window<"u")try{g[O]=new URL(M,window.location).href;continue}catch(V){(0,_util.warn)(`Cannot create valid URL: "${V}".`)}else if(typeof M=="string"||M instanceof URL){g[O]=M.toString();continue}throw new Error("Invalid PDF url data: either string or URL-object is expected in the url property.");case"range":R=M;continue;case"worker":S=M;continue;case"data":if(_is_node.isNodeJS&&typeof Buffer<"u"&&M instanceof Buffer)g[O]=new Uint8Array(M);else{if(M instanceof Uint8Array)break;if(typeof M=="string")g[O]=(0,_util.stringToBytes)(M);else if(typeof M=="object"&&M!==null&&!isNaN(M.length))g[O]=new Uint8Array(M);else if((0,_util.isArrayBuffer)(M))g[O]=new Uint8Array(M);else throw new Error("Invalid PDF binary data: either TypedArray, string, or array-like object is expected in the data property.")}continue}g[O]=M}if(g.CMapReaderFactory=g.CMapReaderFactory||DefaultCMapReaderFactory,g.StandardFontDataFactory=g.StandardFontDataFactory||DefaultStandardFontDataFactory,g.ignoreErrors=g.stopAtErrors!==!0,g.fontExtraProperties=g.fontExtraProperties===!0,g.pdfBug=g.pdfBug===!0,g.enableXfa=g.enableXfa===!0,(!Number.isInteger(g.rangeChunkSize)||g.rangeChunkSize<1)&&(g.rangeChunkSize=DEFAULT_RANGE_CHUNK_SIZE),(typeof g.docBaseUrl!="string"||(0,_display_utils.isDataScheme)(g.docBaseUrl))&&(g.docBaseUrl=null),(!Number.isInteger(g.maxImageSize)||g.maxImageSize<-1)&&(g.maxImageSize=-1),typeof g.cMapUrl!="string"&&(g.cMapUrl=null),typeof g.standardFontDataUrl!="string"&&(g.standardFontDataUrl=null),typeof g.useWorkerFetch!="boolean"&&(g.useWorkerFetch=g.CMapReaderFactory===_display_utils.DOMCMapReaderFactory&&g.StandardFontDataFactory===_display_utils.DOMStandardFontDataFactory),typeof g.isEvalSupported!="boolean"&&(g.isEvalSupported=!0),typeof g.disableFontFace!="boolean"&&(g.disableFontFace=_is_node.isNodeJS),typeof g.useSystemFonts!="boolean"&&(g.useSystemFonts=!_is_node.isNodeJS&&!g.disableFontFace),(typeof g.ownerDocument!="object"||g.ownerDocument===null)&&(g.ownerDocument=globalThis.document),typeof g.disableRange!="boolean"&&(g.disableRange=!1),typeof g.disableStream!="boolean"&&(g.disableStream=!1),typeof g.disableAutoFetch!="boolean"&&(g.disableAutoFetch=!1),(0,_util.setVerbosityLevel)(g.verbosity),!S){const O={verbosity:g.verbosity,port:_worker_options.GlobalWorkerOptions.workerPort};S=O.port?PDFWorker.fromPort(O):new PDFWorker(O),a._worker=S}const d=a.docId;return S.promise.then(function(){if(a.destroyed)throw new Error("Loading aborted");const O=_fetchDocument(S,g,R,d),M=new Promise(function(V){let _;R?_=new _transport_stream.PDFDataTransportStream({length:g.length,initialData:g.initialData,progressiveDone:g.progressiveDone,contentDispositionFilename:g.contentDispositionFilename,disableRange:g.disableRange,disableStream:g.disableStream},R):g.data||(_=createPDFNetworkStream({url:g.url,length:g.length,httpHeaders:g.httpHeaders,withCredentials:g.withCredentials,rangeChunkSize:g.rangeChunkSize,disableRange:g.disableRange,disableStream:g.disableStream})),V(_)});return Promise.all([O,M]).then(function([V,_]){if(a.destroyed)throw new Error("Loading aborted");const b=new _message_handler.MessageHandler(d,V,S.port),m=new WorkerTransport(b,a,_,g);a._transport=m,b.send("Ready",null)})}).catch(a._capability.reject),a}async function _fetchDocument(f,a,u,g){if(f.destroyed)throw new Error("Worker was destroyed");u&&(a.length=u.length,a.initialData=u.initialData,a.progressiveDone=u.progressiveDone,a.contentDispositionFilename=u.contentDispositionFilename);const R=await f.messageHandler.sendWithPromise("GetDocRequest",{docId:g,apiVersion:"2.16.105",source:{data:a.data,url:a.url,password:a.password,disableAutoFetch:a.disableAutoFetch,rangeChunkSize:a.rangeChunkSize,length:a.length},maxImageSize:a.maxImageSize,disableFontFace:a.disableFontFace,docBaseUrl:a.docBaseUrl,ignoreErrors:a.ignoreErrors,isEvalSupported:a.isEvalSupported,fontExtraProperties:a.fontExtraProperties,enableXfa:a.enableXfa,useSystemFonts:a.useSystemFonts,cMapUrl:a.useWorkerFetch?a.cMapUrl:null,standardFontDataUrl:a.useWorkerFetch?a.standardFontDataUrl:null});if(a.data&&(a.data=null),f.destroyed)throw new Error("Worker was destroyed");return R}const e=class e{constructor(){this._capability=(0,_util.createPromiseCapability)(),this._transport=null,this._worker=null,this.docId=`d${le(e,t)._++}`,this.destroyed=!1,this.onPassword=null,this.onProgress=null,this.onUnsupportedFeature=null}get promise(){return this._capability.promise}async destroy(){var a;this.destroyed=!0,await((a=this._transport)==null?void 0:a.destroy()),this._transport=null,this._worker&&(this._worker.destroy(),this._worker=null)}};t=new WeakMap,gt(e,t,0);let PDFDocumentLoadingTask=e;exports.PDFDocumentLoadingTask=PDFDocumentLoadingTask;class PDFDataRangeTransport{constructor(a,u,g=!1,R=null){this.length=a,this.initialData=u,this.progressiveDone=g,this.contentDispositionFilename=R,this._rangeListeners=[],this._progressListeners=[],this._progressiveReadListeners=[],this._progressiveDoneListeners=[],this._readyCapability=(0,_util.createPromiseCapability)()}addRangeListener(a){this._rangeListeners.push(a)}addProgressListener(a){this._progressListeners.push(a)}addProgressiveReadListener(a){this._progressiveReadListeners.push(a)}addProgressiveDoneListener(a){this._progressiveDoneListeners.push(a)}onDataRange(a,u){for(const g of this._rangeListeners)g(a,u)}onDataProgress(a,u){this._readyCapability.promise.then(()=>{for(const g of this._progressListeners)g(a,u)})}onDataProgressiveRead(a){this._readyCapability.promise.then(()=>{for(const u of this._progressiveReadListeners)u(a)})}onDataProgressiveDone(){this._readyCapability.promise.then(()=>{for(const a of this._progressiveDoneListeners)a()})}transportReady(){this._readyCapability.resolve()}requestDataRange(a,u){(0,_util.unreachable)("Abstract method PDFDataRangeTransport.requestDataRange")}abort(){}}exports.PDFDataRangeTransport=PDFDataRangeTransport;class PDFDocumentProxy{constructor(a,u){this._pdfInfo=a,this._transport=u,Object.defineProperty(this,"fingerprint",{get(){return(0,_display_utils.deprecated)("`PDFDocumentProxy.fingerprint`, please use `PDFDocumentProxy.fingerprints` instead."),this.fingerprints[0]}}),Object.defineProperty(this,"getStats",{value:async()=>((0,_display_utils.deprecated)("`PDFDocumentProxy.getStats`, please use the `PDFDocumentProxy.stats`-getter instead."),this.stats||{streamTypes:{},fontTypes:{}})})}get annotationStorage(){return this._transport.annotationStorage}get numPages(){return this._pdfInfo.numPages}get fingerprints(){return this._pdfInfo.fingerprints}get stats(){return this._transport.stats}get isPureXfa(){return!!this._transport._htmlForXfa}get allXfaHtml(){return this._transport._htmlForXfa}getPage(a){return this._transport.getPage(a)}getPageIndex(a){return this._transport.getPageIndex(a)}getDestinations(){return this._transport.getDestinations()}getDestination(a){return this._transport.getDestination(a)}getPageLabels(){return this._transport.getPageLabels()}getPageLayout(){return this._transport.getPageLayout()}getPageMode(){return this._transport.getPageMode()}getViewerPreferences(){return this._transport.getViewerPreferences()}getOpenAction(){return this._transport.getOpenAction()}getAttachments(){return this._transport.getAttachments()}getJavaScript(){return this._transport.getJavaScript()}getJSActions(){return this._transport.getDocJSActions()}getOutline(){return this._transport.getOutline()}getOptionalContentConfig(){return this._transport.getOptionalContentConfig()}getPermissions(){return this._transport.getPermissions()}getMetadata(){return this._transport.getMetadata()}getMarkInfo(){return this._transport.getMarkInfo()}getData(){return this._transport.getData()}getDownloadInfo(){return this._transport.downloadInfoCapability.promise}cleanup(a=!1){return this._transport.startCleanup(a||this.isPureXfa)}destroy(){return this.loadingTask.destroy()}get loadingParams(){return this._transport.loadingParams}get loadingTask(){return this._transport.loadingTask}saveDocument(){return this._transport.annotationStorage.size<=0&&(0,_display_utils.deprecated)("saveDocument called while `annotationStorage` is empty, please use the getData-method instead."),this._transport.saveDocument()}getFieldObjects(){return this._transport.getFieldObjects()}hasJSActions(){return this._transport.hasJSActions()}getCalculationOrderIds(){return this._transport.getCalculationOrderIds()}}exports.PDFDocumentProxy=PDFDocumentProxy;class PDFPageProxy{constructor(a,u,g,R,S=!1){this._pageIndex=a,this._pageInfo=u,this._ownerDocument=R,this._transport=g,this._stats=S?new _display_utils.StatTimer:null,this._pdfBug=S,this.commonObjs=g.commonObjs,this.objs=new PDFObjects,this._bitmaps=new Set,this.cleanupAfterRender=!1,this.pendingCleanup=!1,this._intentStates=new Map,this._annotationPromises=new Map,this.destroyed=!1}get pageNumber(){return this._pageIndex+1}get rotate(){return this._pageInfo.rotate}get ref(){return this._pageInfo.ref}get userUnit(){return this._pageInfo.userUnit}get view(){return this._pageInfo.view}getViewport({scale:a,rotation:u=this.rotate,offsetX:g=0,offsetY:R=0,dontFlip:S=!1}={}){return new _display_utils.PageViewport({viewBox:this.view,scale:a,rotation:u,offsetX:g,offsetY:R,dontFlip:S})}getAnnotations({intent:a="display"}={}){const u=this._transport.getRenderingIntent(a);let g=this._annotationPromises.get(u.cacheKey);return g||(g=this._transport.getAnnotations(this._pageIndex,u.renderingIntent),this._annotationPromises.set(u.cacheKey,g),g=g.then(R=>{for(const S of R)S.titleObj!==void 0&&Object.defineProperty(S,"title",{get(){return(0,_display_utils.deprecated)("`title`-property on annotation, please use `titleObj` instead."),S.titleObj.str}}),S.contentsObj!==void 0&&Object.defineProperty(S,"contents",{get(){return(0,_display_utils.deprecated)("`contents`-property on annotation, please use `contentsObj` instead."),S.contentsObj.str}});return R})),g}getJSActions(){return this._jsActionsPromise||(this._jsActionsPromise=this._transport.getPageJSActions(this._pageIndex))}async getXfa(){var a;return((a=this._transport._htmlForXfa)==null?void 0:a.children[this._pageIndex])||null}render({canvasContext:a,viewport:u,intent:g="display",annotationMode:R=_util.AnnotationMode.ENABLE,transform:S=null,imageLayer:d=null,canvasFactory:O=null,background:M=null,optionalContentConfigPromise:V=null,annotationCanvasMap:_=null,pageColors:b=null,printAnnotationStorage:m=null}){var st,dt;((st=arguments[0])==null?void 0:st.renderInteractiveForms)!==void 0&&((0,_display_utils.deprecated)("render no longer accepts the `renderInteractiveForms`-option, please use the `annotationMode`-option instead."),arguments[0].renderInteractiveForms===!0&&R===_util.AnnotationMode.ENABLE&&(R=_util.AnnotationMode.ENABLE_FORMS)),((dt=arguments[0])==null?void 0:dt.includeAnnotationStorage)!==void 0&&((0,_display_utils.deprecated)("render no longer accepts the `includeAnnotationStorage`-option, please use the `annotationMode`-option instead."),arguments[0].includeAnnotationStorage===!0&&R===_util.AnnotationMode.ENABLE&&(R=_util.AnnotationMode.ENABLE_STORAGE)),this._stats&&this._stats.time("Overall");const I=this._transport.getRenderingIntent(g,R,m);this.pendingCleanup=!1,V||(V=this._transport.getOptionalContentConfig());let j=this._intentStates.get(I.cacheKey);j||(j=Object.create(null),this._intentStates.set(I.cacheKey,j)),j.streamReaderCancelTimeout&&(clearTimeout(j.streamReaderCancelTimeout),j.streamReaderCancelTimeout=null);const Y=O||new DefaultCanvasFactory({ownerDocument:this._ownerDocument}),X=!!(I.renderingIntent&_util.RenderingIntentFlag.PRINT);j.displayReadyCapability||(j.displayReadyCapability=(0,_util.createPromiseCapability)(),j.operatorList={fnArray:[],argsArray:[],lastChunk:!1,separateAnnots:null},this._stats&&this._stats.time("Page Request"),this._pumpOperatorList(I));const lt=ft=>{j.renderTasks.delete(Q),(this.cleanupAfterRender||X)&&(this.pendingCleanup=!0),this._tryCleanup(),ft?(Q.capability.reject(ft),this._abortOperatorList({intentState:j,reason:ft instanceof Error?ft:new Error(ft)})):Q.capability.resolve(),this._stats&&(this._stats.timeEnd("Rendering"),this._stats.timeEnd("Overall"))},Q=new InternalRenderTask({callback:lt,params:{canvasContext:a,viewport:u,transform:S,imageLayer:d,background:M},objs:this.objs,commonObjs:this.commonObjs,annotationCanvasMap:_,operatorList:j.operatorList,pageIndex:this._pageIndex,canvasFactory:Y,useRequestAnimationFrame:!X,pdfBug:this._pdfBug,pageColors:b});(j.renderTasks||(j.renderTasks=new Set)).add(Q);const z=Q.task;return Promise.all([j.displayReadyCapability.promise,V]).then(([ft,pt])=>{if(this.pendingCleanup){lt();return}this._stats&&this._stats.time("Rendering"),Q.initializeGraphics({transparency:ft,optionalContentConfig:pt}),Q.operatorListChanged()}).catch(lt),z}getOperatorList({intent:a="display",annotationMode:u=_util.AnnotationMode.ENABLE,printAnnotationStorage:g=null}={}){function R(){d.operatorList.lastChunk&&(d.opListReadCapability.resolve(d.operatorList),d.renderTasks.delete(O))}const S=this._transport.getRenderingIntent(a,u,g,!0);let d=this._intentStates.get(S.cacheKey);d||(d=Object.create(null),this._intentStates.set(S.cacheKey,d));let O;return d.opListReadCapability||(O=Object.create(null),O.operatorListChanged=R,d.opListReadCapability=(0,_util.createPromiseCapability)(),(d.renderTasks||(d.renderTasks=new Set)).add(O),d.operatorList={fnArray:[],argsArray:[],lastChunk:!1,separateAnnots:null},this._stats&&this._stats.time("Page Request"),this._pumpOperatorList(S)),d.opListReadCapability.promise}streamTextContent({disableCombineTextItems:a=!1,includeMarkedContent:u=!1}={}){return this._transport.messageHandler.sendWithStream("GetTextContent",{pageIndex:this._pageIndex,combineTextItems:a!==!0,includeMarkedContent:u===!0},{highWaterMark:100,size(R){return R.items.length}})}getTextContent(a={}){if(this._transport._htmlForXfa)return this.getXfa().then(g=>_xfa_text.XfaText.textContent(g));const u=this.streamTextContent(a);return new Promise(function(g,R){function S(){d.read().then(function({value:M,done:V}){if(V){g(O);return}Object.assign(O.styles,M.styles),O.items.push(...M.items),S()},R)}const d=u.getReader(),O={items:[],styles:Object.create(null)};S()})}getStructTree(){return this._structTreePromise||(this._structTreePromise=this._transport.getStructTree(this._pageIndex))}_destroy(){this.destroyed=!0;const a=[];for(const u of this._intentStates.values())if(this._abortOperatorList({intentState:u,reason:new Error("Page was destroyed."),force:!0}),!u.opListReadCapability)for(const g of u.renderTasks)a.push(g.completed),g.cancel();this.objs.clear();for(const u of this._bitmaps)u.close();return this._bitmaps.clear(),this._annotationPromises.clear(),this._jsActionsPromise=null,this._structTreePromise=null,this.pendingCleanup=!1,Promise.all(a)}cleanup(a=!1){return this.pendingCleanup=!0,this._tryCleanup(a)}_tryCleanup(a=!1){if(!this.pendingCleanup)return!1;for(const{renderTasks:u,operatorList:g}of this._intentStates.values())if(u.size>0||!g.lastChunk)return!1;this._intentStates.clear(),this.objs.clear(),this._annotationPromises.clear(),this._jsActionsPromise=null,this._structTreePromise=null,a&&this._stats&&(this._stats=new _display_utils.StatTimer);for(const u of this._bitmaps)u.close();return this._bitmaps.clear(),this.pendingCleanup=!1,!0}_startRenderPage(a,u){const g=this._intentStates.get(u);g&&(this._stats&&this._stats.timeEnd("Page Request"),g.displayReadyCapability&&g.displayReadyCapability.resolve(a))}_renderPageChunk(a,u){for(let g=0,R=a.length;g<R;g++)u.operatorList.fnArray.push(a.fnArray[g]),u.operatorList.argsArray.push(a.argsArray[g]);u.operatorList.lastChunk=a.lastChunk,u.operatorList.separateAnnots=a.separateAnnots;for(const g of u.renderTasks)g.operatorListChanged();a.lastChunk&&this._tryCleanup()}_pumpOperatorList({renderingIntent:a,cacheKey:u,annotationStorageMap:g}){const S=this._transport.messageHandler.sendWithStream("GetOperatorList",{pageIndex:this._pageIndex,intent:a,cacheKey:u,annotationStorage:g}).getReader(),d=this._intentStates.get(u);d.streamReader=S;const O=()=>{S.read().then(({value:M,done:V})=>{if(V){d.streamReader=null;return}this._transport.destroyed||(this._renderPageChunk(M,d),O())},M=>{if(d.streamReader=null,!this._transport.destroyed){if(d.operatorList){d.operatorList.lastChunk=!0;for(const V of d.renderTasks)V.operatorListChanged();this._tryCleanup()}if(d.displayReadyCapability)d.displayReadyCapability.reject(M);else if(d.opListReadCapability)d.opListReadCapability.reject(M);else throw M}})};O()}_abortOperatorList({intentState:a,reason:u,force:g=!1}){if(a.streamReader){if(!g){if(a.renderTasks.size>0)return;if(u instanceof _display_utils.RenderingCancelledException){a.streamReaderCancelTimeout=setTimeout(()=>{this._abortOperatorList({intentState:a,reason:u,force:!0}),a.streamReaderCancelTimeout=null},RENDERING_CANCELLED_TIMEOUT);return}}if(a.streamReader.cancel(new _util.AbortException(u.message)).catch(()=>{}),a.streamReader=null,!this._transport.destroyed){for(const[R,S]of this._intentStates)if(S===a){this._intentStates.delete(R);break}this.cleanup()}}}get stats(){return this._stats}}exports.PDFPageProxy=PDFPageProxy;class LoopbackPort{constructor(){this._listeners=[],this._deferred=Promise.resolve()}postMessage(a,u){const g={data:structuredClone(a,u)};this._deferred.then(()=>{for(const R of this._listeners)R.call(this,g)})}addEventListener(a,u){this._listeners.push(u)}removeEventListener(a,u){const g=this._listeners.indexOf(u);this._listeners.splice(g,1)}terminate(){this._listeners.length=0}}exports.LoopbackPort=LoopbackPort;const PDFWorkerUtil={isWorkerDisabled:!1,fallbackWorkerSrc:null,fakeWorkerId:0};exports.PDFWorkerUtil=PDFWorkerUtil;{if(_is_node.isNodeJS&&typeof commonjsRequire=="function")PDFWorkerUtil.isWorkerDisabled=!0,PDFWorkerUtil.fallbackWorkerSrc="./pdf.worker.js";else if(typeof document=="object"){const f=(s=document==null?void 0:document.currentScript)==null?void 0:s.src;f&&(PDFWorkerUtil.fallbackWorkerSrc=f.replace(/(\.(?:min\.)?js)(\?.*)?$/i,".worker$1$2"))}PDFWorkerUtil.isSameOrigin=function(f,a){let u;try{if(u=new URL(f),!u.origin||u.origin==="null")return!1}catch{return!1}const g=new URL(a,u);return u.origin===g.origin},PDFWorkerUtil.createCDNWrapper=function(f){const a=`importScripts("${f}");`;return URL.createObjectURL(new Blob([a]))}}const _PDFWorker=class _PDFWorker{constructor({name:f=null,port:a=null,verbosity:u=(0,_util.getVerbosityLevel)()}={}){if(a&&B(_PDFWorker,n).has(a))throw new Error("Cannot use more than one PDFWorker per port.");if(this.name=f,this.destroyed=!1,this.verbosity=u,this._readyCapability=(0,_util.createPromiseCapability)(),this._port=null,this._webWorker=null,this._messageHandler=null,a){B(_PDFWorker,n).set(a,this),this._initializeFromPort(a);return}this._initialize()}get promise(){return this._readyCapability.promise}get port(){return this._port}get messageHandler(){return this._messageHandler}_initializeFromPort(f){this._port=f,this._messageHandler=new _message_handler.MessageHandler("main","worker",f),this._messageHandler.on("ready",function(){}),this._readyCapability.resolve()}_initialize(){if(!PDFWorkerUtil.isWorkerDisabled&&!_PDFWorker._mainThreadWorkerMessageHandler){let{workerSrc:f}=_PDFWorker;try{PDFWorkerUtil.isSameOrigin(window.location.href,f)||(f=PDFWorkerUtil.createCDNWrapper(new URL(f,window.location).href));const a=new Worker(f),u=new _message_handler.MessageHandler("main","worker",a),g=()=>{a.removeEventListener("error",R),u.destroy(),a.terminate(),this.destroyed?this._readyCapability.reject(new Error("Worker was destroyed")):this._setupFakeWorker()},R=()=>{this._webWorker||g()};a.addEventListener("error",R),u.on("test",d=>{if(a.removeEventListener("error",R),this.destroyed){g();return}d?(this._messageHandler=u,this._port=a,this._webWorker=a,this._readyCapability.resolve(),u.send("configure",{verbosity:this.verbosity})):(this._setupFakeWorker(),u.destroy(),a.terminate())}),u.on("ready",d=>{if(a.removeEventListener("error",R),this.destroyed){g();return}try{S()}catch{this._setupFakeWorker()}});const S=()=>{const d=new Uint8Array;u.send("test",d,[d.buffer])};S();return}catch{(0,_util.info)("The worker has been disabled.")}}this._setupFakeWorker()}_setupFakeWorker(){PDFWorkerUtil.isWorkerDisabled||((0,_util.warn)("Setting up fake worker."),PDFWorkerUtil.isWorkerDisabled=!0),_PDFWorker._setupFakeWorkerGlobal.then(f=>{if(this.destroyed){this._readyCapability.reject(new Error("Worker was destroyed"));return}const a=new LoopbackPort;this._port=a;const u=`fake${PDFWorkerUtil.fakeWorkerId++}`,g=new _message_handler.MessageHandler(u+"_worker",u,a);f.setup(g,a);const R=new _message_handler.MessageHandler(u,u+"_worker",a);this._messageHandler=R,this._readyCapability.resolve(),R.send("configure",{verbosity:this.verbosity})}).catch(f=>{this._readyCapability.reject(new Error(`Setting up fake worker failed: "${f.message}".`))})}destroy(){this.destroyed=!0,this._webWorker&&(this._webWorker.terminate(),this._webWorker=null),B(_PDFWorker,n).delete(this._port),this._port=null,this._messageHandler&&(this._messageHandler.destroy(),this._messageHandler=null)}static fromPort(f){if(!(f!=null&&f.port))throw new Error("PDFWorker.fromPort - invalid method signature.");return B(this,n).has(f.port)?B(this,n).get(f.port):new _PDFWorker(f)}static get workerSrc(){if(_worker_options.GlobalWorkerOptions.workerSrc)return _worker_options.GlobalWorkerOptions.workerSrc;if(PDFWorkerUtil.fallbackWorkerSrc!==null)return _is_node.isNodeJS||(0,_display_utils.deprecated)('No "GlobalWorkerOptions.workerSrc" specified.'),PDFWorkerUtil.fallbackWorkerSrc;throw new Error('No "GlobalWorkerOptions.workerSrc" specified.')}static get _mainThreadWorkerMessageHandler(){var f;try{return((f=globalThis.pdfjsWorker)==null?void 0:f.WorkerMessageHandler)||null}catch{return null}}static get _setupFakeWorkerGlobal(){const loader=async()=>{const mainWorkerMessageHandler=this._mainThreadWorkerMessageHandler;if(mainWorkerMessageHandler)return mainWorkerMessageHandler;if(_is_node.isNodeJS&&typeof commonjsRequire=="function"){const worker=eval("require")(this.workerSrc);return worker.WorkerMessageHandler}return await(0,_display_utils.loadScript)(this.workerSrc),window.pdfjsWorker.WorkerMessageHandler};return(0,_util.shadow)(this,"_setupFakeWorkerGlobal",loader())}};n=new WeakMap,gt(_PDFWorker,n,new WeakMap);let PDFWorker=_PDFWorker;exports.PDFWorker=PDFWorker,PDFWorker.getWorkerSrc=function(){return(0,_display_utils.deprecated)("`PDFWorker.getWorkerSrc()`, please use `PDFWorker.workerSrc` instead."),this.workerSrc};class WorkerTransport{constructor(a,u,g,R){gt(this,i,null);gt(this,r,new Map);gt(this,h,new Map);gt(this,T,null);this.messageHandler=a,this.loadingTask=u,this.commonObjs=new PDFObjects,this.fontLoader=new _font_loader.FontLoader({docId:u.docId,onUnsupportedFeature:this._onUnsupportedFeature.bind(this),ownerDocument:R.ownerDocument,styleElement:R.styleElement}),this._params=R,R.useWorkerFetch||(this.CMapReaderFactory=new R.CMapReaderFactory({baseUrl:R.cMapUrl,isCompressed:R.cMapPacked}),this.StandardFontDataFactory=new R.StandardFontDataFactory({baseUrl:R.standardFontDataUrl})),this.destroyed=!1,this.destroyCapability=null,this._passwordCapability=null,this._networkStream=g,this._fullReader=null,this._lastProgress=null,this.downloadInfoCapability=(0,_util.createPromiseCapability)(),this.setupMessageHandler()}get annotationStorage(){return(0,_util.shadow)(this,"annotationStorage",new _annotation_storage.AnnotationStorage)}get stats(){return B(this,i)}getRenderingIntent(a,u=_util.AnnotationMode.ENABLE,g=null,R=!1){let S=_util.RenderingIntentFlag.DISPLAY,d=null;switch(a){case"any":S=_util.RenderingIntentFlag.ANY;break;case"display":break;case"print":S=_util.RenderingIntentFlag.PRINT;break;default:(0,_util.warn)(`getRenderingIntent - invalid intent: ${a}`)}switch(u){case _util.AnnotationMode.DISABLE:S+=_util.RenderingIntentFlag.ANNOTATIONS_DISABLE;break;case _util.AnnotationMode.ENABLE:break;case _util.AnnotationMode.ENABLE_FORMS:S+=_util.RenderingIntentFlag.ANNOTATIONS_FORMS;break;case _util.AnnotationMode.ENABLE_STORAGE:S+=_util.RenderingIntentFlag.ANNOTATIONS_STORAGE,d=(S&_util.RenderingIntentFlag.PRINT&&g instanceof _annotation_storage.PrintAnnotationStorage?g:this.annotationStorage).serializable;break;default:(0,_util.warn)(`getRenderingIntent - invalid annotationMode: ${u}`)}return R&&(S+=_util.RenderingIntentFlag.OPLIST),{renderingIntent:S,cacheKey:`${S}_${_annotation_storage.AnnotationStorage.getHash(d)}`,annotationStorageMap:d}}destroy(){if(this.destroyCapability)return this.destroyCapability.promise;this.destroyed=!0,this.destroyCapability=(0,_util.createPromiseCapability)(),this._passwordCapability&&this._passwordCapability.reject(new Error("Worker was destroyed during onPassword callback"));const a=[];for(const g of B(this,r).values())a.push(g._destroy());B(this,r).clear(),B(this,h).clear(),this.hasOwnProperty("annotationStorage")&&this.annotationStorage.resetModified();const u=this.messageHandler.sendWithPromise("Terminate",null);return a.push(u),Promise.all(a).then(()=>{this.commonObjs.clear(),this.fontLoader.clear(),At(this,T,null),this._getFieldObjectsPromise=null,this._hasJSActionsPromise=null,this._networkStream&&this._networkStream.cancelAllRequests(new _util.AbortException("Worker was terminated.")),this.messageHandler&&(this.messageHandler.destroy(),this.messageHandler=null),this.destroyCapability.resolve()},this.destroyCapability.reject),this.destroyCapability.promise}setupMessageHandler(){const{messageHandler:a,loadingTask:u}=this;a.on("GetReader",(g,R)=>{(0,_util.assert)(this._networkStream,"GetReader - no `IPDFStream` instance available."),this._fullReader=this._networkStream.getFullReader(),this._fullReader.onProgress=S=>{this._lastProgress={loaded:S.loaded,total:S.total}},R.onPull=()=>{this._fullReader.read().then(function({value:S,done:d}){if(d){R.close();return}(0,_util.assert)((0,_util.isArrayBuffer)(S),"GetReader - expected an ArrayBuffer."),R.enqueue(new Uint8Array(S),1,[S])}).catch(S=>{R.error(S)})},R.onCancel=S=>{this._fullReader.cancel(S),R.ready.catch(d=>{if(!this.destroyed)throw d})}}),a.on("ReaderHeadersReady",g=>{const R=(0,_util.createPromiseCapability)(),S=this._fullReader;return S.headersReady.then(()=>{var d;(!S.isStreamingSupported||!S.isRangeSupported)&&(this._lastProgress&&((d=u.onProgress)==null||d.call(u,this._lastProgress)),S.onProgress=O=>{var M;(M=u.onProgress)==null||M.call(u,{loaded:O.loaded,total:O.total})}),R.resolve({isStreamingSupported:S.isStreamingSupported,isRangeSupported:S.isRangeSupported,contentLength:S.contentLength})},R.reject),R.promise}),a.on("GetRangeReader",(g,R)=>{(0,_util.assert)(this._networkStream,"GetRangeReader - no `IPDFStream` instance available.");const S=this._networkStream.getRangeReader(g.begin,g.end);if(!S){R.close();return}R.onPull=()=>{S.read().then(function({value:d,done:O}){if(O){R.close();return}(0,_util.assert)((0,_util.isArrayBuffer)(d),"GetRangeReader - expected an ArrayBuffer."),R.enqueue(new Uint8Array(d),1,[d])}).catch(d=>{R.error(d)})},R.onCancel=d=>{S.cancel(d),R.ready.catch(O=>{if(!this.destroyed)throw O})}}),a.on("GetDoc",({pdfInfo:g})=>{this._numPages=g.numPages,this._htmlForXfa=g.htmlForXfa,delete g.htmlForXfa,u._capability.resolve(new PDFDocumentProxy(g,this))}),a.on("DocException",function(g){let R;switch(g.name){case"PasswordException":R=new _util.PasswordException(g.message,g.code);break;case"InvalidPDFException":R=new _util.InvalidPDFException(g.message);break;case"MissingPDFException":R=new _util.MissingPDFException(g.message);break;case"UnexpectedResponseException":R=new _util.UnexpectedResponseException(g.message,g.status);break;case"UnknownErrorException":R=new _util.UnknownErrorException(g.message,g.details);break;default:(0,_util.unreachable)("DocException - expected a valid Error.")}u._capability.reject(R)}),a.on("PasswordRequest",g=>{if(this._passwordCapability=(0,_util.createPromiseCapability)(),u.onPassword){const R=S=>{S instanceof Error?this._passwordCapability.reject(S):this._passwordCapability.resolve({password:S})};try{u.onPassword(R,g.code)}catch(S){this._passwordCapability.reject(S)}}else this._passwordCapability.reject(new _util.PasswordException(g.message,g.code));return this._passwordCapability.promise}),a.on("DataLoaded",g=>{var R;(R=u.onProgress)==null||R.call(u,{loaded:g.length,total:g.length}),this.downloadInfoCapability.resolve(g)}),a.on("StartRenderPage",g=>{if(this.destroyed)return;B(this,r).get(g.pageIndex)._startRenderPage(g.transparency,g.cacheKey)}),a.on("commonobj",([g,R,S])=>{var d;if(!this.destroyed&&!this.commonObjs.has(g))switch(R){case"Font":const O=this._params;if("error"in S){const _=S.error;(0,_util.warn)(`Error during font loading: ${_}`),this.commonObjs.resolve(g,_);break}let M=null;O.pdfBug&&((d=globalThis.FontInspector)!=null&&d.enabled)&&(M={registerFont(_,b){globalThis.FontInspector.fontAdded(_,b)}});const V=new _font_loader.FontFaceObject(S,{isEvalSupported:O.isEvalSupported,disableFontFace:O.disableFontFace,ignoreErrors:O.ignoreErrors,onUnsupportedFeature:this._onUnsupportedFeature.bind(this),fontRegistry:M});this.fontLoader.bind(V).catch(_=>a.sendWithPromise("FontFallback",{id:g})).finally(()=>{!O.fontExtraProperties&&V.data&&(V.data=null),this.commonObjs.resolve(g,V)});break;case"FontPath":case"Image":this.commonObjs.resolve(g,S);break;default:throw new Error(`Got unknown common object type ${R}`)}}),a.on("obj",([g,R,S,d])=>{var M;if(this.destroyed)return;const O=B(this,r).get(R);if(!O.objs.has(g))switch(S){case"Image":O.objs.resolve(g,d);const V=8e6;if(d){let _;if(d.bitmap){const{bitmap:b,width:m,height:I}=d;_=m*I*4,O._bitmaps.add(b)}else _=((M=d.data)==null?void 0:M.length)||0;_>V&&(O.cleanupAfterRender=!0)}break;case"Pattern":O.objs.resolve(g,d);break;default:throw new Error(`Got unknown object type ${S}`)}}),a.on("DocProgress",g=>{var R;this.destroyed||(R=u.onProgress)==null||R.call(u,{loaded:g.loaded,total:g.total})}),a.on("DocStats",g=>{this.destroyed||At(this,i,Object.freeze({streamTypes:Object.freeze(g.streamTypes),fontTypes:Object.freeze(g.fontTypes)}))}),a.on("UnsupportedFeature",this._onUnsupportedFeature.bind(this)),a.on("FetchBuiltInCMap",g=>this.destroyed?Promise.reject(new Error("Worker was destroyed.")):this.CMapReaderFactory?this.CMapReaderFactory.fetch(g):Promise.reject(new Error("CMapReaderFactory not initialized, see the `useWorkerFetch` parameter."))),a.on("FetchStandardFontData",g=>this.destroyed?Promise.reject(new Error("Worker was destroyed.")):this.StandardFontDataFactory?this.StandardFontDataFactory.fetch(g):Promise.reject(new Error("StandardFontDataFactory not initialized, see the `useWorkerFetch` parameter.")))}_onUnsupportedFeature({featureId:a}){var u,g;this.destroyed||(g=(u=this.loadingTask).onUnsupportedFeature)==null||g.call(u,a)}getData(){return this.messageHandler.sendWithPromise("GetData",null)}getPage(a){if(!Number.isInteger(a)||a<=0||a>this._numPages)return Promise.reject(new Error("Invalid page request."));const u=a-1,g=B(this,h).get(u);if(g)return g;const R=this.messageHandler.sendWithPromise("GetPage",{pageIndex:u}).then(S=>{if(this.destroyed)throw new Error("Transport destroyed");const d=new PDFPageProxy(u,S,this,this._params.ownerDocument,this._params.pdfBug);return B(this,r).set(u,d),d});return B(this,h).set(u,R),R}getPageIndex(a){return typeof a!="object"||a===null||!Number.isInteger(a.num)||a.num<0||!Number.isInteger(a.gen)||a.gen<0?Promise.reject(new Error("Invalid pageIndex request.")):this.messageHandler.sendWithPromise("GetPageIndex",{num:a.num,gen:a.gen})}getAnnotations(a,u){return this.messageHandler.sendWithPromise("GetAnnotations",{pageIndex:a,intent:u})}saveDocument(){var a;return this.messageHandler.sendWithPromise("SaveDocument",{isPureXfa:!!this._htmlForXfa,numPages:this._numPages,annotationStorage:this.annotationStorage.serializable,filename:((a=this._fullReader)==null?void 0:a.filename)??null}).finally(()=>{this.annotationStorage.resetModified()})}getFieldObjects(){return this._getFieldObjectsPromise||(this._getFieldObjectsPromise=this.messageHandler.sendWithPromise("GetFieldObjects",null))}hasJSActions(){return this._hasJSActionsPromise||(this._hasJSActionsPromise=this.messageHandler.sendWithPromise("HasJSActions",null))}getCalculationOrderIds(){return this.messageHandler.sendWithPromise("GetCalculationOrderIds",null)}getDestinations(){return this.messageHandler.sendWithPromise("GetDestinations",null)}getDestination(a){return typeof a!="string"?Promise.reject(new Error("Invalid destination request.")):this.messageHandler.sendWithPromise("GetDestination",{id:a})}getPageLabels(){return this.messageHandler.sendWithPromise("GetPageLabels",null)}getPageLayout(){return this.messageHandler.sendWithPromise("GetPageLayout",null)}getPageMode(){return this.messageHandler.sendWithPromise("GetPageMode",null)}getViewerPreferences(){return this.messageHandler.sendWithPromise("GetViewerPreferences",null)}getOpenAction(){return this.messageHandler.sendWithPromise("GetOpenAction",null)}getAttachments(){return this.messageHandler.sendWithPromise("GetAttachments",null)}getJavaScript(){return this.messageHandler.sendWithPromise("GetJavaScript",null)}getDocJSActions(){return this.messageHandler.sendWithPromise("GetDocJSActions",null)}getPageJSActions(a){return this.messageHandler.sendWithPromise("GetPageJSActions",{pageIndex:a})}getStructTree(a){return this.messageHandler.sendWithPromise("GetStructTree",{pageIndex:a})}getOutline(){return this.messageHandler.sendWithPromise("GetOutline",null)}getOptionalContentConfig(){return this.messageHandler.sendWithPromise("GetOptionalContentConfig",null).then(a=>new _optional_content_config.OptionalContentConfig(a))}getPermissions(){return this.messageHandler.sendWithPromise("GetPermissions",null)}getMetadata(){return B(this,T)||At(this,T,this.messageHandler.sendWithPromise("GetMetadata",null).then(a=>{var u,g;return{info:a[0],metadata:a[1]?new _metadata.Metadata(a[1]):null,contentDispositionFilename:((u=this._fullReader)==null?void 0:u.filename)??null,contentLength:((g=this._fullReader)==null?void 0:g.contentLength)??null}}))}getMarkInfo(){return this.messageHandler.sendWithPromise("GetMarkInfo",null)}async startCleanup(a=!1){if(await this.messageHandler.sendWithPromise("Cleanup",null),!this.destroyed){for(const u of B(this,r).values())if(!u.cleanup())throw new Error(`startCleanup: Page ${u.pageNumber} is currently rendering.`);this.commonObjs.clear(),a||this.fontLoader.clear(),At(this,T,null),this._getFieldObjectsPromise=null,this._hasJSActionsPromise=null}}get loadingParams(){const a=this._params;return(0,_util.shadow)(this,"loadingParams",{disableAutoFetch:a.disableAutoFetch,enableXfa:a.enableXfa})}}i=new WeakMap,r=new WeakMap,h=new WeakMap,T=new WeakMap;class PDFObjects{constructor(){gt(this,v);gt(this,E,Object.create(null))}get(a,u=null){if(u){const R=mt(this,v,ce).call(this,a);return R.capability.promise.then(()=>u(R.data)),null}const g=B(this,E)[a];if(!(g!=null&&g.capability.settled))throw new Error(`Requesting object that isn't resolved yet ${a}.`);return g.data}has(a){const u=B(this,E)[a];return(u==null?void 0:u.capability.settled)||!1}resolve(a,u=null){const g=mt(this,v,ce).call(this,a);g.data=u,g.capability.resolve()}clear(){At(this,E,Object.create(null))}}E=new WeakMap,v=new WeakSet,ce=function(a){const u=B(this,E)[a];return u||(B(this,E)[a]={capability:(0,_util.createPromiseCapability)(),data:null})};class RenderTask{constructor(a){gt(this,F,null);At(this,F,a),this.onContinue=null}get promise(){return B(this,F).capability.promise}cancel(){B(this,F).cancel()}get separateAnnots(){const{separateAnnots:a}=B(this,F).operatorList;if(!a)return!1;const{annotationCanvasMap:u}=B(this,F);return a.form||a.canvas&&(u==null?void 0:u.size)>0}}F=new WeakMap,exports.RenderTask=RenderTask;const w=class w{constructor({callback:a,params:u,objs:g,commonObjs:R,annotationCanvasMap:S,operatorList:d,pageIndex:O,canvasFactory:M,useRequestAnimationFrame:V=!1,pdfBug:_=!1,pageColors:b=null}){this.callback=a,this.params=u,this.objs=g,this.commonObjs=R,this.annotationCanvasMap=S,this.operatorListIdx=null,this.operatorList=d,this._pageIndex=O,this.canvasFactory=M,this._pdfBug=_,this.pageColors=b,this.running=!1,this.graphicsReadyCallback=null,this.graphicsReady=!1,this._useRequestAnimationFrame=V===!0&&typeof window<"u",this.cancelled=!1,this.capability=(0,_util.createPromiseCapability)(),this.task=new RenderTask(this),this._cancelBound=this.cancel.bind(this),this._continueBound=this._continue.bind(this),this._scheduleNextBound=this._scheduleNext.bind(this),this._nextBound=this._next.bind(this),this._canvas=u.canvasContext.canvas}get completed(){return this.capability.promise.catch(function(){})}initializeGraphics({transparency:a=!1,optionalContentConfig:u}){var M;if(this.cancelled)return;if(this._canvas){if(B(w,k).has(this._canvas))throw new Error("Cannot use the same canvas during multiple render() operations. Use different canvas or ensure previous operations were cancelled or completed.");B(w,k).add(this._canvas)}this._pdfBug&&((M=globalThis.StepperManager)!=null&&M.enabled)&&(this.stepper=globalThis.StepperManager.create(this._pageIndex),this.stepper.init(this.operatorList),this.stepper.nextBreakPoint=this.stepper.getNextBreakPoint());const{canvasContext:g,viewport:R,transform:S,imageLayer:d,background:O}=this.params;this.gfx=new _canvas.CanvasGraphics(g,this.commonObjs,this.objs,this.canvasFactory,d,u,this.annotationCanvasMap,this.pageColors),this.gfx.beginDrawing({transform:S,viewport:R,transparency:a,background:O}),this.operatorListIdx=0,this.graphicsReady=!0,this.graphicsReadyCallback&&this.graphicsReadyCallback()}cancel(a=null){this.running=!1,this.cancelled=!0,this.gfx&&this.gfx.endDrawing(),this._canvas&&B(w,k).delete(this._canvas),this.callback(a||new _display_utils.RenderingCancelledException(`Rendering cancelled, page ${this._pageIndex+1}`,"canvas"))}operatorListChanged(){if(!this.graphicsReady){this.graphicsReadyCallback||(this.graphicsReadyCallback=this._continueBound);return}this.stepper&&this.stepper.updateOperatorList(this.operatorList),!this.running&&this._continue()}_continue(){this.running=!0,!this.cancelled&&(this.task.onContinue?this.task.onContinue(this._scheduleNextBound):this._scheduleNext())}_scheduleNext(){this._useRequestAnimationFrame?window.requestAnimationFrame(()=>{this._nextBound().catch(this._cancelBound)}):Promise.resolve().then(this._nextBound).catch(this._cancelBound)}async _next(){this.cancelled||(this.operatorListIdx=this.gfx.executeOperatorList(this.operatorList,this.operatorListIdx,this._continueBound,this.stepper),this.operatorListIdx===this.operatorList.argsArray.length&&(this.running=!1,this.operatorList.lastChunk&&(this.gfx.endDrawing(),this._canvas&&B(w,k).delete(this._canvas),this.callback())))}};k=new WeakMap,gt(w,k,new WeakSet);let InternalRenderTask=w;const version="2.16.105";exports.version=version;const build="172ccdbe5";exports.build=build},(t,e,s)=>{var E,Te,y;Object.defineProperty(e,"__esModule",{value:!0}),e.PrintAnnotationStorage=e.AnnotationStorage=void 0;var n=s(1),i=s(6),r=s(10);class h{constructor(){gt(this,E);this._storage=new Map,this._modified=!1,this.onSetModified=null,this.onResetModified=null,this.onAnnotationEditor=null}getValue(k,w){const f=this._storage.get(k);return f===void 0?w:Object.assign(w,f)}getRawValue(k){return this._storage.get(k)}remove(k){if(this._storage.delete(k),this._storage.size===0&&this.resetModified(),typeof this.onAnnotationEditor=="function"){for(const w of this._storage.values())if(w instanceof i.AnnotationEditor)return;this.onAnnotationEditor(null)}}setValue(k,w){const f=this._storage.get(k);let a=!1;if(f!==void 0)for(const[u,g]of Object.entries(w))f[u]!==g&&(a=!0,f[u]=g);else a=!0,this._storage.set(k,w);a&&mt(this,E,Te).call(this),w instanceof i.AnnotationEditor&&typeof this.onAnnotationEditor=="function"&&this.onAnnotationEditor(w.constructor._type)}has(k){return this._storage.has(k)}getAll(){return this._storage.size>0?(0,n.objectFromMap)(this._storage):null}get size(){return this._storage.size}resetModified(){this._modified&&(this._modified=!1,typeof this.onResetModified=="function"&&this.onResetModified())}get print(){return new T(this)}get serializable(){if(this._storage.size===0)return null;const k=new Map;for(const[w,f]of this._storage){const a=f instanceof i.AnnotationEditor?f.serialize():f;a&&k.set(w,a)}return k}static getHash(k){if(!k)return"";const w=new r.MurmurHash3_64;for(const[f,a]of k)w.update(`${f}:${JSON.stringify(a)}`);return w.hexdigest()}}E=new WeakSet,Te=function(){this._modified||(this._modified=!0,typeof this.onSetModified=="function"&&this.onSetModified())},e.AnnotationStorage=h;class T extends h{constructor(w){super();gt(this,y,null);At(this,y,structuredClone(w.serializable))}get print(){(0,n.unreachable)("Should not call PrintAnnotationStorage.print")}get serializable(){return B(this,y)}}y=new WeakMap,e.PrintAnnotationStorage=T},(t,e,s)=>{var h,T,E,v,y,F;Object.defineProperty(e,"__esModule",{value:!0}),e.AnnotationEditor=void 0;var n=s(7),i=s(1);const k=class k{constructor(f){gt(this,h,this.focusin.bind(this));gt(this,T,this.focusout.bind(this));gt(this,E,!1);gt(this,v,!1);gt(this,y,!1);gt(this,F,k._zIndex++);this.constructor===k&&(0,i.unreachable)("Cannot initialize AnnotationEditor."),this.parent=f.parent,this.id=f.id,this.width=this.height=null,this.pageIndex=f.parent.pageIndex,this.name=f.name,this.div=null;const[a,u]=this.parent.viewportBaseDimensions;this.x=f.x/a,this.y=f.y/u,this.rotation=this.parent.viewport.rotation,this.isAttachedToDOM=!1}static get _defaultLineColor(){return(0,i.shadow)(this,"_defaultLineColor",this._colorManager.getHexCode("CanvasText"))}setInBackground(){this.div.style.zIndex=0}setInForeground(){this.div.style.zIndex=B(this,F)}focusin(f){B(this,E)?At(this,E,!1):this.parent.setSelected(this)}focusout(f){if(!this.isAttachedToDOM)return;const a=f.relatedTarget;a!=null&&a.closest(`#${this.id}`)||(f.preventDefault(),this.parent.isMultipleSelection||this.commitOrRemove())}commitOrRemove(){this.isEmpty()?this.remove():this.commit()}commit(){this.parent.addToAnnotationStorage(this)}dragstart(f){const a=this.parent.div.getBoundingClientRect();this.startX=f.clientX-a.x,this.startY=f.clientY-a.y,f.dataTransfer.setData("text/plain",this.id),f.dataTransfer.effectAllowed="move"}setAt(f,a,u,g){const[R,S]=this.parent.viewportBaseDimensions;[u,g]=this.screenToPageTranslation(u,g),this.x=(f+u)/R,this.y=(a+g)/S,this.div.style.left=`${100*this.x}%`,this.div.style.top=`${100*this.y}%`}translate(f,a){const[u,g]=this.parent.viewportBaseDimensions;[f,a]=this.screenToPageTranslation(f,a),this.x+=f/u,this.y+=a/g,this.div.style.left=`${100*this.x}%`,this.div.style.top=`${100*this.y}%`}screenToPageTranslation(f,a){const{rotation:u}=this.parent.viewport;switch(u){case 90:return[a,-f];case 180:return[-f,-a];case 270:return[-a,f];default:return[f,a]}}setDims(f,a){const[u,g]=this.parent.viewportBaseDimensions;this.div.style.width=`${100*f/u}%`,this.div.style.height=`${100*a/g}%`}getInitialTranslation(){return[0,0]}render(){this.div=document.createElement("div"),this.div.setAttribute("data-editor-rotation",(360-this.rotation)%360),this.div.className=this.name,this.div.setAttribute("id",this.id),this.div.setAttribute("tabIndex",0),this.setInForeground(),this.div.addEventListener("focusin",B(this,h)),this.div.addEventListener("focusout",B(this,T));const[f,a]=this.getInitialTranslation();return this.translate(f,a),(0,n.bindEvents)(this,this.div,["dragstart","pointerdown"]),this.div}pointerdown(f){const a=n.KeyboardManager.platform.isMac;if(f.button!==0||f.ctrlKey&&a){f.preventDefault();return}f.ctrlKey&&!a||f.shiftKey||f.metaKey&&a?this.parent.toggleSelected(this):this.parent.setSelected(this),At(this,E,!0)}getRect(f,a){const[u,g]=this.parent.viewportBaseDimensions,[R,S]=this.parent.pageDimensions,d=R*f/u,O=S*a/g,M=this.x*R,V=this.y*S,_=this.width*R,b=this.height*S;switch(this.rotation){case 0:return[M+d,S-V-O-b,M+d+_,S-V-O];case 90:return[M+O,S-V+d,M+O+b,S-V+d+_];case 180:return[M-d-_,S-V+O,M-d,S-V+O+b];case 270:return[M-O-b,S-V-d-_,M-O,S-V-d];default:throw new Error("Invalid rotation")}}getRectInCurrentCoords(f,a){const[u,g,R,S]=f,d=R-u,O=S-g;switch(this.rotation){case 0:return[u,a-S,d,O];case 90:return[u,a-g,O,d];case 180:return[R,a-g,d,O];case 270:return[R,a-S,O,d];default:throw new Error("Invalid rotation")}}onceAdded(){}isEmpty(){return!1}enableEditMode(){At(this,y,!0)}disableEditMode(){At(this,y,!1)}isInEditMode(){return B(this,y)}shouldGetKeyboardEvents(){return!1}needsToBeRebuilt(){return this.div&&!this.isAttachedToDOM}rebuild(){var f;(f=this.div)==null||f.addEventListener("focusin",B(this,h))}serialize(){(0,i.unreachable)("An editor must be serializable")}static deserialize(f,a){const u=new this.prototype.constructor({parent:a,id:a.getNextId()});u.rotation=f.rotation;const[g,R]=a.pageDimensions,[S,d,O,M]=u.getRectInCurrentCoords(f.rect,R);return u.x=S/g,u.y=d/R,u.width=O/g,u.height=M/R,u}remove(){this.div.removeEventListener("focusin",B(this,h)),this.div.removeEventListener("focusout",B(this,T)),this.isEmpty()||this.commit(),this.parent.remove(this)}select(){var f;(f=this.div)==null||f.classList.add("selectedEditor")}unselect(){var f;(f=this.div)==null||f.classList.remove("selectedEditor")}updateParams(f,a){}disableEditing(){}enableEditing(){}get propertiesToUpdate(){return{}}get contentDiv(){return this.div}get isEditing(){return B(this,v)}set isEditing(f){At(this,v,f),f?(this.parent.setSelected(this),this.parent.setActiveEditor(this)):this.parent.setActiveEditor(null)}};h=new WeakMap,T=new WeakMap,E=new WeakMap,v=new WeakMap,y=new WeakMap,F=new WeakMap,Dt(k,"_colorManager",new n.ColorManager),Dt(k,"_zIndex",1);let r=k;e.AnnotationEditor=r},(t,e,s)=>{var w,f,a,u,g,R,we,O,V,_,b,m,I,j,Y,X,lt,Q,z,st,dt,ft,pt,U,x,A,Pe,q,de,G,qt,at,te,P,ke,l,Re,N,he,it,ee,rt,se;Object.defineProperty(e,"__esModule",{value:!0}),e.KeyboardManager=e.CommandManager=e.ColorManager=e.AnnotationEditorUIManager=void 0,e.bindEvents=r,e.opacityToHex=h;var n=s(1),i=s(8);function r(ht,D,ct){for(const vt of ct)D.addEventListener(vt,ht[vt].bind(ht))}function h(ht){return Math.round(Math.min(255,Math.max(1,255*ht))).toString(16).padStart(2,"0")}class T{constructor(){gt(this,w,0)}getId(){return`${n.AnnotationEditorPrefix}${le(this,w)._++}`}}w=new WeakMap;class E{constructor(D=128){gt(this,f,[]);gt(this,a,!1);gt(this,u,void 0);gt(this,g,-1);At(this,u,D)}add({cmd:D,undo:ct,mustExec:vt,type:bt=NaN,overwriteIfSameType:xt=!1,keepUndo:Et=!1}){if(vt&&D(),B(this,a))return;const Rt={cmd:D,undo:ct,type:bt};if(B(this,g)===-1){B(this,f).length>0&&(B(this,f).length=0),At(this,g,0),B(this,f).push(Rt);return}if(xt&&B(this,f)[B(this,g)].type===bt){Et&&(Rt.undo=B(this,f)[B(this,g)].undo),B(this,f)[B(this,g)]=Rt;return}const Pt=B(this,g)+1;Pt===B(this,u)?B(this,f).splice(0,1):(At(this,g,Pt),Pt<B(this,f).length&&B(this,f).splice(Pt)),B(this,f).push(Rt)}undo(){B(this,g)!==-1&&(At(this,a,!0),B(this,f)[B(this,g)].undo(),At(this,a,!1),At(this,g,B(this,g)-1))}redo(){B(this,g)<B(this,f).length-1&&(At(this,g,B(this,g)+1),At(this,a,!0),B(this,f)[B(this,g)].cmd(),At(this,a,!1))}hasSomethingToUndo(){return B(this,g)!==-1}hasSomethingToRedo(){return B(this,g)<B(this,f).length-1}destroy(){At(this,f,null)}}f=new WeakMap,a=new WeakMap,u=new WeakMap,g=new WeakMap,e.CommandManager=E;const d=class d{constructor(D){gt(this,R);this.buffer=[],this.callbacks=new Map,this.allKeys=new Set;const ct=d.platform.isMac;for(const[vt,bt]of D)for(const xt of vt){const Et=xt.startsWith("mac+");ct&&Et?(this.callbacks.set(xt.slice(4),bt),this.allKeys.add(xt.split("+").at(-1))):!ct&&!Et&&(this.callbacks.set(xt,bt),this.allKeys.add(xt.split("+").at(-1)))}}static get platform(){const D=typeof navigator<"u"?navigator.platform:"";return(0,n.shadow)(this,"platform",{isWin:D.includes("Win"),isMac:D.includes("Mac")})}exec(D,ct){if(!this.allKeys.has(ct.key))return;const vt=this.callbacks.get(mt(this,R,we).call(this,ct));vt&&(vt.bind(D)(),ct.stopPropagation(),ct.preventDefault())}};R=new WeakSet,we=function(D){D.altKey&&this.buffer.push("alt"),D.ctrlKey&&this.buffer.push("ctrl"),D.metaKey&&this.buffer.push("meta"),D.shiftKey&&this.buffer.push("shift"),this.buffer.push(D.key);const ct=this.buffer.join("+");return this.buffer.length=0,ct};let v=d;e.KeyboardManager=v;class y{constructor(){gt(this,O,null)}copy(D){D&&(Array.isArray(D)?At(this,O,D.map(ct=>ct.serialize())):At(this,O,[D.serialize()]),At(this,O,B(this,O).filter(ct=>!!ct)),B(this,O).length===0&&At(this,O,null))}paste(){return B(this,O)}isEmpty(){return B(this,O)===null}destroy(){At(this,O,null)}}O=new WeakMap;const M=class M{get _colors(){const D=new Map([["CanvasText",null],["Canvas",null]]);return(0,i.getColorValues)(D),(0,n.shadow)(this,"_colors",D)}convert(D){const ct=(0,i.getRGB)(D);if(!window.matchMedia("(forced-colors: active)").matches)return ct;for(const[vt,bt]of this._colors)if(bt.every((xt,Et)=>xt===ct[Et]))return M._colorsMapping.get(vt);return ct}getHexCode(D){const ct=this._colors.get(D);return ct?n.Util.makeHexColor(...ct):D}};Dt(M,"_colorsMapping",new Map([["CanvasText",[0,0,0]],["Canvas",[255,255,255]]]));let F=M;e.ColorManager=F;const Z=class Z{constructor(D,ct){gt(this,A);gt(this,q);gt(this,G);gt(this,at);gt(this,P);gt(this,l);gt(this,N);gt(this,it);gt(this,rt);gt(this,V,null);gt(this,_,new Map);gt(this,b,new Map);gt(this,m,new y);gt(this,I,new E);gt(this,j,0);gt(this,Y,null);gt(this,X,null);gt(this,lt,new T);gt(this,Q,!1);gt(this,z,n.AnnotationEditorType.NONE);gt(this,st,new Set);gt(this,dt,this.keydown.bind(this));gt(this,ft,this.onEditingAction.bind(this));gt(this,pt,this.onPageChanging.bind(this));gt(this,U,{isEditing:!1,isEmpty:!0,hasEmptyClipboard:!0,hasSomethingToUndo:!1,hasSomethingToRedo:!1,hasSelectedEditor:!1});gt(this,x,null);At(this,x,D),At(this,X,ct),B(this,X)._on("editingaction",B(this,ft)),B(this,X)._on("pagechanging",B(this,pt))}destroy(){mt(this,q,de).call(this),B(this,X)._off("editingaction",B(this,ft)),B(this,X)._off("pagechanging",B(this,pt));for(const D of B(this,b).values())D.destroy();B(this,b).clear(),B(this,_).clear(),At(this,V,null),B(this,st).clear(),B(this,m).destroy(),B(this,I).destroy()}onPageChanging({pageNumber:D}){At(this,j,D-1)}focusMainContainer(){B(this,x).focus()}keydown(D){var ct;(ct=this.getActive())!=null&&ct.shouldGetKeyboardEvents()||Z._keyboardManager.exec(this,D)}onEditingAction(D){["undo","redo","cut","copy","paste","delete","selectAll"].includes(D.name)&&this[D.name]()}setEditingState(D){D?(mt(this,A,Pe).call(this),mt(this,G,qt).call(this,{isEditing:B(this,z)!==n.AnnotationEditorType.NONE,isEmpty:mt(this,it,ee).call(this),hasSomethingToUndo:B(this,I).hasSomethingToUndo(),hasSomethingToRedo:B(this,I).hasSomethingToRedo(),hasSelectedEditor:!1,hasEmptyClipboard:B(this,m).isEmpty()})):(mt(this,q,de).call(this),mt(this,G,qt).call(this,{isEditing:!1}))}registerEditorTypes(D){At(this,Y,D);for(const ct of B(this,Y))mt(this,at,te).call(this,ct.defaultPropertiesToUpdate)}getId(){return B(this,lt).getId()}addLayer(D){B(this,b).set(D.pageIndex,D),B(this,Q)?D.enable():D.disable()}removeLayer(D){B(this,b).delete(D.pageIndex)}updateMode(D){if(At(this,z,D),D===n.AnnotationEditorType.NONE)this.setEditingState(!1),mt(this,l,Re).call(this);else{this.setEditingState(!0),mt(this,P,ke).call(this);for(const ct of B(this,b).values())ct.updateMode(D)}}updateToolbar(D){D!==B(this,z)&&B(this,X).dispatch("switchannotationeditormode",{source:this,mode:D})}updateParams(D,ct){for(const vt of B(this,st))vt.updateParams(D,ct);for(const vt of B(this,Y))vt.updateDefaultParams(D,ct)}getEditors(D){const ct=[];for(const vt of B(this,_).values())vt.pageIndex===D&&ct.push(vt);return ct}getEditor(D){return B(this,_).get(D)}addEditor(D){B(this,_).set(D.id,D)}removeEditor(D){B(this,_).delete(D.id),this.unselect(D)}setActiveEditor(D){B(this,V)!==D&&(At(this,V,D),D&&mt(this,at,te).call(this,D.propertiesToUpdate))}toggleSelected(D){if(B(this,st).has(D)){B(this,st).delete(D),D.unselect(),mt(this,G,qt).call(this,{hasSelectedEditor:this.hasSelection});return}B(this,st).add(D),D.select(),mt(this,at,te).call(this,D.propertiesToUpdate),mt(this,G,qt).call(this,{hasSelectedEditor:!0})}setSelected(D){for(const ct of B(this,st))ct!==D&&ct.unselect();B(this,st).clear(),B(this,st).add(D),D.select(),mt(this,at,te).call(this,D.propertiesToUpdate),mt(this,G,qt).call(this,{hasSelectedEditor:!0})}isSelected(D){return B(this,st).has(D)}unselect(D){D.unselect(),B(this,st).delete(D),mt(this,G,qt).call(this,{hasSelectedEditor:this.hasSelection})}get hasSelection(){return B(this,st).size!==0}undo(){B(this,I).undo(),mt(this,G,qt).call(this,{hasSomethingToUndo:B(this,I).hasSomethingToUndo(),hasSomethingToRedo:!0,isEmpty:mt(this,it,ee).call(this)})}redo(){B(this,I).redo(),mt(this,G,qt).call(this,{hasSomethingToUndo:!0,hasSomethingToRedo:B(this,I).hasSomethingToRedo(),isEmpty:mt(this,it,ee).call(this)})}addCommands(D){B(this,I).add(D),mt(this,G,qt).call(this,{hasSomethingToUndo:!0,hasSomethingToRedo:!1,isEmpty:mt(this,it,ee).call(this)})}delete(){if(B(this,V)&&B(this,V).commitOrRemove(),!this.hasSelection)return;const D=[...B(this,st)],ct=()=>{for(const bt of D)bt.remove()},vt=()=>{for(const bt of D)mt(this,N,he).call(this,bt)};this.addCommands({cmd:ct,undo:vt,mustExec:!0})}copy(){if(B(this,V)&&B(this,V).commitOrRemove(),this.hasSelection){const D=[];for(const ct of B(this,st))ct.isEmpty()||D.push(ct);if(D.length===0)return;B(this,m).copy(D),mt(this,G,qt).call(this,{hasEmptyClipboard:!1})}}cut(){this.copy(),this.delete()}paste(){if(B(this,m).isEmpty())return;this.unselectAll();const D=B(this,b).get(B(this,j)),ct=B(this,m).paste().map(xt=>D.deserialize(xt)),vt=()=>{for(const xt of ct)mt(this,N,he).call(this,xt);mt(this,rt,se).call(this,ct)},bt=()=>{for(const xt of ct)xt.remove()};this.addCommands({cmd:vt,undo:bt,mustExec:!0})}selectAll(){for(const D of B(this,st))D.commit();mt(this,rt,se).call(this,B(this,_).values())}unselectAll(){if(B(this,V)){B(this,V).commitOrRemove();return}if(mt(this,rt,se).size!==0){for(const D of B(this,st))D.unselect();B(this,st).clear(),mt(this,G,qt).call(this,{hasSelectedEditor:!1})}}isActive(D){return B(this,V)===D}getActive(){return B(this,V)}getMode(){return B(this,z)}};V=new WeakMap,_=new WeakMap,b=new WeakMap,m=new WeakMap,I=new WeakMap,j=new WeakMap,Y=new WeakMap,X=new WeakMap,lt=new WeakMap,Q=new WeakMap,z=new WeakMap,st=new WeakMap,dt=new WeakMap,ft=new WeakMap,pt=new WeakMap,U=new WeakMap,x=new WeakMap,A=new WeakSet,Pe=function(){B(this,x).addEventListener("keydown",B(this,dt))},q=new WeakSet,de=function(){B(this,x).removeEventListener("keydown",B(this,dt))},G=new WeakSet,qt=function(D){Object.entries(D).some(([vt,bt])=>B(this,U)[vt]!==bt)&&B(this,X).dispatch("annotationeditorstateschanged",{source:this,details:Object.assign(B(this,U),D)})},at=new WeakSet,te=function(D){B(this,X).dispatch("annotationeditorparamschanged",{source:this,details:D})},P=new WeakSet,ke=function(){if(!B(this,Q)){At(this,Q,!0);for(const D of B(this,b).values())D.enable()}},l=new WeakSet,Re=function(){if(this.unselectAll(),B(this,Q)){At(this,Q,!1);for(const D of B(this,b).values())D.disable()}},N=new WeakSet,he=function(D){const ct=B(this,b).get(D.pageIndex);ct?ct.addOrRebuild(D):this.addEditor(D)},it=new WeakSet,ee=function(){if(B(this,_).size===0)return!0;if(B(this,_).size===1)for(const D of B(this,_).values())return D.isEmpty();return!1},rt=new WeakSet,se=function(D){B(this,st).clear();for(const ct of D)ct.isEmpty()||(B(this,st).add(ct),ct.select());mt(this,G,qt).call(this,{hasSelectedEditor:!0})},Dt(Z,"_keyboardManager",new v([[["ctrl+a","mac+meta+a"],Z.prototype.selectAll],[["ctrl+c","mac+meta+c"],Z.prototype.copy],[["ctrl+v","mac+meta+v"],Z.prototype.paste],[["ctrl+x","mac+meta+x"],Z.prototype.cut],[["ctrl+z","mac+meta+z"],Z.prototype.undo],[["ctrl+y","ctrl+shift+Z","mac+meta+shift+Z"],Z.prototype.redo],[["Backspace","alt+Backspace","ctrl+Backspace","shift+Backspace","mac+Backspace","mac+alt+Backspace","mac+ctrl+Backspace","Delete","ctrl+Delete","shift+Delete"],Z.prototype.delete],[["Escape","mac+Escape"],Z.prototype.unselectAll]]));let k=Z;e.AnnotationEditorUIManager=k},(t,e,s)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.StatTimer=e.RenderingCancelledException=e.PixelsPerInch=e.PageViewport=e.PDFDateString=e.DOMStandardFontDataFactory=e.DOMSVGFactory=e.DOMCanvasFactory=e.DOMCMapReaderFactory=e.AnnotationPrefix=void 0,e.deprecated=M,e.getColorValues=I,e.getCurrentTransform=j,e.getCurrentTransformInverse=Y,e.getFilenameFromUrl=g,e.getPdfFilenameFromUrl=R,e.getRGB=m,e.getXfaPageViewport=b,e.isDataScheme=a,e.isPdfFile=u,e.isValidFetchUrl=d,e.loadScript=O;var n=s(9),i=s(1);const r="http://www.w3.org/2000/svg",h="pdfjs_internal_id_";e.AnnotationPrefix=h;const X=class X{};Dt(X,"CSS",96),Dt(X,"PDF",72),Dt(X,"PDF_TO_CSS_UNITS",X.CSS/X.PDF);let T=X;e.PixelsPerInch=T;class E extends n.BaseCanvasFactory{constructor({ownerDocument:Q=globalThis.document}={}){super(),this._document=Q}_createCanvas(Q,z){const st=this._document.createElement("canvas");return st.width=Q,st.height=z,st}}e.DOMCanvasFactory=E;async function v(lt,Q=!1){if(d(lt,document.baseURI)){const z=await fetch(lt);if(!z.ok)throw new Error(z.statusText);return Q?new Uint8Array(await z.arrayBuffer()):(0,i.stringToBytes)(await z.text())}return new Promise((z,st)=>{const dt=new XMLHttpRequest;dt.open("GET",lt,!0),Q&&(dt.responseType="arraybuffer"),dt.onreadystatechange=()=>{if(dt.readyState===XMLHttpRequest.DONE){if(dt.status===200||dt.status===0){let ft;if(Q&&dt.response?ft=new Uint8Array(dt.response):!Q&&dt.responseText&&(ft=(0,i.stringToBytes)(dt.responseText)),ft){z(ft);return}}st(new Error(dt.statusText))}},dt.send(null)})}class y extends n.BaseCMapReaderFactory{_fetchData(Q,z){return v(Q,this.isCompressed).then(st=>({cMapData:st,compressionType:z}))}}e.DOMCMapReaderFactory=y;class F extends n.BaseStandardFontDataFactory{_fetchData(Q){return v(Q,!0)}}e.DOMStandardFontDataFactory=F;class k extends n.BaseSVGFactory{_createSVG(Q){return document.createElementNS(r,Q)}}e.DOMSVGFactory=k;class w{constructor({viewBox:Q,scale:z,rotation:st,offsetX:dt=0,offsetY:ft=0,dontFlip:pt=!1}){this.viewBox=Q,this.scale=z,this.rotation=st,this.offsetX=dt,this.offsetY=ft;const U=(Q[2]+Q[0])/2,x=(Q[3]+Q[1])/2;let A,L,q,$;switch(st%=360,st<0&&(st+=360),st){case 180:A=-1,L=0,q=0,$=1;break;case 90:A=0,L=1,q=1,$=0;break;case 270:A=0,L=-1,q=-1,$=0;break;case 0:A=1,L=0,q=0,$=-1;break;default:throw new Error("PageViewport: Invalid rotation, must be a multiple of 90 degrees.")}pt&&(q=-q,$=-$);let G,nt,at,c;A===0?(G=Math.abs(x-Q[1])*z+dt,nt=Math.abs(U-Q[0])*z+ft,at=Math.abs(Q[3]-Q[1])*z,c=Math.abs(Q[2]-Q[0])*z):(G=Math.abs(U-Q[0])*z+dt,nt=Math.abs(x-Q[1])*z+ft,at=Math.abs(Q[2]-Q[0])*z,c=Math.abs(Q[3]-Q[1])*z),this.transform=[A*z,L*z,q*z,$*z,G-A*z*U-q*z*x,nt-L*z*U-$*z*x],this.width=at,this.height=c}clone({scale:Q=this.scale,rotation:z=this.rotation,offsetX:st=this.offsetX,offsetY:dt=this.offsetY,dontFlip:ft=!1}={}){return new w({viewBox:this.viewBox.slice(),scale:Q,rotation:z,offsetX:st,offsetY:dt,dontFlip:ft})}convertToViewportPoint(Q,z){return i.Util.applyTransform([Q,z],this.transform)}convertToViewportRectangle(Q){const z=i.Util.applyTransform([Q[0],Q[1]],this.transform),st=i.Util.applyTransform([Q[2],Q[3]],this.transform);return[z[0],z[1],st[0],st[1]]}convertToPdfPoint(Q,z){return i.Util.applyInverseTransform([Q,z],this.transform)}}e.PageViewport=w;class f extends i.BaseException{constructor(Q,z){super(Q,"RenderingCancelledException"),this.type=z}}e.RenderingCancelledException=f;function a(lt){const Q=lt.length;let z=0;for(;z<Q&&lt[z].trim()==="";)z++;return lt.substring(z,z+5).toLowerCase()==="data:"}function u(lt){return typeof lt=="string"&&/\.pdf$/i.test(lt)}function g(lt){const Q=lt.indexOf("#"),z=lt.indexOf("?"),st=Math.min(Q>0?Q:lt.length,z>0?z:lt.length);return lt.substring(lt.lastIndexOf("/",st)+1,st)}function R(lt,Q="document.pdf"){if(typeof lt!="string")return Q;if(a(lt))return(0,i.warn)('getPdfFilenameFromUrl: ignore "data:"-URL for performance reasons.'),Q;const z=/^(?:(?:[^:]+:)?\/\/[^/]+)?([^?#]*)(\?[^#]*)?(#.*)?$/,st=/[^/?#=]+\.pdf\b(?!.*\.pdf\b)/i,dt=z.exec(lt);let ft=st.exec(dt[1])||st.exec(dt[2])||st.exec(dt[3]);if(ft&&(ft=ft[0],ft.includes("%")))try{ft=st.exec(decodeURIComponent(ft))[0]}catch{}return ft||Q}class S{constructor(){this.started=Object.create(null),this.times=[]}time(Q){Q in this.started&&(0,i.warn)(`Timer is already running for ${Q}`),this.started[Q]=Date.now()}timeEnd(Q){Q in this.started||(0,i.warn)(`Timer has not been started for ${Q}`),this.times.push({name:Q,start:this.started[Q],end:Date.now()}),delete this.started[Q]}toString(){const Q=[];let z=0;for(const st of this.times){const dt=st.name;dt.length>z&&(z=dt.length)}for(const st of this.times){const dt=st.end-st.start;Q.push(`${st.name.padEnd(z)} ${dt}ms
`)}return Q.join("")}}e.StatTimer=S;function d(lt,Q){try{const{protocol:z}=Q?new URL(lt,Q):new URL(lt);return z==="http:"||z==="https:"}catch{return!1}}function O(lt,Q=!1){return new Promise((z,st)=>{const dt=document.createElement("script");dt.src=lt,dt.onload=function(ft){Q&&dt.remove(),z(ft)},dt.onerror=function(){st(new Error(`Cannot load script at: ${dt.src}`))},(document.head||document.documentElement).append(dt)})}function M(lt){console.log("Deprecated API usage: "+lt)}let V;class _{static toDateObject(Q){if(!Q||typeof Q!="string")return null;V||(V=new RegExp("^D:(\\d{4})(\\d{2})?(\\d{2})?(\\d{2})?(\\d{2})?(\\d{2})?([Z|+|-])?(\\d{2})?'?(\\d{2})?'?"));const z=V.exec(Q);if(!z)return null;const st=parseInt(z[1],10);let dt=parseInt(z[2],10);dt=dt>=1&&dt<=12?dt-1:0;let ft=parseInt(z[3],10);ft=ft>=1&&ft<=31?ft:1;let pt=parseInt(z[4],10);pt=pt>=0&&pt<=23?pt:0;let U=parseInt(z[5],10);U=U>=0&&U<=59?U:0;let x=parseInt(z[6],10);x=x>=0&&x<=59?x:0;const A=z[7]||"Z";let L=parseInt(z[8],10);L=L>=0&&L<=23?L:0;let q=parseInt(z[9],10)||0;return q=q>=0&&q<=59?q:0,A==="-"?(pt+=L,U+=q):A==="+"&&(pt-=L,U-=q),new Date(Date.UTC(st,dt,ft,pt,U,x))}}e.PDFDateString=_;function b(lt,{scale:Q=1,rotation:z=0}){const{width:st,height:dt}=lt.attributes.style,ft=[0,0,parseInt(st),parseInt(dt)];return new w({viewBox:ft,scale:Q,rotation:z})}function m(lt){if(lt.startsWith("#")){const Q=parseInt(lt.slice(1),16);return[(Q&16711680)>>16,(Q&65280)>>8,Q&255]}return lt.startsWith("rgb(")?lt.slice(4,-1).split(",").map(Q=>parseInt(Q)):lt.startsWith("rgba(")?lt.slice(5,-1).split(",").map(Q=>parseInt(Q)).slice(0,3):((0,i.warn)(`Not a valid color format: "${lt}"`),[0,0,0])}function I(lt){const Q=document.createElement("span");Q.style.visibility="hidden",document.body.append(Q);for(const z of lt.keys()){Q.style.color=z;const st=window.getComputedStyle(Q).color;lt.set(z,m(st))}Q.remove()}function j(lt){const{a:Q,b:z,c:st,d:dt,e:ft,f:pt}=lt.getTransform();return[Q,z,st,dt,ft,pt]}function Y(lt){const{a:Q,b:z,c:st,d:dt,e:ft,f:pt}=lt.getTransform().invertSelf();return[Q,z,st,dt,ft,pt]}},(t,e,s)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.BaseStandardFontDataFactory=e.BaseSVGFactory=e.BaseCanvasFactory=e.BaseCMapReaderFactory=void 0;var n=s(1);class i{constructor(){this.constructor===i&&(0,n.unreachable)("Cannot initialize BaseCanvasFactory.")}create(v,y){if(v<=0||y<=0)throw new Error("Invalid canvas size");const F=this._createCanvas(v,y);return{canvas:F,context:F.getContext("2d")}}reset(v,y,F){if(!v.canvas)throw new Error("Canvas is not specified");if(y<=0||F<=0)throw new Error("Invalid canvas size");v.canvas.width=y,v.canvas.height=F}destroy(v){if(!v.canvas)throw new Error("Canvas is not specified");v.canvas.width=0,v.canvas.height=0,v.canvas=null,v.context=null}_createCanvas(v,y){(0,n.unreachable)("Abstract method `_createCanvas` called.")}}e.BaseCanvasFactory=i;class r{constructor({baseUrl:v=null,isCompressed:y=!1}){this.constructor===r&&(0,n.unreachable)("Cannot initialize BaseCMapReaderFactory."),this.baseUrl=v,this.isCompressed=y}async fetch({name:v}){if(!this.baseUrl)throw new Error('The CMap "baseUrl" parameter must be specified, ensure that the "cMapUrl" and "cMapPacked" API parameters are provided.');if(!v)throw new Error("CMap name must be specified.");const y=this.baseUrl+v+(this.isCompressed?".bcmap":""),F=this.isCompressed?n.CMapCompressionType.BINARY:n.CMapCompressionType.NONE;return this._fetchData(y,F).catch(k=>{throw new Error(`Unable to load ${this.isCompressed?"binary ":""}CMap at: ${y}`)})}_fetchData(v,y){(0,n.unreachable)("Abstract method `_fetchData` called.")}}e.BaseCMapReaderFactory=r;class h{constructor({baseUrl:v=null}){this.constructor===h&&(0,n.unreachable)("Cannot initialize BaseStandardFontDataFactory."),this.baseUrl=v}async fetch({filename:v}){if(!this.baseUrl)throw new Error('The standard font "baseUrl" parameter must be specified, ensure that the "standardFontDataUrl" API parameter is provided.');if(!v)throw new Error("Font filename must be specified.");const y=`${this.baseUrl}${v}`;return this._fetchData(y).catch(F=>{throw new Error(`Unable to load font data at: ${y}`)})}_fetchData(v){(0,n.unreachable)("Abstract method `_fetchData` called.")}}e.BaseStandardFontDataFactory=h;class T{constructor(){this.constructor===T&&(0,n.unreachable)("Cannot initialize BaseSVGFactory.")}create(v,y,F=!1){if(v<=0||y<=0)throw new Error("Invalid SVG dimensions");const k=this._createSVG("svg:svg");return k.setAttribute("version","1.1"),F||(k.setAttribute("width",`${v}px`),k.setAttribute("height",`${y}px`)),k.setAttribute("preserveAspectRatio","none"),k.setAttribute("viewBox",`0 0 ${v} ${y}`),k}createElement(v){if(typeof v!="string")throw new Error("Invalid SVG element type");return this._createSVG(v)}_createSVG(v){(0,n.unreachable)("Abstract method `_createSVG` called.")}}e.BaseSVGFactory=T},(t,e,s)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.MurmurHash3_64=void 0;var n=s(1);const i=3285377520,r=4294901760,h=65535;class T{constructor(v){this.h1=v?v&4294967295:i,this.h2=v?v&4294967295:i}update(v){let y,F;if(typeof v=="string"){y=new Uint8Array(v.length*2),F=0;for(let V=0,_=v.length;V<_;V++){const b=v.charCodeAt(V);b<=255?y[F++]=b:(y[F++]=b>>>8,y[F++]=b&255)}}else if((0,n.isArrayBuffer)(v))y=v.slice(),F=y.byteLength;else throw new Error("Wrong data format in MurmurHash3_64_update. Input must be a string or array.");const k=F>>2,w=F-k*4,f=new Uint32Array(y.buffer,0,k);let a=0,u=0,g=this.h1,R=this.h2;const S=3432918353,d=461845907,O=S&h,M=d&h;for(let V=0;V<k;V++)V&1?(a=f[V],a=a*S&r|a*O&h,a=a<<15|a>>>17,a=a*d&r|a*M&h,g^=a,g=g<<13|g>>>19,g=g*5+3864292196):(u=f[V],u=u*S&r|u*O&h,u=u<<15|u>>>17,u=u*d&r|u*M&h,R^=u,R=R<<13|R>>>19,R=R*5+3864292196);switch(a=0,w){case 3:a^=y[k*4+2]<<16;case 2:a^=y[k*4+1]<<8;case 1:a^=y[k*4],a=a*S&r|a*O&h,a=a<<15|a>>>17,a=a*d&r|a*M&h,k&1?g^=a:R^=a}this.h1=g,this.h2=R}hexdigest(){let v=this.h1,y=this.h2;v^=y>>>1,v=v*3981806797&r|v*36045&h,y=y*4283543511&r|((y<<16|v>>>16)*2950163797&r)>>>16,v^=y>>>1,v=v*444984403&r|v*60499&h,y=y*3301882366&r|((y<<16|v>>>16)*3120437893&r)>>>16,v^=y>>>1;const F=(v>>>0).toString(16),k=(y>>>0).toString(16);return F.padStart(8,"0")+k.padStart(8,"0")}}e.MurmurHash3_64=T},(t,e,s)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.FontLoader=e.FontFaceObject=void 0;var n=s(1);class i{constructor({docId:E,onUnsupportedFeature:v,ownerDocument:y=globalThis.document,styleElement:F=null}){this.constructor===i&&(0,n.unreachable)("Cannot initialize BaseFontLoader."),this.docId=E,this._onUnsupportedFeature=v,this._document=y,this.nativeFontFaces=[],this.styleElement=null}addNativeFontFace(E){this.nativeFontFaces.push(E),this._document.fonts.add(E)}insertRule(E){let v=this.styleElement;v||(v=this.styleElement=this._document.createElement("style"),v.id=`PDFJS_FONT_STYLE_TAG_${this.docId}`,this._document.documentElement.getElementsByTagName("head")[0].append(v));const y=v.sheet;y.insertRule(E,y.cssRules.length)}clear(){for(const E of this.nativeFontFaces)this._document.fonts.delete(E);this.nativeFontFaces.length=0,this.styleElement&&(this.styleElement.remove(),this.styleElement=null)}async bind(E){if(E.attached||E.missingFile)return;if(E.attached=!0,this.isFontLoadingAPISupported){const y=E.createNativeFontFace();if(y){this.addNativeFontFace(y);try{await y.loaded}catch(F){throw this._onUnsupportedFeature({featureId:n.UNSUPPORTED_FEATURES.errorFontLoadNative}),(0,n.warn)(`Failed to load font '${y.family}': '${F}'.`),E.disableFontFace=!0,F}}return}const v=E.createFontFaceRule();if(v){if(this.insertRule(v),this.isSyncFontLoadingSupported)return;await new Promise(y=>{const F=this._queueLoadingCallback(y);this._prepareFontLoadEvent([v],[E],F)})}}_queueLoadingCallback(E){(0,n.unreachable)("Abstract method `_queueLoadingCallback`.")}get isFontLoadingAPISupported(){var v;const E=!!((v=this._document)!=null&&v.fonts);return(0,n.shadow)(this,"isFontLoadingAPISupported",E)}get isSyncFontLoadingSupported(){(0,n.unreachable)("Abstract method `isSyncFontLoadingSupported`.")}get _loadTestFont(){(0,n.unreachable)("Abstract method `_loadTestFont`.")}_prepareFontLoadEvent(E,v,y){(0,n.unreachable)("Abstract method `_prepareFontLoadEvent`.")}}let r;e.FontLoader=r,e.FontLoader=r=class extends i{constructor(E){super(E),this.loadingContext={requests:[],nextRequestId:0},this.loadTestFontId=0}get isSyncFontLoadingSupported(){let E=!1;if(typeof navigator>"u")E=!0;else{const v=/Mozilla\/5.0.*?rv:(\d+).*? Gecko/.exec(navigator.userAgent);(v==null?void 0:v[1])>=14&&(E=!0)}return(0,n.shadow)(this,"isSyncFontLoadingSupported",E)}_queueLoadingCallback(E){function v(){for((0,n.assert)(!F.done,"completeRequest() cannot be called twice."),F.done=!0;y.requests.length>0&&y.requests[0].done;){const k=y.requests.shift();setTimeout(k.callback,0)}}const y=this.loadingContext,F={id:`pdfjs-font-loading-${y.nextRequestId++}`,done:!1,complete:v,callback:E};return y.requests.push(F),F}get _loadTestFont(){const E=function(){return atob("T1RUTwALAIAAAwAwQ0ZGIDHtZg4AAAOYAAAAgUZGVE1lkzZwAAAEHAAAABxHREVGABQAFQAABDgAAAAeT1MvMlYNYwkAAAEgAAAAYGNtYXABDQLUAAACNAAAAUJoZWFk/xVFDQAAALwAAAA2aGhlYQdkA+oAAAD0AAAAJGhtdHgD6AAAAAAEWAAAAAZtYXhwAAJQAAAAARgAAAAGbmFtZVjmdH4AAAGAAAAAsXBvc3T/hgAzAAADeAAAACAAAQAAAAEAALZRFsRfDzz1AAsD6AAAAADOBOTLAAAAAM4KHDwAAAAAA+gDIQAAAAgAAgAAAAAAAAABAAADIQAAAFoD6AAAAAAD6AABAAAAAAAAAAAAAAAAAAAAAQAAUAAAAgAAAAQD6AH0AAUAAAKKArwAAACMAooCvAAAAeAAMQECAAACAAYJAAAAAAAAAAAAAQAAAAAAAAAAAAAAAFBmRWQAwAAuAC4DIP84AFoDIQAAAAAAAQAAAAAAAAAAACAAIAABAAAADgCuAAEAAAAAAAAAAQAAAAEAAAAAAAEAAQAAAAEAAAAAAAIAAQAAAAEAAAAAAAMAAQAAAAEAAAAAAAQAAQAAAAEAAAAAAAUAAQAAAAEAAAAAAAYAAQAAAAMAAQQJAAAAAgABAAMAAQQJAAEAAgABAAMAAQQJAAIAAgABAAMAAQQJAAMAAgABAAMAAQQJAAQAAgABAAMAAQQJAAUAAgABAAMAAQQJAAYAAgABWABYAAAAAAAAAwAAAAMAAAAcAAEAAAAAADwAAwABAAAAHAAEACAAAAAEAAQAAQAAAC7//wAAAC7////TAAEAAAAAAAABBgAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAMAAAAAAAD/gwAyAAAAAQAAAAAAAAAAAAAAAAAAAAABAAQEAAEBAQJYAAEBASH4DwD4GwHEAvgcA/gXBIwMAYuL+nz5tQXkD5j3CBLnEQACAQEBIVhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYAAABAQAADwACAQEEE/t3Dov6fAH6fAT+fPp8+nwHDosMCvm1Cvm1DAz6fBQAAAAAAAABAAAAAMmJbzEAAAAAzgTjFQAAAADOBOQpAAEAAAAAAAAADAAUAAQAAAABAAAAAgABAAAAAAAAAAAD6AAAAAAAAA==")};return(0,n.shadow)(this,"_loadTestFont",E())}_prepareFontLoadEvent(E,v,y){function F(Y,X){return Y.charCodeAt(X)<<24|Y.charCodeAt(X+1)<<16|Y.charCodeAt(X+2)<<8|Y.charCodeAt(X+3)&255}function k(Y,X,lt,Q){const z=Y.substring(0,X),st=Y.substring(X+lt);return z+Q+st}let w,f;const a=this._document.createElement("canvas");a.width=1,a.height=1;const u=a.getContext("2d");let g=0;function R(Y,X){if(g++,g>30){(0,n.warn)("Load test font never loaded."),X();return}if(u.font="30px "+Y,u.fillText(".",0,20),u.getImageData(0,0,1,1).data[3]>0){X();return}setTimeout(R.bind(null,Y,X))}const S=`lt${Date.now()}${this.loadTestFontId++}`;let d=this._loadTestFont;d=k(d,976,S.length,S);const M=16,V=1482184792;let _=F(d,M);for(w=0,f=S.length-3;w<f;w+=4)_=_-V+F(S,w)|0;w<S.length&&(_=_-V+F(S+"XXX",w)|0),d=k(d,M,4,(0,n.string32)(_));const b=`url(data:font/opentype;base64,${btoa(d)});`,m=`@font-face {font-family:"${S}";src:${b}}`;this.insertRule(m);const I=[];for(const Y of v)I.push(Y.loadedName);I.push(S);const j=this._document.createElement("div");j.style.visibility="hidden",j.style.width=j.style.height="10px",j.style.position="absolute",j.style.top=j.style.left="0px";for(const Y of I){const X=this._document.createElement("span");X.textContent="Hi",X.style.fontFamily=Y,j.append(X)}this._document.body.append(j),R(S,()=>{j.remove(),y.complete()})}};class h{constructor(E,{isEvalSupported:v=!0,disableFontFace:y=!1,ignoreErrors:F=!1,onUnsupportedFeature:k,fontRegistry:w=null}){this.compiledGlyphs=Object.create(null);for(const f in E)this[f]=E[f];this.isEvalSupported=v!==!1,this.disableFontFace=y===!0,this.ignoreErrors=F===!0,this._onUnsupportedFeature=k,this.fontRegistry=w}createNativeFontFace(){if(!this.data||this.disableFontFace)return null;let E;if(!this.cssFontInfo)E=new FontFace(this.loadedName,this.data,{});else{const v={weight:this.cssFontInfo.fontWeight};this.cssFontInfo.italicAngle&&(v.style=`oblique ${this.cssFontInfo.italicAngle}deg`),E=new FontFace(this.cssFontInfo.fontFamily,this.data,v)}return this.fontRegistry&&this.fontRegistry.registerFont(this),E}createFontFaceRule(){if(!this.data||this.disableFontFace)return null;const E=(0,n.bytesToString)(this.data),v=`url(data:${this.mimetype};base64,${btoa(E)});`;let y;if(!this.cssFontInfo)y=`@font-face {font-family:"${this.loadedName}";src:${v}}`;else{let F=`font-weight: ${this.cssFontInfo.fontWeight};`;this.cssFontInfo.italicAngle&&(F+=`font-style: oblique ${this.cssFontInfo.italicAngle}deg;`),y=`@font-face {font-family:"${this.cssFontInfo.fontFamily}";${F}src:${v}}`}return this.fontRegistry&&this.fontRegistry.registerFont(this,v),y}getPathGenerator(E,v){if(this.compiledGlyphs[v]!==void 0)return this.compiledGlyphs[v];let y;try{y=E.get(this.loadedName+"_path_"+v)}catch(F){if(!this.ignoreErrors)throw F;return this._onUnsupportedFeature({featureId:n.UNSUPPORTED_FEATURES.errorFontGetPath}),(0,n.warn)(`getPathGenerator - ignoring character: "${F}".`),this.compiledGlyphs[v]=function(k,w){}}if(this.isEvalSupported&&n.FeatureTest.isEvalSupported){const F=[];for(const k of y){const w=k.args!==void 0?k.args.join(","):"";F.push("c.",k.cmd,"(",w,`);
`)}return this.compiledGlyphs[v]=new Function("c","size",F.join(""))}return this.compiledGlyphs[v]=function(F,k){for(const w of y)w.cmd==="scale"&&(w.args=[k,-k]),F[w.cmd].apply(F,w.args)}}}e.FontFaceObject=h},(t,e,s)=>{var dt,ue;Object.defineProperty(e,"__esModule",{value:!0}),e.CanvasGraphics=void 0;var n=s(8),i=s(1),r=s(13),h=s(14),T=s(3);const E=16,v=100,y=4096,F=15,k=10,w=T.isNodeJS&&typeof Path2D>"u"?-1:1e3,f=16;function a(U,x){if(U._removeMirroring)throw new Error("Context is already forwarding operations.");U.__originalSave=U.save,U.__originalRestore=U.restore,U.__originalRotate=U.rotate,U.__originalScale=U.scale,U.__originalTranslate=U.translate,U.__originalTransform=U.transform,U.__originalSetTransform=U.setTransform,U.__originalResetTransform=U.resetTransform,U.__originalClip=U.clip,U.__originalMoveTo=U.moveTo,U.__originalLineTo=U.lineTo,U.__originalBezierCurveTo=U.bezierCurveTo,U.__originalRect=U.rect,U.__originalClosePath=U.closePath,U.__originalBeginPath=U.beginPath,U._removeMirroring=()=>{U.save=U.__originalSave,U.restore=U.__originalRestore,U.rotate=U.__originalRotate,U.scale=U.__originalScale,U.translate=U.__originalTranslate,U.transform=U.__originalTransform,U.setTransform=U.__originalSetTransform,U.resetTransform=U.__originalResetTransform,U.clip=U.__originalClip,U.moveTo=U.__originalMoveTo,U.lineTo=U.__originalLineTo,U.bezierCurveTo=U.__originalBezierCurveTo,U.rect=U.__originalRect,U.closePath=U.__originalClosePath,U.beginPath=U.__originalBeginPath,delete U._removeMirroring},U.save=function(){x.save(),this.__originalSave()},U.restore=function(){x.restore(),this.__originalRestore()},U.translate=function(L,q){x.translate(L,q),this.__originalTranslate(L,q)},U.scale=function(L,q){x.scale(L,q),this.__originalScale(L,q)},U.transform=function(L,q,$,G,nt,at){x.transform(L,q,$,G,nt,at),this.__originalTransform(L,q,$,G,nt,at)},U.setTransform=function(L,q,$,G,nt,at){x.setTransform(L,q,$,G,nt,at),this.__originalSetTransform(L,q,$,G,nt,at)},U.resetTransform=function(){x.resetTransform(),this.__originalResetTransform()},U.rotate=function(L){x.rotate(L),this.__originalRotate(L)},U.clip=function(L){x.clip(L),this.__originalClip(L)},U.moveTo=function(A,L){x.moveTo(A,L),this.__originalMoveTo(A,L)},U.lineTo=function(A,L){x.lineTo(A,L),this.__originalLineTo(A,L)},U.bezierCurveTo=function(A,L,q,$,G,nt){x.bezierCurveTo(A,L,q,$,G,nt),this.__originalBezierCurveTo(A,L,q,$,G,nt)},U.rect=function(A,L,q,$){x.rect(A,L,q,$),this.__originalRect(A,L,q,$)},U.closePath=function(){x.closePath(),this.__originalClosePath()},U.beginPath=function(){x.beginPath(),this.__originalBeginPath()}}class u{constructor(x){this.canvasFactory=x,this.cache=Object.create(null)}getCanvas(x,A,L){let q;return this.cache[x]!==void 0?(q=this.cache[x],this.canvasFactory.reset(q,A,L)):(q=this.canvasFactory.create(A,L),this.cache[x]=q),q}delete(x){delete this.cache[x]}clear(){for(const x in this.cache){const A=this.cache[x];this.canvasFactory.destroy(A),delete this.cache[x]}}}function g(U,x,A,L,q,$,G,nt,at,c){const[P,o,l,C,N,H]=(0,n.getCurrentTransform)(U);if(o===0&&l===0){const rt=G*P+N,K=Math.round(rt),Z=nt*C+H,ht=Math.round(Z),D=(G+at)*P+N,ct=Math.abs(Math.round(D)-K)||1,vt=(nt+c)*C+H,bt=Math.abs(Math.round(vt)-ht)||1;return U.setTransform(Math.sign(P),0,0,Math.sign(C),K,ht),U.drawImage(x,A,L,q,$,0,0,ct,bt),U.setTransform(P,o,l,C,N,H),[ct,bt]}if(P===0&&C===0){const rt=nt*l+N,K=Math.round(rt),Z=G*o+H,ht=Math.round(Z),D=(nt+c)*l+N,ct=Math.abs(Math.round(D)-K)||1,vt=(G+at)*o+H,bt=Math.abs(Math.round(vt)-ht)||1;return U.setTransform(0,Math.sign(o),Math.sign(l),0,K,ht),U.drawImage(x,A,L,q,$,0,0,bt,ct),U.setTransform(P,o,l,C,N,H),[bt,ct]}U.drawImage(x,A,L,q,$,G,nt,at,c);const it=Math.hypot(P,o),W=Math.hypot(l,C);return[it*at,W*c]}function R(U){const{width:x,height:A}=U;if(x>w||A>w)return null;const L=1e3,q=new Uint8Array([0,2,4,0,1,0,5,4,8,10,0,8,0,2,1,0]),$=x+1;let G=new Uint8Array($*(A+1)),nt,at,c;const P=x+7&-8;let o=new Uint8Array(P*A),l=0;for(const W of U.data){let rt=128;for(;rt>0;)o[l++]=W&rt?0:255,rt>>=1}let C=0;for(l=0,o[l]!==0&&(G[0]=1,++C),at=1;at<x;at++)o[l]!==o[l+1]&&(G[at]=o[l]?2:1,++C),l++;for(o[l]!==0&&(G[at]=2,++C),nt=1;nt<A;nt++){l=nt*P,c=nt*$,o[l-P]!==o[l]&&(G[c]=o[l]?1:8,++C);let W=(o[l]?4:0)+(o[l-P]?8:0);for(at=1;at<x;at++)W=(W>>2)+(o[l+1]?4:0)+(o[l-P+1]?8:0),q[W]&&(G[c+at]=q[W],++C),l++;if(o[l-P]!==o[l]&&(G[c+at]=o[l]?2:4,++C),C>L)return null}for(l=P*(A-1),c=nt*$,o[l]!==0&&(G[c]=8,++C),at=1;at<x;at++)o[l]!==o[l+1]&&(G[c+at]=o[l]?4:8,++C),l++;if(o[l]!==0&&(G[c+at]=4,++C),C>L)return null;const N=new Int32Array([0,$,-1,0,-$,0,0,0,1]),H=new Path2D;for(nt=0;C&&nt<=A;nt++){let W=nt*$;const rt=W+x;for(;W<rt&&!G[W];)W++;if(W===rt)continue;H.moveTo(W%$,nt);const K=W;let Z=G[W];do{const ht=N[Z];do W+=ht;while(!G[W]);const D=G[W];D!==5&&D!==10?(Z=D,G[W]=0):(Z=D&51*Z>>4,G[W]&=Z>>2|Z<<2),H.lineTo(W%$,W/$|0),G[W]||--C}while(K!==W);--nt}return o=null,G=null,function(W){W.save(),W.scale(1/x,-1/A),W.translate(0,-A),W.fill(H),W.beginPath(),W.restore()}}class S{constructor(x,A){this.alphaIsShape=!1,this.fontSize=0,this.fontSizeScale=1,this.textMatrix=i.IDENTITY_MATRIX,this.textMatrixScale=1,this.fontMatrix=i.FONT_IDENTITY_MATRIX,this.leading=0,this.x=0,this.y=0,this.lineX=0,this.lineY=0,this.charSpacing=0,this.wordSpacing=0,this.textHScale=1,this.textRenderingMode=i.TextRenderingMode.FILL,this.textRise=0,this.fillColor="#000000",this.strokeColor="#000000",this.patternFill=!1,this.fillAlpha=1,this.strokeAlpha=1,this.lineWidth=1,this.activeSMask=null,this.transferMaps=null,this.startNewPathAndClipBox([0,0,x,A])}clone(){const x=Object.create(this);return x.clipBox=this.clipBox.slice(),x}setCurrentPoint(x,A){this.x=x,this.y=A}updatePathMinMax(x,A,L){[A,L]=i.Util.applyTransform([A,L],x),this.minX=Math.min(this.minX,A),this.minY=Math.min(this.minY,L),this.maxX=Math.max(this.maxX,A),this.maxY=Math.max(this.maxY,L)}updateRectMinMax(x,A){const L=i.Util.applyTransform(A,x),q=i.Util.applyTransform(A.slice(2),x);this.minX=Math.min(this.minX,L[0],q[0]),this.minY=Math.min(this.minY,L[1],q[1]),this.maxX=Math.max(this.maxX,L[0],q[0]),this.maxY=Math.max(this.maxY,L[1],q[1])}updateScalingPathMinMax(x,A){i.Util.scaleMinMax(x,A),this.minX=Math.min(this.minX,A[0]),this.maxX=Math.max(this.maxX,A[1]),this.minY=Math.min(this.minY,A[2]),this.maxY=Math.max(this.maxY,A[3])}updateCurvePathMinMax(x,A,L,q,$,G,nt,at,c,P){const o=i.Util.bezierBoundingBox(A,L,q,$,G,nt,at,c);if(P){P[0]=Math.min(P[0],o[0],o[2]),P[1]=Math.max(P[1],o[0],o[2]),P[2]=Math.min(P[2],o[1],o[3]),P[3]=Math.max(P[3],o[1],o[3]);return}this.updateRectMinMax(x,o)}getPathBoundingBox(x=r.PathType.FILL,A=null){const L=[this.minX,this.minY,this.maxX,this.maxY];if(x===r.PathType.STROKE){A||(0,i.unreachable)("Stroke bounding box must include transform.");const q=i.Util.singularValueDecompose2dScale(A),$=q[0]*this.lineWidth/2,G=q[1]*this.lineWidth/2;L[0]-=$,L[1]-=G,L[2]+=$,L[3]+=G}return L}updateClipFromPath(){const x=i.Util.intersect(this.clipBox,this.getPathBoundingBox());this.startNewPathAndClipBox(x||[0,0,0,0])}isEmptyClip(){return this.minX===1/0}startNewPathAndClipBox(x){this.clipBox=x,this.minX=1/0,this.minY=1/0,this.maxX=0,this.maxY=0}getClippedPathBoundingBox(x=r.PathType.FILL,A=null){return i.Util.intersect(this.clipBox,this.getPathBoundingBox(x,A))}}function d(U,x,A=null){if(typeof ImageData<"u"&&x instanceof ImageData){U.putImageData(x,0,0);return}const L=x.height,q=x.width,$=L%f,G=(L-$)/f,nt=$===0?G:G+1,at=U.createImageData(q,f);let c=0,P;const o=x.data,l=at.data;let C,N,H,it,W,rt,K,Z;if(A)switch(A.length){case 1:W=A[0],rt=A[0],K=A[0],Z=A[0];break;case 4:W=A[0],rt=A[1],K=A[2],Z=A[3];break}if(x.kind===i.ImageKind.GRAYSCALE_1BPP){const ht=o.byteLength,D=new Uint32Array(l.buffer,0,l.byteLength>>2),ct=D.length,vt=q+7>>3;let bt=4294967295,xt=i.FeatureTest.isLittleEndian?4278190080:255;for(Z&&Z[0]===255&&Z[255]===0&&([bt,xt]=[xt,bt]),C=0;C<nt;C++){for(H=C<G?f:$,P=0,N=0;N<H;N++){const Et=ht-c;let Rt=0;const Pt=Et>vt?q:Et*8-7,Nt=Pt&-8;let Tt=0,It=0;for(;Rt<Nt;Rt+=8)It=o[c++],D[P++]=It&128?bt:xt,D[P++]=It&64?bt:xt,D[P++]=It&32?bt:xt,D[P++]=It&16?bt:xt,D[P++]=It&8?bt:xt,D[P++]=It&4?bt:xt,D[P++]=It&2?bt:xt,D[P++]=It&1?bt:xt;for(;Rt<Pt;Rt++)Tt===0&&(It=o[c++],Tt=128),D[P++]=It&Tt?bt:xt,Tt>>=1}for(;P<ct;)D[P++]=0;U.putImageData(at,0,C*f)}}else if(x.kind===i.ImageKind.RGBA_32BPP){const ht=!!(W||rt||K);for(N=0,it=q*f*4,C=0;C<G;C++){if(l.set(o.subarray(c,c+it)),c+=it,ht)for(let D=0;D<it;D+=4)W&&(l[D+0]=W[l[D+0]]),rt&&(l[D+1]=rt[l[D+1]]),K&&(l[D+2]=K[l[D+2]]);U.putImageData(at,0,N),N+=f}if(C<nt){if(it=q*$*4,l.set(o.subarray(c,c+it)),ht)for(let D=0;D<it;D+=4)W&&(l[D+0]=W[l[D+0]]),rt&&(l[D+1]=rt[l[D+1]]),K&&(l[D+2]=K[l[D+2]]);U.putImageData(at,0,N)}}else if(x.kind===i.ImageKind.RGB_24BPP){const ht=!!(W||rt||K);for(H=f,it=q*H,C=0;C<nt;C++){for(C>=G&&(H=$,it=q*H),P=0,N=it;N--;)l[P++]=o[c++],l[P++]=o[c++],l[P++]=o[c++],l[P++]=255;if(ht)for(let D=0;D<P;D+=4)W&&(l[D+0]=W[l[D+0]]),rt&&(l[D+1]=rt[l[D+1]]),K&&(l[D+2]=K[l[D+2]]);U.putImageData(at,0,C*f)}}else throw new Error(`bad image kind: ${x.kind}`)}function O(U,x){if(x.bitmap){U.drawImage(x.bitmap,0,0);return}const A=x.height,L=x.width,q=A%f,$=(A-q)/f,G=q===0?$:$+1,nt=U.createImageData(L,f);let at=0;const c=x.data,P=nt.data;for(let o=0;o<G;o++){const l=o<$?f:q;({srcPos:at}=(0,h.applyMaskImageData)({src:c,srcPos:at,dest:P,width:L,height:l})),U.putImageData(nt,0,o*f)}}function M(U,x){const A=["strokeStyle","fillStyle","fillRule","globalAlpha","lineWidth","lineCap","lineJoin","miterLimit","globalCompositeOperation","font"];for(let L=0,q=A.length;L<q;L++){const $=A[L];U[$]!==void 0&&(x[$]=U[$])}U.setLineDash!==void 0&&(x.setLineDash(U.getLineDash()),x.lineDashOffset=U.lineDashOffset)}function V(U,x){U.strokeStyle=U.fillStyle=x||"#000000",U.fillRule="nonzero",U.globalAlpha=1,U.lineWidth=1,U.lineCap="butt",U.lineJoin="miter",U.miterLimit=10,U.globalCompositeOperation="source-over",U.font="10px sans-serif",U.setLineDash!==void 0&&(U.setLineDash([]),U.lineDashOffset=0)}function _(U,x,A,L){const q=U.length;for(let $=3;$<q;$+=4){const G=U[$];if(G===0)U[$-3]=x,U[$-2]=A,U[$-1]=L;else if(G<255){const nt=255-G;U[$-3]=U[$-3]*G+x*nt>>8,U[$-2]=U[$-2]*G+A*nt>>8,U[$-1]=U[$-1]*G+L*nt>>8}}}function b(U,x,A){const L=U.length,q=1/255;for(let $=3;$<L;$+=4){const G=A?A[U[$]]:U[$];x[$]=x[$]*G*q|0}}function m(U,x,A){const L=U.length;for(let q=3;q<L;q+=4){const $=U[q-3]*77+U[q-2]*152+U[q-1]*28;x[q]=A?x[q]*A[$>>8]>>8:x[q]*$>>16}}function I(U,x,A,L,q,$,G,nt,at,c,P){const o=!!$,l=o?$[0]:0,C=o?$[1]:0,N=o?$[2]:0;let H;q==="Luminosity"?H=m:H=b;const W=Math.min(L,Math.ceil(1048576/A));for(let rt=0;rt<L;rt+=W){const K=Math.min(W,L-rt),Z=U.getImageData(nt-c,rt+(at-P),A,K),ht=x.getImageData(nt,rt+at,A,K);o&&_(Z.data,l,C,N),H(Z.data,ht.data,G),x.putImageData(ht,nt,rt+at)}}function j(U,x,A,L){const q=L[0],$=L[1],G=L[2]-q,nt=L[3]-$;G===0||nt===0||(I(x.context,A,G,nt,x.subtype,x.backdrop,x.transferMap,q,$,x.offsetX,x.offsetY),U.save(),U.globalAlpha=1,U.globalCompositeOperation="source-over",U.setTransform(1,0,0,1,0,0),U.drawImage(A.canvas,0,0),U.restore())}function Y(U,x){const A=i.Util.singularValueDecompose2dScale(U);A[0]=Math.fround(A[0]),A[1]=Math.fround(A[1]);const L=Math.fround((globalThis.devicePixelRatio||1)*n.PixelsPerInch.PDF_TO_CSS_UNITS);return x!==void 0?x:A[0]<=L||A[1]<=L}const X=["butt","round","square"],lt=["miter","round","bevel"],Q={},z={},pt=class pt{constructor(x,A,L,q,$,G,nt,at){gt(this,dt);this.ctx=x,this.current=new S(this.ctx.canvas.width,this.ctx.canvas.height),this.stateStack=[],this.pendingClip=null,this.pendingEOFill=!1,this.res=null,this.xobjs=null,this.commonObjs=A,this.objs=L,this.canvasFactory=q,this.imageLayer=$,this.groupStack=[],this.processingType3=null,this.baseTransform=null,this.baseTransformStack=[],this.groupLevel=0,this.smaskStack=[],this.smaskCounter=0,this.tempSMask=null,this.suspendedCtx=null,this.contentVisible=!0,this.markedContentStack=[],this.optionalContentConfig=G,this.cachedCanvases=new u(this.canvasFactory),this.cachedPatterns=new Map,this.annotationCanvasMap=nt,this.viewportScale=1,this.outputScaleX=1,this.outputScaleY=1,this.backgroundColor=(at==null?void 0:at.background)||null,this.foregroundColor=(at==null?void 0:at.foreground)||null,this._cachedScaleForStroking=null,this._cachedGetSinglePixelWidth=null,this._cachedBitmapsMap=new Map}getObject(x,A=null){return typeof x=="string"?x.startsWith("g_")?this.commonObjs.get(x):this.objs.get(x):A}beginDrawing({transform:x,viewport:A,transparency:L=!1,background:q=null}){const $=this.ctx.canvas.width,G=this.ctx.canvas.height,nt=q||"#ffffff";if(this.ctx.save(),this.foregroundColor&&this.backgroundColor){this.ctx.fillStyle=this.foregroundColor;const at=this.foregroundColor=this.ctx.fillStyle;this.ctx.fillStyle=this.backgroundColor;const c=this.backgroundColor=this.ctx.fillStyle;let P=!0,o=nt;if(this.ctx.fillStyle=nt,o=this.ctx.fillStyle,P=typeof o=="string"&&/^#[0-9A-Fa-f]{6}$/.test(o),at==="#000000"&&c==="#ffffff"||at===c||!P)this.foregroundColor=this.backgroundColor=null;else{const[l,C,N]=(0,n.getRGB)(o),H=W=>(W/=255,W<=.03928?W/12.92:((W+.055)/1.055)**2.4),it=Math.round(.2126*H(l)+.7152*H(C)+.0722*H(N));this.selectColor=(W,rt,K)=>{const Z=.2126*H(W)+.7152*H(rt)+.0722*H(K);return Math.round(Z)===it?c:at}}}if(this.ctx.fillStyle=this.backgroundColor||nt,this.ctx.fillRect(0,0,$,G),this.ctx.restore(),L){const at=this.cachedCanvases.getCanvas("transparent",$,G);this.compositeCtx=this.ctx,this.transparentCanvas=at.canvas,this.ctx=at.context,this.ctx.save(),this.ctx.transform(...(0,n.getCurrentTransform)(this.compositeCtx))}this.ctx.save(),V(this.ctx,this.foregroundColor),x&&(this.ctx.transform(...x),this.outputScaleX=x[0],this.outputScaleY=x[0]),this.ctx.transform(...A.transform),this.viewportScale=A.scale,this.baseTransform=(0,n.getCurrentTransform)(this.ctx),this.imageLayer&&((0,n.deprecated)("The `imageLayer` functionality will be removed in the future."),this.imageLayer.beginLayout())}executeOperatorList(x,A,L,q){const $=x.argsArray,G=x.fnArray;let nt=A||0;const at=$.length;if(at===nt)return nt;const c=at-nt>k&&typeof L=="function",P=c?Date.now()+F:0;let o=0;const l=this.commonObjs,C=this.objs;let N;for(;;){if(q!==void 0&&nt===q.nextBreakPoint)return q.breakIt(nt,L),nt;if(N=G[nt],N!==i.OPS.dependency)this[N].apply(this,$[nt]);else for(const H of $[nt]){const it=H.startsWith("g_")?l:C;if(!it.has(H))return it.get(H,L),nt}if(nt++,nt===at)return nt;if(c&&++o>k){if(Date.now()>P)return L(),nt;o=0}}}endDrawing(){mt(this,dt,ue).call(this),this.cachedCanvases.clear(),this.cachedPatterns.clear();for(const x of this._cachedBitmapsMap.values()){for(const A of x.values())typeof HTMLCanvasElement<"u"&&A instanceof HTMLCanvasElement&&(A.width=A.height=0);x.clear()}this._cachedBitmapsMap.clear(),this.imageLayer&&this.imageLayer.endLayout()}_scaleImage(x,A){const L=x.width,q=x.height;let $=Math.max(Math.hypot(A[0],A[1]),1),G=Math.max(Math.hypot(A[2],A[3]),1),nt=L,at=q,c="prescale1",P,o;for(;$>2&&nt>1||G>2&&at>1;){let l=nt,C=at;$>2&&nt>1&&(l=Math.ceil(nt/2),$/=nt/l),G>2&&at>1&&(C=Math.ceil(at/2),G/=at/C),P=this.cachedCanvases.getCanvas(c,l,C),o=P.context,o.clearRect(0,0,l,C),o.drawImage(x,0,0,nt,at,0,0,l,C),x=P.canvas,nt=l,at=C,c=c==="prescale1"?"prescale2":"prescale1"}return{img:x,paintWidth:nt,paintHeight:at}}_createMaskCanvas(x){const A=this.ctx,{width:L,height:q}=x,$=this.current.fillColor,G=this.current.patternFill,nt=(0,n.getCurrentTransform)(A);let at,c,P,o;if((x.bitmap||x.data)&&x.count>1){const ct=x.bitmap||x.data.buffer,vt=nt.slice(0,4);c=JSON.stringify(G?vt:[vt,$]),at=this._cachedBitmapsMap.get(ct),at||(at=new Map,this._cachedBitmapsMap.set(ct,at));const bt=at.get(c);if(bt&&!G){const xt=Math.round(Math.min(nt[0],nt[2])+nt[4]),Et=Math.round(Math.min(nt[1],nt[3])+nt[5]);return{canvas:bt,offsetX:xt,offsetY:Et}}P=bt}P||(o=this.cachedCanvases.getCanvas("maskCanvas",L,q),O(o.context,x));let l=i.Util.transform(nt,[1/L,0,0,-1/q,0,0]);l=i.Util.transform(l,[1,0,0,1,0,-q]);const C=i.Util.applyTransform([0,0],l),N=i.Util.applyTransform([L,q],l),H=i.Util.normalizeRect([C[0],C[1],N[0],N[1]]),it=Math.round(H[2]-H[0])||1,W=Math.round(H[3]-H[1])||1,rt=this.cachedCanvases.getCanvas("fillCanvas",it,W),K=rt.context,Z=Math.min(C[0],N[0]),ht=Math.min(C[1],N[1]);K.translate(-Z,-ht),K.transform(...l),P||(P=this._scaleImage(o.canvas,(0,n.getCurrentTransformInverse)(K)),P=P.img,at&&G&&at.set(c,P)),K.imageSmoothingEnabled=Y((0,n.getCurrentTransform)(K),x.interpolate),g(K,P,0,0,P.width,P.height,0,0,L,q),K.globalCompositeOperation="source-in";const D=i.Util.transform((0,n.getCurrentTransformInverse)(K),[1,0,0,1,-Z,-ht]);return K.fillStyle=G?$.getPattern(A,this,D,r.PathType.FILL):$,K.fillRect(0,0,L,q),at&&!G&&(this.cachedCanvases.delete("fillCanvas"),at.set(c,rt.canvas)),{canvas:rt.canvas,offsetX:Math.round(Z),offsetY:Math.round(ht)}}setLineWidth(x){x!==this.current.lineWidth&&(this._cachedScaleForStroking=null),this.current.lineWidth=x,this.ctx.lineWidth=x}setLineCap(x){this.ctx.lineCap=X[x]}setLineJoin(x){this.ctx.lineJoin=lt[x]}setMiterLimit(x){this.ctx.miterLimit=x}setDash(x,A){const L=this.ctx;L.setLineDash!==void 0&&(L.setLineDash(x),L.lineDashOffset=A)}setRenderingIntent(x){}setFlatness(x){}setGState(x){for(let A=0,L=x.length;A<L;A++){const q=x[A],$=q[0],G=q[1];switch($){case"LW":this.setLineWidth(G);break;case"LC":this.setLineCap(G);break;case"LJ":this.setLineJoin(G);break;case"ML":this.setMiterLimit(G);break;case"D":this.setDash(G[0],G[1]);break;case"RI":this.setRenderingIntent(G);break;case"FL":this.setFlatness(G);break;case"Font":this.setFont(G[0],G[1]);break;case"CA":this.current.strokeAlpha=q[1];break;case"ca":this.current.fillAlpha=q[1],this.ctx.globalAlpha=q[1];break;case"BM":this.ctx.globalCompositeOperation=G;break;case"SMask":this.current.activeSMask=G?this.tempSMask:null,this.tempSMask=null,this.checkSMaskState();break;case"TR":this.current.transferMaps=G}}}get inSMaskMode(){return!!this.suspendedCtx}checkSMaskState(){const x=this.inSMaskMode;this.current.activeSMask&&!x?this.beginSMaskMode():!this.current.activeSMask&&x&&this.endSMaskMode()}beginSMaskMode(){if(this.inSMaskMode)throw new Error("beginSMaskMode called while already in smask mode");const x=this.ctx.canvas.width,A=this.ctx.canvas.height,L="smaskGroupAt"+this.groupLevel,q=this.cachedCanvases.getCanvas(L,x,A);this.suspendedCtx=this.ctx,this.ctx=q.context;const $=this.ctx;$.setTransform(...(0,n.getCurrentTransform)(this.suspendedCtx)),M(this.suspendedCtx,$),a($,this.suspendedCtx),this.setGState([["BM","source-over"],["ca",1],["CA",1]])}endSMaskMode(){if(!this.inSMaskMode)throw new Error("endSMaskMode called while not in smask mode");this.ctx._removeMirroring(),M(this.ctx,this.suspendedCtx),this.ctx=this.suspendedCtx,this.suspendedCtx=null}compose(x){if(!this.current.activeSMask)return;x?(x[0]=Math.floor(x[0]),x[1]=Math.floor(x[1]),x[2]=Math.ceil(x[2]),x[3]=Math.ceil(x[3])):x=[0,0,this.ctx.canvas.width,this.ctx.canvas.height];const A=this.current.activeSMask,L=this.suspendedCtx;j(L,A,this.ctx,x),this.ctx.save(),this.ctx.setTransform(1,0,0,1,0,0),this.ctx.clearRect(0,0,this.ctx.canvas.width,this.ctx.canvas.height),this.ctx.restore()}save(){this.inSMaskMode?(M(this.ctx,this.suspendedCtx),this.suspendedCtx.save()):this.ctx.save();const x=this.current;this.stateStack.push(x),this.current=x.clone()}restore(){this.stateStack.length===0&&this.inSMaskMode&&this.endSMaskMode(),this.stateStack.length!==0&&(this.current=this.stateStack.pop(),this.inSMaskMode?(this.suspendedCtx.restore(),M(this.suspendedCtx,this.ctx)):this.ctx.restore(),this.checkSMaskState(),this.pendingClip=null,this._cachedScaleForStroking=null,this._cachedGetSinglePixelWidth=null)}transform(x,A,L,q,$,G){this.ctx.transform(x,A,L,q,$,G),this._cachedScaleForStroking=null,this._cachedGetSinglePixelWidth=null}constructPath(x,A,L){const q=this.ctx,$=this.current;let G=$.x,nt=$.y,at,c;const P=(0,n.getCurrentTransform)(q),o=P[0]===0&&P[3]===0||P[1]===0&&P[2]===0,l=o?L.slice(0):null;for(let C=0,N=0,H=x.length;C<H;C++)switch(x[C]|0){case i.OPS.rectangle:G=A[N++],nt=A[N++];const it=A[N++],W=A[N++],rt=G+it,K=nt+W;q.moveTo(G,nt),it===0||W===0?q.lineTo(rt,K):(q.lineTo(rt,nt),q.lineTo(rt,K),q.lineTo(G,K)),o||$.updateRectMinMax(P,[G,nt,rt,K]),q.closePath();break;case i.OPS.moveTo:G=A[N++],nt=A[N++],q.moveTo(G,nt),o||$.updatePathMinMax(P,G,nt);break;case i.OPS.lineTo:G=A[N++],nt=A[N++],q.lineTo(G,nt),o||$.updatePathMinMax(P,G,nt);break;case i.OPS.curveTo:at=G,c=nt,G=A[N+4],nt=A[N+5],q.bezierCurveTo(A[N],A[N+1],A[N+2],A[N+3],G,nt),$.updateCurvePathMinMax(P,at,c,A[N],A[N+1],A[N+2],A[N+3],G,nt,l),N+=6;break;case i.OPS.curveTo2:at=G,c=nt,q.bezierCurveTo(G,nt,A[N],A[N+1],A[N+2],A[N+3]),$.updateCurvePathMinMax(P,at,c,G,nt,A[N],A[N+1],A[N+2],A[N+3],l),G=A[N+2],nt=A[N+3],N+=4;break;case i.OPS.curveTo3:at=G,c=nt,G=A[N+2],nt=A[N+3],q.bezierCurveTo(A[N],A[N+1],G,nt,G,nt),$.updateCurvePathMinMax(P,at,c,A[N],A[N+1],G,nt,G,nt,l),N+=4;break;case i.OPS.closePath:q.closePath();break}o&&$.updateScalingPathMinMax(P,l),$.setCurrentPoint(G,nt)}closePath(){this.ctx.closePath()}stroke(x){x=typeof x<"u"?x:!0;const A=this.ctx,L=this.current.strokeColor;A.globalAlpha=this.current.strokeAlpha,this.contentVisible&&(typeof L=="object"&&(L!=null&&L.getPattern)?(A.save(),A.strokeStyle=L.getPattern(A,this,(0,n.getCurrentTransformInverse)(A),r.PathType.STROKE),this.rescaleAndStroke(!1),A.restore()):this.rescaleAndStroke(!0)),x&&this.consumePath(this.current.getClippedPathBoundingBox()),A.globalAlpha=this.current.fillAlpha}closeStroke(){this.closePath(),this.stroke()}fill(x){x=typeof x<"u"?x:!0;const A=this.ctx,L=this.current.fillColor,q=this.current.patternFill;let $=!1;q&&(A.save(),A.fillStyle=L.getPattern(A,this,(0,n.getCurrentTransformInverse)(A),r.PathType.FILL),$=!0);const G=this.current.getClippedPathBoundingBox();this.contentVisible&&G!==null&&(this.pendingEOFill?(A.fill("evenodd"),this.pendingEOFill=!1):A.fill()),$&&A.restore(),x&&this.consumePath(G)}eoFill(){this.pendingEOFill=!0,this.fill()}fillStroke(){this.fill(!1),this.stroke(!1),this.consumePath()}eoFillStroke(){this.pendingEOFill=!0,this.fillStroke()}closeFillStroke(){this.closePath(),this.fillStroke()}closeEOFillStroke(){this.pendingEOFill=!0,this.closePath(),this.fillStroke()}endPath(){this.consumePath()}clip(){this.pendingClip=Q}eoClip(){this.pendingClip=z}beginText(){this.current.textMatrix=i.IDENTITY_MATRIX,this.current.textMatrixScale=1,this.current.x=this.current.lineX=0,this.current.y=this.current.lineY=0}endText(){const x=this.pendingTextPaths,A=this.ctx;if(x===void 0){A.beginPath();return}A.save(),A.beginPath();for(const L of x)A.setTransform(...L.transform),A.translate(L.x,L.y),L.addToPath(A,L.fontSize);A.restore(),A.clip(),A.beginPath(),delete this.pendingTextPaths}setCharSpacing(x){this.current.charSpacing=x}setWordSpacing(x){this.current.wordSpacing=x}setHScale(x){this.current.textHScale=x/100}setLeading(x){this.current.leading=-x}setFont(x,A){const L=this.commonObjs.get(x),q=this.current;if(!L)throw new Error(`Can't find font for ${x}`);if(q.fontMatrix=L.fontMatrix||i.FONT_IDENTITY_MATRIX,(q.fontMatrix[0]===0||q.fontMatrix[3]===0)&&(0,i.warn)("Invalid font matrix for font "+x),A<0?(A=-A,q.fontDirection=-1):q.fontDirection=1,this.current.font=L,this.current.fontSize=A,L.isType3Font)return;const $=L.loadedName||"sans-serif";let G="normal";L.black?G="900":L.bold&&(G="bold");const nt=L.italic?"italic":"normal",at=`"${$}", ${L.fallbackName}`;let c=A;A<E?c=E:A>v&&(c=v),this.current.fontSizeScale=A/c,this.ctx.font=`${nt} ${G} ${c}px ${at}`}setTextRenderingMode(x){this.current.textRenderingMode=x}setTextRise(x){this.current.textRise=x}moveText(x,A){this.current.x=this.current.lineX+=x,this.current.y=this.current.lineY+=A}setLeadingMoveText(x,A){this.setLeading(-A),this.moveText(x,A)}setTextMatrix(x,A,L,q,$,G){this.current.textMatrix=[x,A,L,q,$,G],this.current.textMatrixScale=Math.hypot(x,A),this.current.x=this.current.lineX=0,this.current.y=this.current.lineY=0}nextLine(){this.moveText(0,this.current.leading)}paintChar(x,A,L,q){const $=this.ctx,G=this.current,nt=G.font,at=G.textRenderingMode,c=G.fontSize/G.fontSizeScale,P=at&i.TextRenderingMode.FILL_STROKE_MASK,o=!!(at&i.TextRenderingMode.ADD_TO_PATH_FLAG),l=G.patternFill&&!nt.missingFile;let C;(nt.disableFontFace||o||l)&&(C=nt.getPathGenerator(this.commonObjs,x)),nt.disableFontFace||l?($.save(),$.translate(A,L),$.beginPath(),C($,c),q&&$.setTransform(...q),(P===i.TextRenderingMode.FILL||P===i.TextRenderingMode.FILL_STROKE)&&$.fill(),(P===i.TextRenderingMode.STROKE||P===i.TextRenderingMode.FILL_STROKE)&&$.stroke(),$.restore()):((P===i.TextRenderingMode.FILL||P===i.TextRenderingMode.FILL_STROKE)&&$.fillText(x,A,L),(P===i.TextRenderingMode.STROKE||P===i.TextRenderingMode.FILL_STROKE)&&$.strokeText(x,A,L)),o&&(this.pendingTextPaths||(this.pendingTextPaths=[])).push({transform:(0,n.getCurrentTransform)($),x:A,y:L,fontSize:c,addToPath:C})}get isFontSubpixelAAEnabled(){const{context:x}=this.cachedCanvases.getCanvas("isFontSubpixelAAEnabled",10,10);x.scale(1.5,1),x.fillText("I",0,10);const A=x.getImageData(0,0,10,10).data;let L=!1;for(let q=3;q<A.length;q+=4)if(A[q]>0&&A[q]<255){L=!0;break}return(0,i.shadow)(this,"isFontSubpixelAAEnabled",L)}showText(x){const A=this.current,L=A.font;if(L.isType3Font)return this.showType3Text(x);const q=A.fontSize;if(q===0)return;const $=this.ctx,G=A.fontSizeScale,nt=A.charSpacing,at=A.wordSpacing,c=A.fontDirection,P=A.textHScale*c,o=x.length,l=L.vertical,C=l?1:-1,N=L.defaultVMetrics,H=q*A.fontMatrix[0],it=A.textRenderingMode===i.TextRenderingMode.FILL&&!L.disableFontFace&&!A.patternFill;$.save(),$.transform(...A.textMatrix),$.translate(A.x,A.y+A.textRise),c>0?$.scale(P,-1):$.scale(P,1);let W;if(A.patternFill){$.save();const D=A.fillColor.getPattern($,this,(0,n.getCurrentTransformInverse)($),r.PathType.FILL);W=(0,n.getCurrentTransform)($),$.restore(),$.fillStyle=D}let rt=A.lineWidth;const K=A.textMatrixScale;if(K===0||rt===0){const D=A.textRenderingMode&i.TextRenderingMode.FILL_STROKE_MASK;(D===i.TextRenderingMode.STROKE||D===i.TextRenderingMode.FILL_STROKE)&&(rt=this.getSinglePixelWidth())}else rt/=K;G!==1&&($.scale(G,G),rt/=G),$.lineWidth=rt;let Z=0,ht;for(ht=0;ht<o;++ht){const D=x[ht];if(typeof D=="number"){Z+=C*D*q/1e3;continue}let ct=!1;const vt=(D.isSpace?at:0)+nt,bt=D.fontChar,xt=D.accent;let Et,Rt,Pt=D.width;if(l){const Tt=D.vmetric||N,It=-(D.vmetric?Tt[1]:Pt*.5)*H,Yt=Tt[2]*H;Pt=Tt?-Tt[0]:Pt,Et=It/G,Rt=(Z+Yt)/G}else Et=Z/G,Rt=0;if(L.remeasure&&Pt>0){const Tt=$.measureText(bt).width*1e3/q*G;if(Pt<Tt&&this.isFontSubpixelAAEnabled){const It=Pt/Tt;ct=!0,$.save(),$.scale(It,1),Et/=It}else Pt!==Tt&&(Et+=(Pt-Tt)/2e3*q/G)}if(this.contentVisible&&(D.isInFont||L.missingFile)){if(it&&!xt)$.fillText(bt,Et,Rt);else if(this.paintChar(bt,Et,Rt,W),xt){const Tt=Et+q*xt.offset.x/G,It=Rt-q*xt.offset.y/G;this.paintChar(xt.fontChar,Tt,It,W)}}let Nt;l?Nt=Pt*H-vt*c:Nt=Pt*H+vt*c,Z+=Nt,ct&&$.restore()}l?A.y-=Z:A.x+=Z*P,$.restore(),this.compose()}showType3Text(x){const A=this.ctx,L=this.current,q=L.font,$=L.fontSize,G=L.fontDirection,nt=q.vertical?1:-1,at=L.charSpacing,c=L.wordSpacing,P=L.textHScale*G,o=L.fontMatrix||i.FONT_IDENTITY_MATRIX,l=x.length,C=L.textRenderingMode===i.TextRenderingMode.INVISIBLE;let N,H,it,W;if(!(C||$===0)){for(this._cachedScaleForStroking=null,this._cachedGetSinglePixelWidth=null,A.save(),A.transform(...L.textMatrix),A.translate(L.x,L.y),A.scale(P,G),N=0;N<l;++N){if(H=x[N],typeof H=="number"){W=nt*H*$/1e3,this.ctx.translate(W,0),L.x+=W*P;continue}const rt=(H.isSpace?c:0)+at,K=q.charProcOperatorList[H.operatorListId];if(!K){(0,i.warn)(`Type3 character "${H.operatorListId}" is not available.`);continue}this.contentVisible&&(this.processingType3=H,this.save(),A.scale($,$),A.transform(...o),this.executeOperatorList(K),this.restore()),it=i.Util.applyTransform([H.width,0],o)[0]*$+rt,A.translate(it,0),L.x+=it*P}A.restore(),this.processingType3=null}}setCharWidth(x,A){}setCharWidthAndBounds(x,A,L,q,$,G){this.ctx.rect(L,q,$-L,G-q),this.ctx.clip(),this.endPath()}getColorN_Pattern(x){let A;if(x[0]==="TilingPattern"){const L=x[1],q=this.baseTransform||(0,n.getCurrentTransform)(this.ctx),$={createCanvasGraphics:G=>new pt(G,this.commonObjs,this.objs,this.canvasFactory)};A=new r.TilingPattern(x,L,this.ctx,$,q)}else A=this._getPattern(x[1],x[2]);return A}setStrokeColorN(){this.current.strokeColor=this.getColorN_Pattern(arguments)}setFillColorN(){this.current.fillColor=this.getColorN_Pattern(arguments),this.current.patternFill=!0}setStrokeRGBColor(x,A,L){var $;const q=(($=this.selectColor)==null?void 0:$.call(this,x,A,L))||i.Util.makeHexColor(x,A,L);this.ctx.strokeStyle=q,this.current.strokeColor=q}setFillRGBColor(x,A,L){var $;const q=(($=this.selectColor)==null?void 0:$.call(this,x,A,L))||i.Util.makeHexColor(x,A,L);this.ctx.fillStyle=q,this.current.fillColor=q,this.current.patternFill=!1}_getPattern(x,A=null){let L;return this.cachedPatterns.has(x)?L=this.cachedPatterns.get(x):(L=(0,r.getShadingPattern)(this.objs.get(x)),this.cachedPatterns.set(x,L)),A&&(L.matrix=A),L}shadingFill(x){if(!this.contentVisible)return;const A=this.ctx;this.save();const L=this._getPattern(x);A.fillStyle=L.getPattern(A,this,(0,n.getCurrentTransformInverse)(A),r.PathType.SHADING);const q=(0,n.getCurrentTransformInverse)(A);if(q){const $=A.canvas,G=$.width,nt=$.height,at=i.Util.applyTransform([0,0],q),c=i.Util.applyTransform([0,nt],q),P=i.Util.applyTransform([G,0],q),o=i.Util.applyTransform([G,nt],q),l=Math.min(at[0],c[0],P[0],o[0]),C=Math.min(at[1],c[1],P[1],o[1]),N=Math.max(at[0],c[0],P[0],o[0]),H=Math.max(at[1],c[1],P[1],o[1]);this.ctx.fillRect(l,C,N-l,H-C)}else this.ctx.fillRect(-1e10,-1e10,2e10,2e10);this.compose(this.current.getClippedPathBoundingBox()),this.restore()}beginInlineImage(){(0,i.unreachable)("Should not call beginInlineImage")}beginImageData(){(0,i.unreachable)("Should not call beginImageData")}paintFormXObjectBegin(x,A){if(this.contentVisible&&(this.save(),this.baseTransformStack.push(this.baseTransform),Array.isArray(x)&&x.length===6&&this.transform(...x),this.baseTransform=(0,n.getCurrentTransform)(this.ctx),A)){const L=A[2]-A[0],q=A[3]-A[1];this.ctx.rect(A[0],A[1],L,q),this.current.updateRectMinMax((0,n.getCurrentTransform)(this.ctx),A),this.clip(),this.endPath()}}paintFormXObjectEnd(){this.contentVisible&&(this.restore(),this.baseTransform=this.baseTransformStack.pop())}beginGroup(x){if(!this.contentVisible)return;this.save(),this.inSMaskMode&&(this.endSMaskMode(),this.current.activeSMask=null);const A=this.ctx;x.isolated||(0,i.info)("TODO: Support non-isolated groups."),x.knockout&&(0,i.warn)("Knockout groups not supported.");const L=(0,n.getCurrentTransform)(A);if(x.matrix&&A.transform(...x.matrix),!x.bbox)throw new Error("Bounding box is required.");let q=i.Util.getAxialAlignedBoundingBox(x.bbox,(0,n.getCurrentTransform)(A));const $=[0,0,A.canvas.width,A.canvas.height];q=i.Util.intersect(q,$)||[0,0,0,0];const G=Math.floor(q[0]),nt=Math.floor(q[1]);let at=Math.max(Math.ceil(q[2])-G,1),c=Math.max(Math.ceil(q[3])-nt,1),P=1,o=1;at>y&&(P=at/y,at=y),c>y&&(o=c/y,c=y),this.current.startNewPathAndClipBox([0,0,at,c]);let l="groupAt"+this.groupLevel;x.smask&&(l+="_smask_"+this.smaskCounter++%2);const C=this.cachedCanvases.getCanvas(l,at,c),N=C.context;N.scale(1/P,1/o),N.translate(-G,-nt),N.transform(...L),x.smask?this.smaskStack.push({canvas:C.canvas,context:N,offsetX:G,offsetY:nt,scaleX:P,scaleY:o,subtype:x.smask.subtype,backdrop:x.smask.backdrop,transferMap:x.smask.transferMap||null,startTransformInverse:null}):(A.setTransform(1,0,0,1,0,0),A.translate(G,nt),A.scale(P,o),A.save()),M(A,N),this.ctx=N,this.setGState([["BM","source-over"],["ca",1],["CA",1]]),this.groupStack.push(A),this.groupLevel++}endGroup(x){if(!this.contentVisible)return;this.groupLevel--;const A=this.ctx,L=this.groupStack.pop();if(this.ctx=L,this.ctx.imageSmoothingEnabled=!1,x.smask)this.tempSMask=this.smaskStack.pop(),this.restore();else{this.ctx.restore();const q=(0,n.getCurrentTransform)(this.ctx);this.restore(),this.ctx.save(),this.ctx.setTransform(...q);const $=i.Util.getAxialAlignedBoundingBox([0,0,A.canvas.width,A.canvas.height],q);this.ctx.drawImage(A.canvas,0,0),this.ctx.restore(),this.compose($)}}beginAnnotation(x,A,L,q,$){if(mt(this,dt,ue).call(this),V(this.ctx,this.foregroundColor),this.ctx.save(),this.save(),this.baseTransform&&this.ctx.setTransform(...this.baseTransform),Array.isArray(A)&&A.length===4){const G=A[2]-A[0],nt=A[3]-A[1];if($&&this.annotationCanvasMap){L=L.slice(),L[4]-=A[0],L[5]-=A[1],A=A.slice(),A[0]=A[1]=0,A[2]=G,A[3]=nt;const[at,c]=i.Util.singularValueDecompose2dScale((0,n.getCurrentTransform)(this.ctx)),{viewportScale:P}=this,o=Math.ceil(G*this.outputScaleX*P),l=Math.ceil(nt*this.outputScaleY*P);this.annotationCanvas=this.canvasFactory.create(o,l);const{canvas:C,context:N}=this.annotationCanvas;this.annotationCanvasMap.set(x,C),this.annotationCanvas.savedCtx=this.ctx,this.ctx=N,this.ctx.setTransform(at,0,0,-c,0,nt*c),V(this.ctx,this.foregroundColor)}else V(this.ctx,this.foregroundColor),this.ctx.rect(A[0],A[1],G,nt),this.ctx.clip(),this.endPath()}this.current=new S(this.ctx.canvas.width,this.ctx.canvas.height),this.transform(...L),this.transform(...q)}endAnnotation(){this.annotationCanvas&&(this.ctx=this.annotationCanvas.savedCtx,delete this.annotationCanvas.savedCtx,delete this.annotationCanvas)}paintImageMaskXObject(x){if(!this.contentVisible)return;const A=x.count;x=this.getObject(x.data,x),x.count=A;const L=this.ctx,q=this.processingType3;if(q&&(q.compiled===void 0&&(q.compiled=R(x)),q.compiled)){q.compiled(L);return}const $=this._createMaskCanvas(x),G=$.canvas;L.save(),L.setTransform(1,0,0,1,0,0),L.drawImage(G,$.offsetX,$.offsetY),L.restore(),this.compose()}paintImageMaskXObjectRepeat(x,A,L=0,q=0,$,G){if(!this.contentVisible)return;x=this.getObject(x.data,x);const nt=this.ctx;nt.save();const at=(0,n.getCurrentTransform)(nt);nt.transform(A,L,q,$,0,0);const c=this._createMaskCanvas(x);nt.setTransform(1,0,0,1,0,0);for(let P=0,o=G.length;P<o;P+=2){const l=i.Util.transform(at,[A,L,q,$,G[P],G[P+1]]),[C,N]=i.Util.applyTransform([0,0],l);nt.drawImage(c.canvas,C,N)}nt.restore(),this.compose()}paintImageMaskXObjectGroup(x){if(!this.contentVisible)return;const A=this.ctx,L=this.current.fillColor,q=this.current.patternFill;for(const $ of x){const{data:G,width:nt,height:at,transform:c}=$,P=this.cachedCanvases.getCanvas("maskCanvas",nt,at),o=P.context;o.save();const l=this.getObject(G,$);O(o,l),o.globalCompositeOperation="source-in",o.fillStyle=q?L.getPattern(o,this,(0,n.getCurrentTransformInverse)(A),r.PathType.FILL):L,o.fillRect(0,0,nt,at),o.restore(),A.save(),A.transform(...c),A.scale(1,-1),g(A,P.canvas,0,0,nt,at,0,-1,1,1),A.restore()}this.compose()}paintImageXObject(x){if(!this.contentVisible)return;const A=this.getObject(x);if(!A){(0,i.warn)("Dependent image isn't ready yet");return}this.paintInlineImageXObject(A)}paintImageXObjectRepeat(x,A,L,q){if(!this.contentVisible)return;const $=this.getObject(x);if(!$){(0,i.warn)("Dependent image isn't ready yet");return}const G=$.width,nt=$.height,at=[];for(let c=0,P=q.length;c<P;c+=2)at.push({transform:[A,0,0,L,q[c],q[c+1]],x:0,y:0,w:G,h:nt});this.paintInlineImageXObjectGroup($,at)}paintInlineImageXObject(x){if(!this.contentVisible)return;const A=x.width,L=x.height,q=this.ctx;this.save(),q.scale(1/A,-1/L);let $;if(typeof HTMLElement=="function"&&x instanceof HTMLElement||!x.data)$=x;else{const c=this.cachedCanvases.getCanvas("inlineImage",A,L),P=c.context;d(P,x,this.current.transferMaps),$=c.canvas}const G=this._scaleImage($,(0,n.getCurrentTransformInverse)(q));q.imageSmoothingEnabled=Y((0,n.getCurrentTransform)(q),x.interpolate);const[nt,at]=g(q,G.img,0,0,G.paintWidth,G.paintHeight,0,-L,A,L);if(this.imageLayer){const[c,P]=i.Util.applyTransform([0,-L],(0,n.getCurrentTransform)(this.ctx));this.imageLayer.appendImage({imgData:x,left:c,top:P,width:nt,height:at})}this.compose(),this.restore()}paintInlineImageXObjectGroup(x,A){if(!this.contentVisible)return;const L=this.ctx,q=x.width,$=x.height,G=this.cachedCanvases.getCanvas("inlineImage",q,$),nt=G.context;d(nt,x,this.current.transferMaps);for(const at of A){if(L.save(),L.transform(...at.transform),L.scale(1,-1),g(L,G.canvas,at.x,at.y,at.w,at.h,0,-1,1,1),this.imageLayer){const[c,P]=i.Util.applyTransform([at.x,at.y],(0,n.getCurrentTransform)(this.ctx));this.imageLayer.appendImage({imgData:x,left:c,top:P,width:q,height:$})}L.restore()}this.compose()}paintSolidColorImageMask(){this.contentVisible&&(this.ctx.fillRect(0,0,1,1),this.compose())}markPoint(x){}markPointProps(x,A){}beginMarkedContent(x){this.markedContentStack.push({visible:!0})}beginMarkedContentProps(x,A){x==="OC"?this.markedContentStack.push({visible:this.optionalContentConfig.isVisible(A)}):this.markedContentStack.push({visible:!0}),this.contentVisible=this.isContentVisible()}endMarkedContent(){this.markedContentStack.pop(),this.contentVisible=this.isContentVisible()}beginCompat(){}endCompat(){}consumePath(x){const A=this.current.isEmptyClip();this.pendingClip&&this.current.updateClipFromPath(),this.pendingClip||this.compose(x);const L=this.ctx;this.pendingClip&&(A||(this.pendingClip===z?L.clip("evenodd"):L.clip()),this.pendingClip=null),this.current.startNewPathAndClipBox(this.current.clipBox),L.beginPath()}getSinglePixelWidth(){if(!this._cachedGetSinglePixelWidth){const x=(0,n.getCurrentTransform)(this.ctx);if(x[1]===0&&x[2]===0)this._cachedGetSinglePixelWidth=1/Math.min(Math.abs(x[0]),Math.abs(x[3]));else{const A=Math.abs(x[0]*x[3]-x[2]*x[1]),L=Math.hypot(x[0],x[2]),q=Math.hypot(x[1],x[3]);this._cachedGetSinglePixelWidth=Math.max(L,q)/A}}return this._cachedGetSinglePixelWidth}getScaleForStroking(){if(!this._cachedScaleForStroking){const{lineWidth:x}=this.current,A=(0,n.getCurrentTransform)(this.ctx);let L,q;if(A[1]===0&&A[2]===0){const $=Math.abs(A[0]),G=Math.abs(A[3]);if(x===0)L=1/$,q=1/G;else{const nt=$*x,at=G*x;L=nt<1?1/nt:1,q=at<1?1/at:1}}else{const $=Math.abs(A[0]*A[3]-A[2]*A[1]),G=Math.hypot(A[0],A[1]),nt=Math.hypot(A[2],A[3]);if(x===0)L=nt/$,q=G/$;else{const at=x*$;L=nt>at?nt/at:1,q=G>at?G/at:1}}this._cachedScaleForStroking=[L,q]}return this._cachedScaleForStroking}rescaleAndStroke(x){const{ctx:A}=this,{lineWidth:L}=this.current,[q,$]=this.getScaleForStroking();if(A.lineWidth=L||1,q===1&&$===1){A.stroke();return}let G,nt,at;x&&(G=(0,n.getCurrentTransform)(A),nt=A.getLineDash().slice(),at=A.lineDashOffset),A.scale(q,$);const c=Math.max(q,$);A.setLineDash(A.getLineDash().map(P=>P/c)),A.lineDashOffset/=c,A.stroke(),x&&(A.setTransform(...G),A.setLineDash(nt),A.lineDashOffset=at)}isContentVisible(){for(let x=this.markedContentStack.length-1;x>=0;x--)if(!this.markedContentStack[x].visible)return!1;return!0}};dt=new WeakSet,ue=function(){for(;this.stateStack.length||this.inSMaskMode;)this.restore();this.ctx.restore(),this.transparentCanvas&&(this.ctx=this.compositeCtx,this.ctx.save(),this.ctx.setTransform(1,0,0,1,0,0),this.ctx.drawImage(this.transparentCanvas,0,0),this.ctx.restore(),this.transparentCanvas=null)};let st=pt;e.CanvasGraphics=st;for(const U in i.OPS)st.prototype[U]!==void 0&&(st.prototype[i.OPS[U]]=st.prototype[U])},(t,e,s)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.TilingPattern=e.PathType=void 0,e.getShadingPattern=f;var n=s(1),i=s(8),r=s(3);const h={FILL:"Fill",STROKE:"Stroke",SHADING:"Shading"};e.PathType=h;function T(g,R){if(!R||r.isNodeJS)return;const S=R[2]-R[0],d=R[3]-R[1],O=new Path2D;O.rect(R[0],R[1],S,d),g.clip(O)}class E{constructor(){this.constructor===E&&(0,n.unreachable)("Cannot initialize BaseShadingPattern.")}getPattern(){(0,n.unreachable)("Abstract method `getPattern` called.")}}class v extends E{constructor(R){super(),this._type=R[1],this._bbox=R[2],this._colorStops=R[3],this._p0=R[4],this._p1=R[5],this._r0=R[6],this._r1=R[7],this.matrix=null}_createGradient(R){let S;this._type==="axial"?S=R.createLinearGradient(this._p0[0],this._p0[1],this._p1[0],this._p1[1]):this._type==="radial"&&(S=R.createRadialGradient(this._p0[0],this._p0[1],this._r0,this._p1[0],this._p1[1],this._r1));for(const d of this._colorStops)S.addColorStop(d[0],d[1]);return S}getPattern(R,S,d,O){let M;if(O===h.STROKE||O===h.FILL){const V=S.current.getClippedPathBoundingBox(O,(0,i.getCurrentTransform)(R))||[0,0,0,0],_=Math.ceil(V[2]-V[0])||1,b=Math.ceil(V[3]-V[1])||1,m=S.cachedCanvases.getCanvas("pattern",_,b,!0),I=m.context;I.clearRect(0,0,I.canvas.width,I.canvas.height),I.beginPath(),I.rect(0,0,I.canvas.width,I.canvas.height),I.translate(-V[0],-V[1]),d=n.Util.transform(d,[1,0,0,1,V[0],V[1]]),I.transform(...S.baseTransform),this.matrix&&I.transform(...this.matrix),T(I,this._bbox),I.fillStyle=this._createGradient(I),I.fill(),M=R.createPattern(m.canvas,"no-repeat");const j=new DOMMatrix(d);try{M.setTransform(j)}catch(Y){(0,n.warn)(`RadialAxialShadingPattern.getPattern: "${Y==null?void 0:Y.message}".`)}}else T(R,this._bbox),M=this._createGradient(R);return M}}function y(g,R,S,d,O,M,V,_){const b=R.coords,m=R.colors,I=g.data,j=g.width*4;let Y;b[S+1]>b[d+1]&&(Y=S,S=d,d=Y,Y=M,M=V,V=Y),b[d+1]>b[O+1]&&(Y=d,d=O,O=Y,Y=V,V=_,_=Y),b[S+1]>b[d+1]&&(Y=S,S=d,d=Y,Y=M,M=V,V=Y);const X=(b[S]+R.offsetX)*R.scaleX,lt=(b[S+1]+R.offsetY)*R.scaleY,Q=(b[d]+R.offsetX)*R.scaleX,z=(b[d+1]+R.offsetY)*R.scaleY,st=(b[O]+R.offsetX)*R.scaleX,dt=(b[O+1]+R.offsetY)*R.scaleY;if(lt>=dt)return;const ft=m[M],pt=m[M+1],U=m[M+2],x=m[V],A=m[V+1],L=m[V+2],q=m[_],$=m[_+1],G=m[_+2],nt=Math.round(lt),at=Math.round(dt);let c,P,o,l,C,N,H,it;for(let W=nt;W<=at;W++){if(W<z){let D;W<lt?D=0:D=(lt-W)/(lt-z),c=X-(X-Q)*D,P=ft-(ft-x)*D,o=pt-(pt-A)*D,l=U-(U-L)*D}else{let D;W>dt?D=1:z===dt?D=0:D=(z-W)/(z-dt),c=Q-(Q-st)*D,P=x-(x-q)*D,o=A-(A-$)*D,l=L-(L-G)*D}let rt;W<lt?rt=0:W>dt?rt=1:rt=(lt-W)/(lt-dt),C=X-(X-st)*rt,N=ft-(ft-q)*rt,H=pt-(pt-$)*rt,it=U-(U-G)*rt;const K=Math.round(Math.min(c,C)),Z=Math.round(Math.max(c,C));let ht=j*W+K*4;for(let D=K;D<=Z;D++)rt=(c-D)/(c-C),rt<0?rt=0:rt>1&&(rt=1),I[ht++]=P-(P-N)*rt|0,I[ht++]=o-(o-H)*rt|0,I[ht++]=l-(l-it)*rt|0,I[ht++]=255}}function F(g,R,S){const d=R.coords,O=R.colors;let M,V;switch(R.type){case"lattice":const _=R.verticesPerRow,b=Math.floor(d.length/_)-1,m=_-1;for(M=0;M<b;M++){let I=M*_;for(let j=0;j<m;j++,I++)y(g,S,d[I],d[I+1],d[I+_],O[I],O[I+1],O[I+_]),y(g,S,d[I+_+1],d[I+1],d[I+_],O[I+_+1],O[I+1],O[I+_])}break;case"triangles":for(M=0,V=d.length;M<V;M+=3)y(g,S,d[M],d[M+1],d[M+2],O[M],O[M+1],O[M+2]);break;default:throw new Error("illegal figure")}}class k extends E{constructor(R){super(),this._coords=R[2],this._colors=R[3],this._figures=R[4],this._bounds=R[5],this._bbox=R[7],this._background=R[8],this.matrix=null}_createMeshCanvas(R,S,d){const _=Math.floor(this._bounds[0]),b=Math.floor(this._bounds[1]),m=Math.ceil(this._bounds[2])-_,I=Math.ceil(this._bounds[3])-b,j=Math.min(Math.ceil(Math.abs(m*R[0]*1.1)),3e3),Y=Math.min(Math.ceil(Math.abs(I*R[1]*1.1)),3e3),X=m/j,lt=I/Y,Q={coords:this._coords,colors:this._colors,offsetX:-_,offsetY:-b,scaleX:1/X,scaleY:1/lt},z=j+2*2,st=Y+2*2,dt=d.getCanvas("mesh",z,st,!1),ft=dt.context,pt=ft.createImageData(j,Y);if(S){const x=pt.data;for(let A=0,L=x.length;A<L;A+=4)x[A]=S[0],x[A+1]=S[1],x[A+2]=S[2],x[A+3]=255}for(const x of this._figures)F(pt,x,Q);return ft.putImageData(pt,2,2),{canvas:dt.canvas,offsetX:_-2*X,offsetY:b-2*lt,scaleX:X,scaleY:lt}}getPattern(R,S,d,O){T(R,this._bbox);let M;if(O===h.SHADING)M=n.Util.singularValueDecompose2dScale((0,i.getCurrentTransform)(R));else if(M=n.Util.singularValueDecompose2dScale(S.baseTransform),this.matrix){const _=n.Util.singularValueDecompose2dScale(this.matrix);M=[M[0]*_[0],M[1]*_[1]]}const V=this._createMeshCanvas(M,O===h.SHADING?null:this._background,S.cachedCanvases);return O!==h.SHADING&&(R.setTransform(...S.baseTransform),this.matrix&&R.transform(...this.matrix)),R.translate(V.offsetX,V.offsetY),R.scale(V.scaleX,V.scaleY),R.createPattern(V.canvas,"no-repeat")}}class w extends E{getPattern(){return"hotpink"}}function f(g){switch(g[0]){case"RadialAxial":return new v(g);case"Mesh":return new k(g);case"Dummy":return new w}throw new Error(`Unknown IR type: ${g[0]}`)}const a={COLORED:1,UNCOLORED:2};class u{static get MAX_PATTERN_SIZE(){return(0,n.shadow)(this,"MAX_PATTERN_SIZE",3e3)}constructor(R,S,d,O,M){this.operatorList=R[2],this.matrix=R[3]||[1,0,0,1,0,0],this.bbox=R[4],this.xstep=R[5],this.ystep=R[6],this.paintType=R[7],this.tilingType=R[8],this.color=S,this.ctx=d,this.canvasGraphicsFactory=O,this.baseTransform=M}createPatternCanvas(R){const S=this.operatorList,d=this.bbox,O=this.xstep,M=this.ystep,V=this.paintType,_=this.tilingType,b=this.color,m=this.canvasGraphicsFactory;(0,n.info)("TilingType: "+_);const I=d[0],j=d[1],Y=d[2],X=d[3],lt=n.Util.singularValueDecompose2dScale(this.matrix),Q=n.Util.singularValueDecompose2dScale(this.baseTransform),z=[lt[0]*Q[0],lt[1]*Q[1]],st=this.getSizeAndScale(O,this.ctx.canvas.width,z[0]),dt=this.getSizeAndScale(M,this.ctx.canvas.height,z[1]),ft=R.cachedCanvases.getCanvas("pattern",st.size,dt.size,!0),pt=ft.context,U=m.createCanvasGraphics(pt);U.groupLevel=R.groupLevel,this.setFillAndStrokeStyleToContext(U,V,b);let x=I,A=j,L=Y,q=X;return I<0&&(x=0,L+=Math.abs(I)),j<0&&(A=0,q+=Math.abs(j)),pt.translate(-(st.scale*x),-(dt.scale*A)),U.transform(st.scale,0,0,dt.scale,0,0),pt.save(),this.clipBbox(U,x,A,L,q),U.baseTransform=(0,i.getCurrentTransform)(U.ctx),U.executeOperatorList(S),U.endDrawing(),{canvas:ft.canvas,scaleX:st.scale,scaleY:dt.scale,offsetX:x,offsetY:A}}getSizeAndScale(R,S,d){R=Math.abs(R);const O=Math.max(u.MAX_PATTERN_SIZE,S);let M=Math.ceil(R*d);return M>=O?M=O:d=M/R,{scale:d,size:M}}clipBbox(R,S,d,O,M){const V=O-S,_=M-d;R.ctx.rect(S,d,V,_),R.current.updateRectMinMax((0,i.getCurrentTransform)(R.ctx),[S,d,O,M]),R.clip(),R.endPath()}setFillAndStrokeStyleToContext(R,S,d){const O=R.ctx,M=R.current;switch(S){case a.COLORED:const V=this.ctx;O.fillStyle=V.fillStyle,O.strokeStyle=V.strokeStyle,M.fillColor=V.fillStyle,M.strokeColor=V.strokeStyle;break;case a.UNCOLORED:const _=n.Util.makeHexColor(d[0],d[1],d[2]);O.fillStyle=_,O.strokeStyle=_,M.fillColor=_,M.strokeColor=_;break;default:throw new n.FormatError(`Unsupported paint type: ${S}`)}}getPattern(R,S,d,O){let M=d;O!==h.SHADING&&(M=n.Util.transform(M,S.baseTransform),this.matrix&&(M=n.Util.transform(M,this.matrix)));const V=this.createPatternCanvas(S);let _=new DOMMatrix(M);_=_.translate(V.offsetX,V.offsetY),_=_.scale(1/V.scaleX,1/V.scaleY);const b=R.createPattern(V.canvas,"repeat");try{b.setTransform(_)}catch(m){(0,n.warn)(`TilingPattern.getPattern: "${m==null?void 0:m.message}".`)}return b}}e.TilingPattern=u},(t,e,s)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.applyMaskImageData=i;var n=s(1);function i({src:r,srcPos:h=0,dest:T,destPos:E=0,width:v,height:y,inverseDecode:F=!1}){const k=n.FeatureTest.isLittleEndian?4278190080:255,[w,f]=F?[0,k]:[k,0],a=v>>3,u=v&7,g=r.length;T=new Uint32Array(T.buffer);for(let R=0;R<y;R++){for(const d=h+a;h<d;h++){const O=h<g?r[h]:255;T[E++]=O&128?f:w,T[E++]=O&64?f:w,T[E++]=O&32?f:w,T[E++]=O&16?f:w,T[E++]=O&8?f:w,T[E++]=O&4?f:w,T[E++]=O&2?f:w,T[E++]=O&1?f:w}if(u===0)continue;const S=h<g?r[h++]:255;for(let d=0;d<u;d++)T[E++]=S&1<<7-d?f:w}return{srcPos:h,destPos:E}}},(t,e)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.GlobalWorkerOptions=void 0;const s=Object.create(null);e.GlobalWorkerOptions=s,s.workerPort=s.workerPort===void 0?null:s.workerPort,s.workerSrc=s.workerSrc===void 0?"":s.workerSrc},(t,e,s)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.MessageHandler=void 0;var n=s(1);const i={UNKNOWN:0,DATA:1,ERROR:2},r={UNKNOWN:0,CANCEL:1,CANCEL_COMPLETE:2,CLOSE:3,ENQUEUE:4,ERROR:5,PULL:6,PULL_COMPLETE:7,START_COMPLETE:8};function h(E){switch(E instanceof Error||typeof E=="object"&&E!==null||(0,n.unreachable)('wrapReason: Expected "reason" to be a (possibly cloned) Error.'),E.name){case"AbortException":return new n.AbortException(E.message);case"MissingPDFException":return new n.MissingPDFException(E.message);case"PasswordException":return new n.PasswordException(E.message,E.code);case"UnexpectedResponseException":return new n.UnexpectedResponseException(E.message,E.status);case"UnknownErrorException":return new n.UnknownErrorException(E.message,E.details);default:return new n.UnknownErrorException(E.message,E.toString())}}class T{constructor(v,y,F){this.sourceName=v,this.targetName=y,this.comObj=F,this.callbackId=1,this.streamId=1,this.streamSinks=Object.create(null),this.streamControllers=Object.create(null),this.callbackCapabilities=Object.create(null),this.actionHandler=Object.create(null),this._onComObjOnMessage=k=>{const w=k.data;if(w.targetName!==this.sourceName)return;if(w.stream){this._processStreamMessage(w);return}if(w.callback){const a=w.callbackId,u=this.callbackCapabilities[a];if(!u)throw new Error(`Cannot resolve callback ${a}`);if(delete this.callbackCapabilities[a],w.callback===i.DATA)u.resolve(w.data);else if(w.callback===i.ERROR)u.reject(h(w.reason));else throw new Error("Unexpected callback case");return}const f=this.actionHandler[w.action];if(!f)throw new Error(`Unknown action from worker: ${w.action}`);if(w.callbackId){const a=this.sourceName,u=w.sourceName;new Promise(function(g){g(f(w.data))}).then(function(g){F.postMessage({sourceName:a,targetName:u,callback:i.DATA,callbackId:w.callbackId,data:g})},function(g){F.postMessage({sourceName:a,targetName:u,callback:i.ERROR,callbackId:w.callbackId,reason:h(g)})});return}if(w.streamId){this._createStreamSink(w);return}f(w.data)},F.addEventListener("message",this._onComObjOnMessage)}on(v,y){const F=this.actionHandler;if(F[v])throw new Error(`There is already an actionName called "${v}"`);F[v]=y}send(v,y,F){this.comObj.postMessage({sourceName:this.sourceName,targetName:this.targetName,action:v,data:y},F)}sendWithPromise(v,y,F){const k=this.callbackId++,w=(0,n.createPromiseCapability)();this.callbackCapabilities[k]=w;try{this.comObj.postMessage({sourceName:this.sourceName,targetName:this.targetName,action:v,callbackId:k,data:y},F)}catch(f){w.reject(f)}return w.promise}sendWithStream(v,y,F,k){const w=this.streamId++,f=this.sourceName,a=this.targetName,u=this.comObj;return new ReadableStream({start:g=>{const R=(0,n.createPromiseCapability)();return this.streamControllers[w]={controller:g,startCall:R,pullCall:null,cancelCall:null,isClosed:!1},u.postMessage({sourceName:f,targetName:a,action:v,streamId:w,data:y,desiredSize:g.desiredSize},k),R.promise},pull:g=>{const R=(0,n.createPromiseCapability)();return this.streamControllers[w].pullCall=R,u.postMessage({sourceName:f,targetName:a,stream:r.PULL,streamId:w,desiredSize:g.desiredSize}),R.promise},cancel:g=>{(0,n.assert)(g instanceof Error,"cancel must have a valid reason");const R=(0,n.createPromiseCapability)();return this.streamControllers[w].cancelCall=R,this.streamControllers[w].isClosed=!0,u.postMessage({sourceName:f,targetName:a,stream:r.CANCEL,streamId:w,reason:h(g)}),R.promise}},F)}_createStreamSink(v){const y=v.streamId,F=this.sourceName,k=v.sourceName,w=this.comObj,f=this,a=this.actionHandler[v.action],u={enqueue(g,R=1,S){if(this.isCancelled)return;const d=this.desiredSize;this.desiredSize-=R,d>0&&this.desiredSize<=0&&(this.sinkCapability=(0,n.createPromiseCapability)(),this.ready=this.sinkCapability.promise),w.postMessage({sourceName:F,targetName:k,stream:r.ENQUEUE,streamId:y,chunk:g},S)},close(){this.isCancelled||(this.isCancelled=!0,w.postMessage({sourceName:F,targetName:k,stream:r.CLOSE,streamId:y}),delete f.streamSinks[y])},error(g){(0,n.assert)(g instanceof Error,"error must have a valid reason"),!this.isCancelled&&(this.isCancelled=!0,w.postMessage({sourceName:F,targetName:k,stream:r.ERROR,streamId:y,reason:h(g)}))},sinkCapability:(0,n.createPromiseCapability)(),onPull:null,onCancel:null,isCancelled:!1,desiredSize:v.desiredSize,ready:null};u.sinkCapability.resolve(),u.ready=u.sinkCapability.promise,this.streamSinks[y]=u,new Promise(function(g){g(a(v.data,u))}).then(function(){w.postMessage({sourceName:F,targetName:k,stream:r.START_COMPLETE,streamId:y,success:!0})},function(g){w.postMessage({sourceName:F,targetName:k,stream:r.START_COMPLETE,streamId:y,reason:h(g)})})}_processStreamMessage(v){const y=v.streamId,F=this.sourceName,k=v.sourceName,w=this.comObj,f=this.streamControllers[y],a=this.streamSinks[y];switch(v.stream){case r.START_COMPLETE:v.success?f.startCall.resolve():f.startCall.reject(h(v.reason));break;case r.PULL_COMPLETE:v.success?f.pullCall.resolve():f.pullCall.reject(h(v.reason));break;case r.PULL:if(!a){w.postMessage({sourceName:F,targetName:k,stream:r.PULL_COMPLETE,streamId:y,success:!0});break}a.desiredSize<=0&&v.desiredSize>0&&a.sinkCapability.resolve(),a.desiredSize=v.desiredSize,new Promise(function(u){u(a.onPull&&a.onPull())}).then(function(){w.postMessage({sourceName:F,targetName:k,stream:r.PULL_COMPLETE,streamId:y,success:!0})},function(u){w.postMessage({sourceName:F,targetName:k,stream:r.PULL_COMPLETE,streamId:y,reason:h(u)})});break;case r.ENQUEUE:if((0,n.assert)(f,"enqueue should have stream controller"),f.isClosed)break;f.controller.enqueue(v.chunk);break;case r.CLOSE:if((0,n.assert)(f,"close should have stream controller"),f.isClosed)break;f.isClosed=!0,f.controller.close(),this._deleteStreamController(f,y);break;case r.ERROR:(0,n.assert)(f,"error should have stream controller"),f.controller.error(h(v.reason)),this._deleteStreamController(f,y);break;case r.CANCEL_COMPLETE:v.success?f.cancelCall.resolve():f.cancelCall.reject(h(v.reason)),this._deleteStreamController(f,y);break;case r.CANCEL:if(!a)break;new Promise(function(u){u(a.onCancel&&a.onCancel(h(v.reason)))}).then(function(){w.postMessage({sourceName:F,targetName:k,stream:r.CANCEL_COMPLETE,streamId:y,success:!0})},function(u){w.postMessage({sourceName:F,targetName:k,stream:r.CANCEL_COMPLETE,streamId:y,reason:h(u)})}),a.sinkCapability.reject(h(v.reason)),a.isCancelled=!0,delete this.streamSinks[y];break;default:throw new Error("Unexpected stream case")}}async _deleteStreamController(v,y){await Promise.allSettled([v.startCall&&v.startCall.promise,v.pullCall&&v.pullCall.promise,v.cancelCall&&v.cancelCall.promise]),delete this.streamControllers[y]}destroy(){this.comObj.removeEventListener("message",this._onComObjOnMessage)}}e.MessageHandler=T},(t,e,s)=>{var r,h;Object.defineProperty(e,"__esModule",{value:!0}),e.Metadata=void 0;var n=s(1);class i{constructor({parsedData:E,rawData:v}){gt(this,r,void 0);gt(this,h,void 0);At(this,r,E),At(this,h,v)}getRaw(){return B(this,h)}get(E){return B(this,r).get(E)??null}getAll(){return(0,n.objectFromMap)(B(this,r))}has(E){return B(this,r).has(E)}}r=new WeakMap,h=new WeakMap,e.Metadata=i},(t,e,s)=>{var T,E,v,y,F,k,fe;Object.defineProperty(e,"__esModule",{value:!0}),e.OptionalContentConfig=void 0;var n=s(1);const i=Symbol("INTERNAL");class r{constructor(a,u){gt(this,T,!0);this.name=a,this.intent=u}get visible(){return B(this,T)}_setVisible(a,u){a!==i&&(0,n.unreachable)("Internal method `_setVisible` called."),At(this,T,u)}}T=new WeakMap;class h{constructor(a){gt(this,k);gt(this,E,!0);gt(this,v,new Map);gt(this,y,null);gt(this,F,null);if(this.name=null,this.creator=null,a!==null){this.name=a.name,this.creator=a.creator,At(this,F,a.order);for(const u of a.groups)B(this,v).set(u.id,new r(u.name,u.intent));if(a.baseState==="OFF")for(const u of B(this,v).values())u._setVisible(i,!1);for(const u of a.on)B(this,v).get(u)._setVisible(i,!0);for(const u of a.off)B(this,v).get(u)._setVisible(i,!1);At(this,y,new Map);for(const[u,g]of B(this,v))B(this,y).set(u,g.visible)}}isVisible(a){if(B(this,v).size===0)return!0;if(!a)return(0,n.warn)("Optional content group not defined."),!0;if(a.type==="OCG")return B(this,v).has(a.id)?B(this,v).get(a.id).visible:((0,n.warn)(`Optional content group not found: ${a.id}`),!0);if(a.type==="OCMD"){if(a.expression)return mt(this,k,fe).call(this,a.expression);if(!a.policy||a.policy==="AnyOn"){for(const u of a.ids){if(!B(this,v).has(u))return(0,n.warn)(`Optional content group not found: ${u}`),!0;if(B(this,v).get(u).visible)return!0}return!1}else if(a.policy==="AllOn"){for(const u of a.ids){if(!B(this,v).has(u))return(0,n.warn)(`Optional content group not found: ${u}`),!0;if(!B(this,v).get(u).visible)return!1}return!0}else if(a.policy==="AnyOff"){for(const u of a.ids){if(!B(this,v).has(u))return(0,n.warn)(`Optional content group not found: ${u}`),!0;if(!B(this,v).get(u).visible)return!0}return!1}else if(a.policy==="AllOff"){for(const u of a.ids){if(!B(this,v).has(u))return(0,n.warn)(`Optional content group not found: ${u}`),!0;if(B(this,v).get(u).visible)return!1}return!0}return(0,n.warn)(`Unknown optional content policy ${a.policy}.`),!0}return(0,n.warn)(`Unknown group type ${a.type}.`),!0}setVisibility(a,u=!0){if(!B(this,v).has(a)){(0,n.warn)(`Optional content group not found: ${a}`);return}B(this,v).get(a)._setVisible(i,!!u),At(this,E,null)}get hasInitialVisibility(){if(B(this,E)!==null)return B(this,E);for(const[a,u]of B(this,v)){const g=B(this,y).get(a);if(u.visible!==g)return At(this,E,!1)}return At(this,E,!0)}getOrder(){return B(this,v).size?B(this,F)?B(this,F).slice():[...B(this,v).keys()]:null}getGroups(){return B(this,v).size>0?(0,n.objectFromMap)(B(this,v)):null}getGroup(a){return B(this,v).get(a)||null}}E=new WeakMap,v=new WeakMap,y=new WeakMap,F=new WeakMap,k=new WeakSet,fe=function(a){const u=a.length;if(u<2)return!0;const g=a[0];for(let R=1;R<u;R++){const S=a[R];let d;if(Array.isArray(S))d=mt(this,k,fe).call(this,S);else if(B(this,v).has(S))d=B(this,v).get(S).visible;else return(0,n.warn)(`Optional content group not found: ${S}`),!0;switch(g){case"And":if(!d)return!1;break;case"Or":if(d)return!0;break;case"Not":return!d;default:return!0}}return g==="And"},e.OptionalContentConfig=h},(t,e,s)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.PDFDataTransportStream=void 0;var n=s(1),i=s(8);class r{constructor(v,y){(0,n.assert)(y,'PDFDataTransportStream - missing required "pdfDataRangeTransport" argument.'),this._queuedChunks=[],this._progressiveDone=v.progressiveDone||!1,this._contentDispositionFilename=v.contentDispositionFilename||null;const F=v.initialData;if((F==null?void 0:F.length)>0){const k=new Uint8Array(F).buffer;this._queuedChunks.push(k)}this._pdfDataRangeTransport=y,this._isStreamingSupported=!v.disableStream,this._isRangeSupported=!v.disableRange,this._contentLength=v.length,this._fullRequestReader=null,this._rangeReaders=[],this._pdfDataRangeTransport.addRangeListener((k,w)=>{this._onReceiveData({begin:k,chunk:w})}),this._pdfDataRangeTransport.addProgressListener((k,w)=>{this._onProgress({loaded:k,total:w})}),this._pdfDataRangeTransport.addProgressiveReadListener(k=>{this._onReceiveData({chunk:k})}),this._pdfDataRangeTransport.addProgressiveDoneListener(()=>{this._onProgressiveDone()}),this._pdfDataRangeTransport.transportReady()}_onReceiveData(v){const y=new Uint8Array(v.chunk).buffer;if(v.begin===void 0)this._fullRequestReader?this._fullRequestReader._enqueue(y):this._queuedChunks.push(y);else{const F=this._rangeReaders.some(function(k){return k._begin!==v.begin?!1:(k._enqueue(y),!0)});(0,n.assert)(F,"_onReceiveData - no `PDFDataTransportStreamRangeReader` instance found.")}}get _progressiveDataLength(){var v;return((v=this._fullRequestReader)==null?void 0:v._loaded)??0}_onProgress(v){if(v.total===void 0){const y=this._rangeReaders[0];y!=null&&y.onProgress&&y.onProgress({loaded:v.loaded})}else{const y=this._fullRequestReader;y!=null&&y.onProgress&&y.onProgress({loaded:v.loaded,total:v.total})}}_onProgressiveDone(){this._fullRequestReader&&this._fullRequestReader.progressiveDone(),this._progressiveDone=!0}_removeRangeReader(v){const y=this._rangeReaders.indexOf(v);y>=0&&this._rangeReaders.splice(y,1)}getFullReader(){(0,n.assert)(!this._fullRequestReader,"PDFDataTransportStream.getFullReader can only be called once.");const v=this._queuedChunks;return this._queuedChunks=null,new h(this,v,this._progressiveDone,this._contentDispositionFilename)}getRangeReader(v,y){if(y<=this._progressiveDataLength)return null;const F=new T(this,v,y);return this._pdfDataRangeTransport.requestDataRange(v,y),this._rangeReaders.push(F),F}cancelAllRequests(v){this._fullRequestReader&&this._fullRequestReader.cancel(v);for(const y of this._rangeReaders.slice(0))y.cancel(v);this._pdfDataRangeTransport.abort()}}e.PDFDataTransportStream=r;class h{constructor(v,y,F=!1,k=null){this._stream=v,this._done=F||!1,this._filename=(0,i.isPdfFile)(k)?k:null,this._queuedChunks=y||[],this._loaded=0;for(const w of this._queuedChunks)this._loaded+=w.byteLength;this._requests=[],this._headersReady=Promise.resolve(),v._fullRequestReader=this,this.onProgress=null}_enqueue(v){this._done||(this._requests.length>0?this._requests.shift().resolve({value:v,done:!1}):this._queuedChunks.push(v),this._loaded+=v.byteLength)}get headersReady(){return this._headersReady}get filename(){return this._filename}get isRangeSupported(){return this._stream._isRangeSupported}get isStreamingSupported(){return this._stream._isStreamingSupported}get contentLength(){return this._stream._contentLength}async read(){if(this._queuedChunks.length>0)return{value:this._queuedChunks.shift(),done:!1};if(this._done)return{value:void 0,done:!0};const v=(0,n.createPromiseCapability)();return this._requests.push(v),v.promise}cancel(v){this._done=!0;for(const y of this._requests)y.resolve({value:void 0,done:!0});this._requests.length=0}progressiveDone(){this._done||(this._done=!0)}}class T{constructor(v,y,F){this._stream=v,this._begin=y,this._end=F,this._queuedChunk=null,this._requests=[],this._done=!1,this.onProgress=null}_enqueue(v){if(!this._done){if(this._requests.length===0)this._queuedChunk=v;else{this._requests.shift().resolve({value:v,done:!1});for(const F of this._requests)F.resolve({value:void 0,done:!0});this._requests.length=0}this._done=!0,this._stream._removeRangeReader(this)}}get isStreamingSupported(){return!1}async read(){if(this._queuedChunk){const y=this._queuedChunk;return this._queuedChunk=null,{value:y,done:!1}}if(this._done)return{value:void 0,done:!0};const v=(0,n.createPromiseCapability)();return this._requests.push(v),v.promise}cancel(v){this._done=!0;for(const y of this._requests)y.resolve({value:void 0,done:!0});this._requests.length=0,this._stream._removeRangeReader(this)}}},(t,e)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.XfaText=void 0;class s{static textContent(i){const r=[],h={items:r,styles:Object.create(null)};function T(E){var F;if(!E)return;let v=null;const y=E.name;if(y==="#text")v=E.value;else if(s.shouldBuildText(y))(F=E==null?void 0:E.attributes)!=null&&F.textContent?v=E.attributes.textContent:E.value&&(v=E.value);else return;if(v!==null&&r.push({str:v}),!!E.children)for(const k of E.children)T(k)}return T(i),h}static shouldBuildText(i){return!(i==="textarea"||i==="input"||i==="option"||i==="select")}}e.XfaText=s},(t,e,s)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.NodeStandardFontDataFactory=e.NodeCanvasFactory=e.NodeCMapReaderFactory=void 0;var n=s(9);const i=function(E){return new Promise((v,y)=>{require$$5.readFile(E,(k,w)=>{if(k||!w){y(new Error(k));return}v(new Uint8Array(w))})})};class r extends n.BaseCanvasFactory{_createCanvas(v,y){return require$$5.createCanvas(v,y)}}e.NodeCanvasFactory=r;class h extends n.BaseCMapReaderFactory{_fetchData(v,y){return i(v).then(F=>({cMapData:F,compressionType:y}))}}e.NodeCMapReaderFactory=h;class T extends n.BaseStandardFontDataFactory{_fetchData(v){return i(v)}}e.NodeStandardFontDataFactory=T},(t,e,s)=>{var E,v,y,F,k,w,f,a,u,pe,R,Fe,d,ge,M,Me;Object.defineProperty(e,"__esModule",{value:!0}),e.AnnotationEditorLayer=void 0;var n=s(7),i=s(1),r=s(23),h=s(24);const _=class _{constructor(m){gt(this,u);gt(this,R);gt(this,d);gt(this,M);gt(this,E,void 0);gt(this,v,!1);gt(this,y,this.pointerup.bind(this));gt(this,F,this.pointerdown.bind(this));gt(this,k,new Map);gt(this,w,!1);gt(this,f,!1);gt(this,a,void 0);_._initialized||(_._initialized=!0,r.FreeTextEditor.initialize(m.l10n),h.InkEditor.initialize(m.l10n),m.uiManager.registerEditorTypes([r.FreeTextEditor,h.InkEditor])),At(this,a,m.uiManager),this.annotationStorage=m.annotationStorage,this.pageIndex=m.pageIndex,this.div=m.div,At(this,E,m.accessibilityManager),B(this,a).addLayer(this)}updateToolbar(m){B(this,a).updateToolbar(m)}updateMode(m=B(this,a).getMode()){mt(this,M,Me).call(this),m===i.AnnotationEditorType.INK?(this.addInkEditorIfNeeded(!1),this.disableClick()):this.enableClick(),B(this,a).unselectAll()}addInkEditorIfNeeded(m){if(!m&&B(this,a).getMode()!==i.AnnotationEditorType.INK)return;if(!m){for(const j of B(this,k).values())if(j.isEmpty()){j.setInBackground();return}}mt(this,d,ge).call(this,{offsetX:0,offsetY:0}).setInBackground()}setEditingState(m){B(this,a).setEditingState(m)}addCommands(m){B(this,a).addCommands(m)}enable(){this.div.style.pointerEvents="auto";for(const m of B(this,k).values())m.enableEditing()}disable(){this.div.style.pointerEvents="none";for(const m of B(this,k).values())m.disableEditing()}setActiveEditor(m){B(this,a).getActive()!==m&&B(this,a).setActiveEditor(m)}enableClick(){this.div.addEventListener("pointerdown",B(this,F)),this.div.addEventListener("pointerup",B(this,y))}disableClick(){this.div.removeEventListener("pointerdown",B(this,F)),this.div.removeEventListener("pointerup",B(this,y))}attach(m){B(this,k).set(m.id,m)}detach(m){var I;B(this,k).delete(m.id),(I=B(this,E))==null||I.removePointerInTextLayer(m.contentDiv)}remove(m){B(this,a).removeEditor(m),this.detach(m),this.annotationStorage.remove(m.id),m.div.style.display="none",setTimeout(()=>{m.div.style.display="",m.div.remove(),m.isAttachedToDOM=!1,document.activeElement===document.body&&B(this,a).focusMainContainer()},0),B(this,f)||this.addInkEditorIfNeeded(!1)}add(m){if(mt(this,u,pe).call(this,m),B(this,a).addEditor(m),this.attach(m),!m.isAttachedToDOM){const I=m.render();this.div.append(I),m.isAttachedToDOM=!0}this.moveEditorInDOM(m),m.onceAdded(),this.addToAnnotationStorage(m)}moveEditorInDOM(m){var I;(I=B(this,E))==null||I.moveElementInDOM(this.div,m.div,m.contentDiv,!0)}addToAnnotationStorage(m){!m.isEmpty()&&!this.annotationStorage.has(m.id)&&this.annotationStorage.setValue(m.id,m)}addOrRebuild(m){m.needsToBeRebuilt()?m.rebuild():this.add(m)}addANewEditor(m){const I=()=>{this.addOrRebuild(m)},j=()=>{m.remove()};this.addCommands({cmd:I,undo:j,mustExec:!0})}addUndoableEditor(m){const I=()=>{this.addOrRebuild(m)},j=()=>{m.remove()};this.addCommands({cmd:I,undo:j,mustExec:!1})}getNextId(){return B(this,a).getId()}deserialize(m){switch(m.annotationType){case i.AnnotationEditorType.FREETEXT:return r.FreeTextEditor.deserialize(m,this);case i.AnnotationEditorType.INK:return h.InkEditor.deserialize(m,this)}return null}setSelected(m){B(this,a).setSelected(m)}toggleSelected(m){B(this,a).toggleSelected(m)}isSelected(m){return B(this,a).isSelected(m)}unselect(m){B(this,a).unselect(m)}pointerup(m){const I=n.KeyboardManager.platform.isMac;if(!(m.button!==0||m.ctrlKey&&I)&&m.target===this.div&&B(this,w)){if(At(this,w,!1),!B(this,v)){At(this,v,!0);return}mt(this,d,ge).call(this,m)}}pointerdown(m){const I=n.KeyboardManager.platform.isMac;if(m.button!==0||m.ctrlKey&&I||m.target!==this.div)return;At(this,w,!0);const j=B(this,a).getActive();At(this,v,!j||j.isEmpty())}drop(m){const I=m.dataTransfer.getData("text/plain"),j=B(this,a).getEditor(I);if(!j)return;m.preventDefault(),m.dataTransfer.dropEffect="move",mt(this,u,pe).call(this,j);const Y=this.div.getBoundingClientRect(),X=m.clientX-Y.x,lt=m.clientY-Y.y;j.translate(X-j.startX,lt-j.startY),this.moveEditorInDOM(j),j.div.focus()}dragover(m){m.preventDefault()}destroy(){var m,I;((m=B(this,a).getActive())==null?void 0:m.parent)===this&&B(this,a).setActiveEditor(null);for(const j of B(this,k).values())(I=B(this,E))==null||I.removePointerInTextLayer(j.contentDiv),j.isAttachedToDOM=!1,j.div.remove(),j.parent=null;this.div=null,B(this,k).clear(),B(this,a).removeLayer(this)}render(m){this.viewport=m.viewport,(0,n.bindEvents)(this,this.div,["dragover","drop"]),this.setDimensions();for(const I of B(this,a).getEditors(this.pageIndex))this.add(I);this.updateMode()}update(m){this.viewport=m.viewport,this.setDimensions(),this.updateMode()}get scaleFactor(){return this.viewport.scale}get pageDimensions(){const[m,I,j,Y]=this.viewport.viewBox,X=j-m,lt=Y-I;return[X,lt]}get viewportBaseDimensions(){const{width:m,height:I,rotation:j}=this.viewport;return j%180===0?[m,I]:[I,m]}setDimensions(){const{width:m,height:I,rotation:j}=this.viewport,Y=j%180!==0,X=Math.floor(m)+"px",lt=Math.floor(I)+"px";this.div.style.width=Y?lt:X,this.div.style.height=Y?X:lt,this.div.setAttribute("data-main-rotation",j)}};E=new WeakMap,v=new WeakMap,y=new WeakMap,F=new WeakMap,k=new WeakMap,w=new WeakMap,f=new WeakMap,a=new WeakMap,u=new WeakSet,pe=function(m){var I;m.parent!==this&&(this.attach(m),m.pageIndex=this.pageIndex,(I=m.parent)==null||I.detach(m),m.parent=this,m.div&&m.isAttachedToDOM&&(m.div.remove(),this.div.append(m.div)))},R=new WeakSet,Fe=function(m){switch(B(this,a).getMode()){case i.AnnotationEditorType.FREETEXT:return new r.FreeTextEditor(m);case i.AnnotationEditorType.INK:return new h.InkEditor(m)}return null},d=new WeakSet,ge=function(m){const I=this.getNextId(),j=mt(this,R,Fe).call(this,{parent:this,id:I,x:m.offsetX,y:m.offsetY});return j&&this.add(j),j},M=new WeakSet,Me=function(){At(this,f,!0);for(const m of B(this,k).values())m.isEmpty()&&m.remove();At(this,f,!1)},Dt(_,"_initialized",!1);let T=_;e.AnnotationEditorLayer=T},(t,e,s)=>{var T,E,v,y,F,k,w,f,Oe,u,Ie,R,De,d,ve;Object.defineProperty(e,"__esModule",{value:!0}),e.FreeTextEditor=void 0;var n=s(1),i=s(7),r=s(6);const M=class M extends r.AnnotationEditor{constructor(b){super({...b,name:"freeTextEditor"});gt(this,f);gt(this,u);gt(this,R);gt(this,d);gt(this,T,this.editorDivBlur.bind(this));gt(this,E,this.editorDivFocus.bind(this));gt(this,v,this.editorDivKeydown.bind(this));gt(this,y,void 0);gt(this,F,"");gt(this,k,!1);gt(this,w,void 0);At(this,y,b.color||M._defaultColor||r.AnnotationEditor._defaultLineColor),At(this,w,b.fontSize||M._defaultFontSize)}static initialize(b){this._l10nPromise=new Map(["free_text_default_content","editor_free_text_aria_label"].map(I=>[I,b.get(I)]));const m=getComputedStyle(document.documentElement);this._internalPadding=parseFloat(m.getPropertyValue("--freetext-padding"))}static updateDefaultParams(b,m){switch(b){case n.AnnotationEditorParamsType.FREETEXT_SIZE:M._defaultFontSize=m;break;case n.AnnotationEditorParamsType.FREETEXT_COLOR:M._defaultColor=m;break}}updateParams(b,m){switch(b){case n.AnnotationEditorParamsType.FREETEXT_SIZE:mt(this,f,Oe).call(this,m);break;case n.AnnotationEditorParamsType.FREETEXT_COLOR:mt(this,u,Ie).call(this,m);break}}static get defaultPropertiesToUpdate(){return[[n.AnnotationEditorParamsType.FREETEXT_SIZE,M._defaultFontSize],[n.AnnotationEditorParamsType.FREETEXT_COLOR,M._defaultColor||r.AnnotationEditor._defaultLineColor]]}get propertiesToUpdate(){return[[n.AnnotationEditorParamsType.FREETEXT_SIZE,B(this,w)],[n.AnnotationEditorParamsType.FREETEXT_COLOR,B(this,y)]]}getInitialTranslation(){return[-M._internalPadding*this.parent.scaleFactor,-(M._internalPadding+B(this,w))*this.parent.scaleFactor]}rebuild(){super.rebuild(),this.div!==null&&(this.isAttachedToDOM||this.parent.add(this))}enableEditMode(){this.isInEditMode()||(this.parent.setEditingState(!1),this.parent.updateToolbar(n.AnnotationEditorType.FREETEXT),super.enableEditMode(),this.enableEditing(),this.overlayDiv.classList.remove("enabled"),this.editorDiv.contentEditable=!0,this.div.draggable=!1,this.editorDiv.addEventListener("keydown",B(this,v)),this.editorDiv.addEventListener("focus",B(this,E)),this.editorDiv.addEventListener("blur",B(this,T)))}disableEditMode(){this.isInEditMode()&&(this.parent.setEditingState(!0),super.disableEditMode(),this.disableEditing(),this.overlayDiv.classList.add("enabled"),this.editorDiv.contentEditable=!1,this.div.draggable=!0,this.editorDiv.removeEventListener("keydown",B(this,v)),this.editorDiv.removeEventListener("focus",B(this,E)),this.editorDiv.removeEventListener("blur",B(this,T)),this.div.focus(),this.isEditing=!1)}focusin(b){super.focusin(b),b.target!==this.editorDiv&&this.editorDiv.focus()}onceAdded(){this.width||(this.enableEditMode(),this.editorDiv.focus())}isEmpty(){return!this.editorDiv||this.editorDiv.innerText.trim()===""}remove(){this.isEditing=!1,this.parent.setEditingState(!0),super.remove()}commit(){super.commit(),B(this,k)||(At(this,k,!0),this.parent.addUndoableEditor(this)),this.disableEditMode(),At(this,F,mt(this,R,De).call(this).trimEnd()),mt(this,d,ve).call(this)}shouldGetKeyboardEvents(){return this.isInEditMode()}dblclick(b){this.enableEditMode(),this.editorDiv.focus()}keydown(b){b.target===this.div&&b.key==="Enter"&&(this.enableEditMode(),this.editorDiv.focus())}editorDivKeydown(b){M._keyboardManager.exec(this,b)}editorDivFocus(b){this.isEditing=!0}editorDivBlur(b){this.isEditing=!1}disableEditing(){this.editorDiv.setAttribute("role","comment"),this.editorDiv.removeAttribute("aria-multiline")}enableEditing(){this.editorDiv.setAttribute("role","textbox"),this.editorDiv.setAttribute("aria-multiline",!0)}render(){if(this.div)return this.div;let b,m;this.width&&(b=this.x,m=this.y),super.render(),this.editorDiv=document.createElement("div"),this.editorDiv.className="internal",this.editorDiv.setAttribute("id",`${this.id}-editor`),this.enableEditing(),M._l10nPromise.get("editor_free_text_aria_label").then(j=>{var Y;return(Y=this.editorDiv)==null?void 0:Y.setAttribute("aria-label",j)}),M._l10nPromise.get("free_text_default_content").then(j=>{var Y;return(Y=this.editorDiv)==null?void 0:Y.setAttribute("default-content",j)}),this.editorDiv.contentEditable=!0;const{style:I}=this.editorDiv;if(I.fontSize=`calc(${B(this,w)}px * var(--scale-factor))`,I.color=B(this,y),this.div.append(this.editorDiv),this.overlayDiv=document.createElement("div"),this.overlayDiv.classList.add("overlay","enabled"),this.div.append(this.overlayDiv),(0,i.bindEvents)(this,this.div,["dblclick","keydown"]),this.width){const[j,Y]=this.parent.viewportBaseDimensions;this.setAt(b*j,m*Y,this.width*j,this.height*Y);for(const X of B(this,F).split(`
`)){const lt=document.createElement("div");lt.append(X?document.createTextNode(X):document.createElement("br")),this.editorDiv.append(lt)}this.div.draggable=!0,this.editorDiv.contentEditable=!1}else this.div.draggable=!1,this.editorDiv.contentEditable=!0;return this.div}get contentDiv(){return this.editorDiv}static deserialize(b,m){const I=super.deserialize(b,m);return At(I,w,b.fontSize),At(I,y,n.Util.makeHexColor(...b.color)),At(I,F,b.value),I}serialize(){if(this.isEmpty())return null;const b=M._internalPadding*this.parent.scaleFactor,m=this.getRect(b,b),I=r.AnnotationEditor._colorManager.convert(getComputedStyle(this.editorDiv).color);return{annotationType:n.AnnotationEditorType.FREETEXT,color:I,fontSize:B(this,w),value:B(this,F),pageIndex:this.parent.pageIndex,rect:m,rotation:this.rotation}}};T=new WeakMap,E=new WeakMap,v=new WeakMap,y=new WeakMap,F=new WeakMap,k=new WeakMap,w=new WeakMap,f=new WeakSet,Oe=function(b){const m=j=>{this.editorDiv.style.fontSize=`calc(${j}px * var(--scale-factor))`,this.translate(0,-(j-B(this,w))*this.parent.scaleFactor),At(this,w,j),mt(this,d,ve).call(this)},I=B(this,w);this.parent.addCommands({cmd:()=>{m(b)},undo:()=>{m(I)},mustExec:!0,type:n.AnnotationEditorParamsType.FREETEXT_SIZE,overwriteIfSameType:!0,keepUndo:!0})},u=new WeakSet,Ie=function(b){const m=B(this,y);this.parent.addCommands({cmd:()=>{At(this,y,b),this.editorDiv.style.color=b},undo:()=>{At(this,y,m),this.editorDiv.style.color=m},mustExec:!0,type:n.AnnotationEditorParamsType.FREETEXT_COLOR,overwriteIfSameType:!0,keepUndo:!0})},R=new WeakSet,De=function(){const b=this.editorDiv.getElementsByTagName("div");if(b.length===0)return this.editorDiv.innerText;const m=[];for(let I=0,j=b.length;I<j;I++){const X=b[I].firstChild;(X==null?void 0:X.nodeName)==="#text"?m.push(X.data):m.push("")}return m.join(`
`)},d=new WeakSet,ve=function(){const[b,m]=this.parent.viewportBaseDimensions,I=this.div.getBoundingClientRect();this.width=I.width/b,this.height=I.height/m},Dt(M,"_freeTextDefaultContent",""),Dt(M,"_l10nPromise"),Dt(M,"_internalPadding",0),Dt(M,"_defaultColor",null),Dt(M,"_defaultFontSize",10),Dt(M,"_keyboardManager",new i.KeyboardManager([[["ctrl+Enter","mac+meta+Enter","Escape","mac+Escape"],M.prototype.commitOrRemove]])),Dt(M,"_type","freetext");let h=M;e.FreeTextEditor=h},(t,e,s)=>{var v,y,F,k,w,f,a,u,g,R,S,d,O,M,V,Ne,b,Le,I,Be,Y,Ve,lt,me,z,je,dt,Ue,pt,$e,x,zt,L,_e,$,ne,nt,ie,c,Qt,o,be,C,ae,H,ye,W,qe,K,He,ht,We,ct,Ae,bt,re,Et,Zt,Pt,Se;Object.defineProperty(e,"__esModule",{value:!0}),e.InkEditor=void 0,Object.defineProperty(e,"fitCurve",{enumerable:!0,get:function(){return r.fitCurve}});var n=s(1),i=s(6),r=s(25),h=s(7);const T=16,Tt=class Tt extends i.AnnotationEditor{constructor(ut){super({...ut,name:"inkEditor"});gt(this,V);gt(this,b);gt(this,I);gt(this,Y);gt(this,lt);gt(this,z);gt(this,dt);gt(this,pt);gt(this,x);gt(this,L);gt(this,$);gt(this,nt);gt(this,c);gt(this,o);gt(this,C);gt(this,W);gt(this,K);gt(this,ht);gt(this,ct);gt(this,bt);gt(this,Et);gt(this,Pt);gt(this,v,0);gt(this,y,0);gt(this,F,0);gt(this,k,this.canvasPointermove.bind(this));gt(this,w,this.canvasPointerleave.bind(this));gt(this,f,this.canvasPointerup.bind(this));gt(this,a,this.canvasPointerdown.bind(this));gt(this,u,!1);gt(this,g,!1);gt(this,R,null);gt(this,S,null);gt(this,d,0);gt(this,O,0);gt(this,M,null);this.color=ut.color||null,this.thickness=ut.thickness||null,this.opacity=ut.opacity||null,this.paths=[],this.bezierPath2D=[],this.currentPath=[],this.scaleFactor=1,this.translationX=this.translationY=0,this.x=0,this.y=0}static initialize(ut){this._l10nPromise=new Map(["editor_ink_canvas_aria_label","editor_ink_aria_label"].map(_t=>[_t,ut.get(_t)]))}static updateDefaultParams(ut,_t){switch(ut){case n.AnnotationEditorParamsType.INK_THICKNESS:Tt._defaultThickness=_t;break;case n.AnnotationEditorParamsType.INK_COLOR:Tt._defaultColor=_t;break;case n.AnnotationEditorParamsType.INK_OPACITY:Tt._defaultOpacity=_t/100;break}}updateParams(ut,_t){switch(ut){case n.AnnotationEditorParamsType.INK_THICKNESS:mt(this,V,Ne).call(this,_t);break;case n.AnnotationEditorParamsType.INK_COLOR:mt(this,b,Le).call(this,_t);break;case n.AnnotationEditorParamsType.INK_OPACITY:mt(this,I,Be).call(this,_t);break}}static get defaultPropertiesToUpdate(){return[[n.AnnotationEditorParamsType.INK_THICKNESS,Tt._defaultThickness],[n.AnnotationEditorParamsType.INK_COLOR,Tt._defaultColor||i.AnnotationEditor._defaultLineColor],[n.AnnotationEditorParamsType.INK_OPACITY,Math.round(Tt._defaultOpacity*100)]]}get propertiesToUpdate(){return[[n.AnnotationEditorParamsType.INK_THICKNESS,this.thickness||Tt._defaultThickness],[n.AnnotationEditorParamsType.INK_COLOR,this.color||Tt._defaultColor||i.AnnotationEditor._defaultLineColor],[n.AnnotationEditorParamsType.INK_OPACITY,Math.round(100*(this.opacity??Tt._defaultOpacity))]]}rebuild(){super.rebuild(),this.div!==null&&(this.canvas||(mt(this,$,ne).call(this),mt(this,nt,ie).call(this)),this.isAttachedToDOM||(this.parent.add(this),mt(this,c,Qt).call(this)),mt(this,Et,Zt).call(this))}remove(){this.canvas!==null&&(this.isEmpty()||this.commit(),this.canvas.width=this.canvas.height=0,this.canvas.remove(),this.canvas=null,B(this,S).disconnect(),At(this,S,null),super.remove())}enableEditMode(){B(this,u)||this.canvas===null||(super.enableEditMode(),this.div.draggable=!1,this.canvas.addEventListener("pointerdown",B(this,a)),this.canvas.addEventListener("pointerup",B(this,f)))}disableEditMode(){!this.isInEditMode()||this.canvas===null||(super.disableEditMode(),this.div.draggable=!this.isEmpty(),this.div.classList.remove("editing"),this.canvas.removeEventListener("pointerdown",B(this,a)),this.canvas.removeEventListener("pointerup",B(this,f)))}onceAdded(){this.div.draggable=!this.isEmpty()}isEmpty(){return this.paths.length===0||this.paths.length===1&&this.paths[0].length===0}commit(){B(this,u)||(super.commit(),this.isEditing=!1,this.disableEditMode(),this.setInForeground(),At(this,u,!0),this.div.classList.add("disabled"),mt(this,Et,Zt).call(this,!0),this.parent.addInkEditorIfNeeded(!0),this.parent.moveEditorInDOM(this),this.div.focus())}focusin(ut){super.focusin(ut),this.enableEditMode()}canvasPointerdown(ut){ut.button!==0||!this.isInEditMode()||B(this,u)||(this.setInForeground(),ut.type!=="mouse"&&this.div.focus(),ut.stopPropagation(),this.canvas.addEventListener("pointerleave",B(this,w)),this.canvas.addEventListener("pointermove",B(this,k)),mt(this,z,je).call(this,ut.offsetX,ut.offsetY))}canvasPointermove(ut){ut.stopPropagation(),mt(this,dt,Ue).call(this,ut.offsetX,ut.offsetY)}canvasPointerup(ut){ut.button===0&&this.isInEditMode()&&this.currentPath.length!==0&&(ut.stopPropagation(),mt(this,L,_e).call(this,ut),this.setInBackground())}canvasPointerleave(ut){mt(this,L,_e).call(this,ut),this.setInBackground()}render(){if(this.div)return this.div;let ut,_t;this.width&&(ut=this.x,_t=this.y),super.render(),Tt._l10nPromise.get("editor_ink_aria_label").then(St=>{var Ct;return(Ct=this.div)==null?void 0:Ct.setAttribute("aria-label",St)});const[ot,J,et,yt]=mt(this,Y,Ve).call(this);if(this.setAt(ot,J,0,0),this.setDims(et,yt),mt(this,$,ne).call(this),this.width){const[St,Ct]=this.parent.viewportBaseDimensions;this.setAt(ut*St,_t*Ct,this.width*St,this.height*Ct),At(this,g,!0),mt(this,c,Qt).call(this),this.setDims(this.width*St,this.height*Ct),mt(this,x,zt).call(this),mt(this,Pt,Se).call(this),this.div.classList.add("disabled")}else this.div.classList.add("editing"),this.enableEditMode();return mt(this,nt,ie).call(this),this.div}setDimensions(ut,_t){const ot=Math.round(ut),J=Math.round(_t);if(B(this,d)===ot&&B(this,O)===J)return;At(this,d,ot),At(this,O,J),this.canvas.style.visibility="hidden",B(this,v)&&Math.abs(B(this,v)-ut/_t)>.01&&(_t=Math.ceil(ut/B(this,v)),this.setDims(ut,_t));const[et,yt]=this.parent.viewportBaseDimensions;this.width=ut/et,this.height=_t/yt,B(this,u)&&mt(this,o,be).call(this,ut,_t),mt(this,c,Qt).call(this),mt(this,x,zt).call(this),this.canvas.style.visibility="visible"}static deserialize(ut,_t){var Lt,Ot;const ot=super.deserialize(ut,_t);ot.thickness=ut.thickness,ot.color=n.Util.makeHexColor(...ut.color),ot.opacity=ut.opacity;const[J,et]=_t.pageDimensions,yt=ot.width*J,St=ot.height*et,Ct=_t.scaleFactor,wt=ut.thickness/2;At(ot,v,yt/St),At(ot,u,!0),At(ot,d,Math.round(yt)),At(ot,O,Math.round(St));for(const{bezier:kt}of ut.paths){const Vt=[];ot.paths.push(Vt);let Bt=Ct*(kt[0]-wt),$t=Ct*(St-kt[1]-wt);for(let jt=2,Ht=kt.length;jt<Ht;jt+=6){const Kt=Ct*(kt[jt]-wt),Xt=Ct*(St-kt[jt+1]-wt),Gt=Ct*(kt[jt+2]-wt),Ut=Ct*(St-kt[jt+3]-wt),Wt=Ct*(kt[jt+4]-wt),Jt=Ct*(St-kt[jt+5]-wt);Vt.push([[Bt,$t],[Kt,Xt],[Gt,Ut],[Wt,Jt]]),Bt=Wt,$t=Jt}const Mt=mt(this,H,ye).call(this,Vt);ot.bezierPath2D.push(Mt)}const Ft=mt(Lt=ot,ct,Ae).call(Lt);return At(ot,F,Math.max(T,Ft[2]-Ft[0])),At(ot,y,Math.max(T,Ft[3]-Ft[1])),mt(Ot=ot,o,be).call(Ot,yt,St),ot}serialize(){if(this.isEmpty())return null;const ut=this.getRect(0,0),_t=this.rotation%180===0?ut[3]-ut[1]:ut[2]-ut[0],ot=i.AnnotationEditor._colorManager.convert(this.ctx.strokeStyle);return{annotationType:n.AnnotationEditorType.INK,color:ot,thickness:this.thickness,opacity:this.opacity,paths:mt(this,W,qe).call(this,this.scaleFactor/this.parent.scaleFactor,this.translationX,this.translationY,_t),pageIndex:this.parent.pageIndex,rect:ut,rotation:this.rotation}}};v=new WeakMap,y=new WeakMap,F=new WeakMap,k=new WeakMap,w=new WeakMap,f=new WeakMap,a=new WeakMap,u=new WeakMap,g=new WeakMap,R=new WeakMap,S=new WeakMap,d=new WeakMap,O=new WeakMap,M=new WeakMap,V=new WeakSet,Ne=function(ut){const _t=this.thickness;this.parent.addCommands({cmd:()=>{this.thickness=ut,mt(this,Et,Zt).call(this)},undo:()=>{this.thickness=_t,mt(this,Et,Zt).call(this)},mustExec:!0,type:n.AnnotationEditorParamsType.INK_THICKNESS,overwriteIfSameType:!0,keepUndo:!0})},b=new WeakSet,Le=function(ut){const _t=this.color;this.parent.addCommands({cmd:()=>{this.color=ut,mt(this,x,zt).call(this)},undo:()=>{this.color=_t,mt(this,x,zt).call(this)},mustExec:!0,type:n.AnnotationEditorParamsType.INK_COLOR,overwriteIfSameType:!0,keepUndo:!0})},I=new WeakSet,Be=function(ut){ut/=100;const _t=this.opacity;this.parent.addCommands({cmd:()=>{this.opacity=ut,mt(this,x,zt).call(this)},undo:()=>{this.opacity=_t,mt(this,x,zt).call(this)},mustExec:!0,type:n.AnnotationEditorParamsType.INK_OPACITY,overwriteIfSameType:!0,keepUndo:!0})},Y=new WeakSet,Ve=function(){const{width:ut,height:_t,rotation:ot}=this.parent.viewport;switch(ot){case 90:return[0,ut,ut,_t];case 180:return[ut,_t,ut,_t];case 270:return[_t,0,ut,_t];default:return[0,0,ut,_t]}},lt=new WeakSet,me=function(){this.ctx.lineWidth=this.thickness*this.parent.scaleFactor/this.scaleFactor,this.ctx.lineCap="round",this.ctx.lineJoin="round",this.ctx.miterLimit=10,this.ctx.strokeStyle=`${this.color}${(0,h.opacityToHex)(this.opacity)}`},z=new WeakSet,je=function(ut,_t){this.isEditing=!0,B(this,g)||(At(this,g,!0),mt(this,c,Qt).call(this),this.thickness||(this.thickness=Tt._defaultThickness),this.color||(this.color=Tt._defaultColor||i.AnnotationEditor._defaultLineColor),this.opacity??(this.opacity=Tt._defaultOpacity)),this.currentPath.push([ut,_t]),At(this,R,null),mt(this,lt,me).call(this),this.ctx.beginPath(),this.ctx.moveTo(ut,_t),At(this,M,()=>{B(this,M)&&(B(this,R)&&(this.isEmpty()?(this.ctx.setTransform(1,0,0,1,0,0),this.ctx.clearRect(0,0,this.canvas.width,this.canvas.height)):mt(this,x,zt).call(this),this.ctx.lineTo(...B(this,R)),At(this,R,null),this.ctx.stroke()),window.requestAnimationFrame(B(this,M)))}),window.requestAnimationFrame(B(this,M))},dt=new WeakSet,Ue=function(ut,_t){const[ot,J]=this.currentPath.at(-1);ut===ot&&_t===J||(this.currentPath.push([ut,_t]),At(this,R,[ut,_t]))},pt=new WeakSet,$e=function(ut,_t){var wt;this.ctx.closePath(),At(this,M,null),ut=Math.min(Math.max(ut,0),this.canvas.width),_t=Math.min(Math.max(_t,0),this.canvas.height);const[ot,J]=this.currentPath.at(-1);(ut!==ot||_t!==J)&&this.currentPath.push([ut,_t]);let et;if(this.currentPath.length!==1)et=(0,r.fitCurve)(this.currentPath,30,null);else{const Ft=[ut,_t];et=[[Ft,Ft.slice(),Ft.slice(),Ft]]}const yt=mt(wt=Tt,H,ye).call(wt,et);this.currentPath.length=0;const St=()=>{this.paths.push(et),this.bezierPath2D.push(yt),this.rebuild()},Ct=()=>{this.paths.pop(),this.bezierPath2D.pop(),this.paths.length===0?this.remove():(this.canvas||(mt(this,$,ne).call(this),mt(this,nt,ie).call(this)),mt(this,Et,Zt).call(this))};this.parent.addCommands({cmd:St,undo:Ct,mustExec:!0})},x=new WeakSet,zt=function(){if(this.isEmpty()){mt(this,C,ae).call(this);return}mt(this,lt,me).call(this);const{canvas:ut,ctx:_t}=this;_t.setTransform(1,0,0,1,0,0),_t.clearRect(0,0,ut.width,ut.height),mt(this,C,ae).call(this);for(const ot of this.bezierPath2D)_t.stroke(ot)},L=new WeakSet,_e=function(ut){mt(this,pt,$e).call(this,ut.offsetX,ut.offsetY),this.canvas.removeEventListener("pointerleave",B(this,w)),this.canvas.removeEventListener("pointermove",B(this,k)),this.parent.addToAnnotationStorage(this)},$=new WeakSet,ne=function(){this.canvas=document.createElement("canvas"),this.canvas.width=this.canvas.height=0,this.canvas.className="inkEditorCanvas",Tt._l10nPromise.get("editor_ink_canvas_aria_label").then(ut=>{var _t;return(_t=this.canvas)==null?void 0:_t.setAttribute("aria-label",ut)}),this.div.append(this.canvas),this.ctx=this.canvas.getContext("2d")},nt=new WeakSet,ie=function(){At(this,S,new ResizeObserver(ut=>{const _t=ut[0].contentRect;_t.width&&_t.height&&this.setDimensions(_t.width,_t.height)})),B(this,S).observe(this.div)},c=new WeakSet,Qt=function(){if(!B(this,g))return;const[ut,_t]=this.parent.viewportBaseDimensions;this.canvas.width=Math.ceil(this.width*ut),this.canvas.height=Math.ceil(this.height*_t),mt(this,C,ae).call(this)},o=new WeakSet,be=function(ut,_t){const ot=mt(this,bt,re).call(this),J=(ut-ot)/B(this,F),et=(_t-ot)/B(this,y);this.scaleFactor=Math.min(J,et)},C=new WeakSet,ae=function(){const ut=mt(this,bt,re).call(this)/2;this.ctx.setTransform(this.scaleFactor,0,0,this.scaleFactor,this.translationX*this.scaleFactor+ut,this.translationY*this.scaleFactor+ut)},H=new WeakSet,ye=function(ut){const _t=new Path2D;for(let ot=0,J=ut.length;ot<J;ot++){const[et,yt,St,Ct]=ut[ot];ot===0&&_t.moveTo(...et),_t.bezierCurveTo(yt[0],yt[1],St[0],St[1],Ct[0],Ct[1])}return _t},W=new WeakSet,qe=function(ut,_t,ot,J){const yt=[],St=this.thickness/2;let Ct,wt;for(const Ft of this.paths){Ct=[],wt=[];for(let Lt=0,Ot=Ft.length;Lt<Ot;Lt++){const[kt,Vt,Bt,$t]=Ft[Lt],Mt=ut*(kt[0]+_t)+St,jt=J-ut*(kt[1]+ot)-St,Ht=ut*(Vt[0]+_t)+St,Kt=J-ut*(Vt[1]+ot)-St,Xt=ut*(Bt[0]+_t)+St,Gt=J-ut*(Bt[1]+ot)-St,Ut=ut*($t[0]+_t)+St,Wt=J-ut*($t[1]+ot)-St;Lt===0&&(Ct.push(Mt,jt),wt.push(Mt,jt)),Ct.push(Ht,Kt,Xt,Gt,Ut,Wt),mt(this,K,He).call(this,Mt,jt,Ht,Kt,Xt,Gt,Ut,Wt,4,wt)}yt.push({bezier:Ct,points:wt})}return yt},K=new WeakSet,He=function(ut,_t,ot,J,et,yt,St,Ct,wt,Ft){if(mt(this,ht,We).call(this,ut,_t,ot,J,et,yt,St,Ct)){Ft.push(St,Ct);return}for(let Lt=1;Lt<wt-1;Lt++){const Ot=Lt/wt,kt=1-Ot;let Vt=Ot*ut+kt*ot,Bt=Ot*_t+kt*J,$t=Ot*ot+kt*et,Mt=Ot*J+kt*yt;const jt=Ot*et+kt*St,Ht=Ot*yt+kt*Ct;Vt=Ot*Vt+kt*$t,Bt=Ot*Bt+kt*Mt,$t=Ot*$t+kt*jt,Mt=Ot*Mt+kt*Ht,Vt=Ot*Vt+kt*$t,Bt=Ot*Bt+kt*Mt,Ft.push(Vt,Bt)}Ft.push(St,Ct)},ht=new WeakSet,We=function(ut,_t,ot,J,et,yt,St,Ct){const Ft=(3*ot-2*ut-St)**2,Lt=(3*J-2*_t-Ct)**2,Ot=(3*et-ut-2*St)**2,kt=(3*yt-_t-2*Ct)**2;return Math.max(Ft,Ot)+Math.max(Lt,kt)<=10},ct=new WeakSet,Ae=function(){let ut=1/0,_t=-1/0,ot=1/0,J=-1/0;for(const et of this.paths)for(const[yt,St,Ct,wt]of et){const Ft=n.Util.bezierBoundingBox(...yt,...St,...Ct,...wt);ut=Math.min(ut,Ft[0]),ot=Math.min(ot,Ft[1]),_t=Math.max(_t,Ft[2]),J=Math.max(J,Ft[3])}return[ut,ot,_t,J]},bt=new WeakSet,re=function(){return B(this,u)?Math.ceil(this.thickness*this.parent.scaleFactor):0},Et=new WeakSet,Zt=function(ut=!1){if(this.isEmpty())return;if(!B(this,u)){mt(this,x,zt).call(this);return}const _t=mt(this,ct,Ae).call(this),ot=mt(this,bt,re).call(this);At(this,F,Math.max(T,_t[2]-_t[0])),At(this,y,Math.max(T,_t[3]-_t[1]));const J=Math.ceil(ot+B(this,F)*this.scaleFactor),et=Math.ceil(ot+B(this,y)*this.scaleFactor),[yt,St]=this.parent.viewportBaseDimensions;this.width=J/yt,this.height=et/St,At(this,v,J/et),mt(this,Pt,Se).call(this);const Ct=this.translationX,wt=this.translationY;this.translationX=-_t[0],this.translationY=-_t[1],mt(this,c,Qt).call(this),mt(this,x,zt).call(this),At(this,d,J),At(this,O,et),this.setDims(J,et);const Ft=ut?ot/this.scaleFactor/2:0;this.translate(Ct-this.translationX-Ft,wt-this.translationY-Ft)},Pt=new WeakSet,Se=function(){const{style:ut}=this.div;B(this,v)>=1?(ut.minHeight=`${T}px`,ut.minWidth=`${Math.round(B(this,v)*T)}px`):(ut.minWidth=`${T}px`,ut.minHeight=`${Math.round(T/B(this,v))}px`)},gt(Tt,H),Dt(Tt,"_defaultColor",null),Dt(Tt,"_defaultOpacity",1),Dt(Tt,"_defaultThickness",1),Dt(Tt,"_l10nPromise"),Dt(Tt,"_type","ink");let E=Tt;e.InkEditor=E},(t,e,s)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.fitCurve=void 0;const n=s(26);e.fitCurve=n},t=>{function e(f,a,u){if(!Array.isArray(f))throw new TypeError("First argument should be an array");if(f.forEach(d=>{if(!Array.isArray(d)||d.some(O=>typeof O!="number")||d.length!==f[0].length)throw Error("Each point should be an array of numbers. Each point should have the same amount of numbers.")}),f=f.filter((d,O)=>O===0||!d.every((M,V)=>M===f[O-1][V])),f.length<2)return[];const g=f.length,R=F(f[1],f[0]),S=F(f[g-2],f[g-1]);return s(f,R,S,a,u)}function s(f,a,u,g,R){var d,O,M,V,_,b,m,I,j,Y,X,lt,Q;if(f.length===2)return lt=k.vectorLen(k.subtract(f[0],f[1]))/3,d=[f[0],k.addArrays(f[0],k.mulItems(a,lt)),k.addArrays(f[1],k.mulItems(u,lt)),f[1]],[d];if(O=T(f),[d,V,b]=n(f,O,O,a,u,R),V===0||V<g)return[d];if(V<g*g)for(M=O,_=V,m=b,Q=0;Q<20;Q++){if(M=r(d,f,M),[d,V,b]=n(f,O,M,a,u,R),V<g)return[d];if(b===m){let z=V/_;if(z>.9999&&z<1.0001)break}_=V,m=b}return X=[],I=k.subtract(f[b-1],f[b+1]),I.every(z=>z===0)&&(I=k.subtract(f[b-1],f[b]),[I[0],I[1]]=[-I[1],I[0]]),j=k.normalize(I),Y=k.mulItems(j,-1),X=X.concat(s(f.slice(0,b+1),a,j,g,R)),X=X.concat(s(f.slice(b),Y,u,g,R)),X}function n(f,a,u,g,R,S){var d,O,M;return d=i(f,u,g,R),[O,M]=E(f,d,a),S&&S({bez:d,points:f,params:a,maxErr:O,maxPoint:M}),[d,O,M]}function i(f,a,u,g){var R,S,d,O,M,V,_,b,m,I,j,Y,X,lt,Q,z,st,dt=f[0],ft=f[f.length-1];for(R=[dt,null,null,ft],S=k.zeros_Xx2x2(a.length),X=0,lt=a.length;X<lt;X++)z=a[X],st=1-z,d=S[X],d[0]=k.mulItems(u,3*z*(st*st)),d[1]=k.mulItems(g,3*st*(z*z));for(O=[[0,0],[0,0]],M=[0,0],X=0,lt=f.length;X<lt;X++)z=a[X],d=S[X],O[0][0]+=k.dot(d[0],d[0]),O[0][1]+=k.dot(d[0],d[1]),O[1][0]+=k.dot(d[0],d[1]),O[1][1]+=k.dot(d[1],d[1]),Q=k.subtract(f[X],w.q([dt,dt,ft,ft],z)),M[0]+=k.dot(d[0],Q),M[1]+=k.dot(d[1],Q);return V=O[0][0]*O[1][1]-O[1][0]*O[0][1],_=O[0][0]*M[1]-O[1][0]*M[0],b=M[0]*O[1][1]-M[1]*O[0][1],m=V===0?0:b/V,I=V===0?0:_/V,Y=k.vectorLen(k.subtract(dt,ft)),j=1e-6*Y,m<j||I<j?(R[1]=k.addArrays(dt,k.mulItems(u,Y/3)),R[2]=k.addArrays(ft,k.mulItems(g,Y/3))):(R[1]=k.addArrays(dt,k.mulItems(u,m)),R[2]=k.addArrays(ft,k.mulItems(g,I))),R}function r(f,a,u){return u.map((g,R)=>h(f,a[R],g))}function h(f,a,u){var g=k.subtract(w.q(f,u),a),R=w.qprime(f,u),S=k.mulMatrix(g,R),d=k.sum(k.squareItems(R))+2*k.mulMatrix(g,w.qprimeprime(f,u));return d===0?u:u-S/d}function T(f){var a=[],u,g,R;return f.forEach((S,d)=>{u=d?g+k.vectorLen(k.subtract(S,R)):0,a.push(u),g=u,R=S}),a=a.map(S=>S/g),a}function E(f,a,u){var g,R,S,d,O,M,V,_;R=0,S=Math.floor(f.length/2);const b=v(a,10);for(O=0,M=f.length;O<M;O++)V=f[O],_=y(a,u[O],b,10),d=k.subtract(w.q(a,_),V),g=d[0]*d[0]+d[1]*d[1],g>R&&(R=g,S=O);return[R,S]}var v=function(f,a){for(var u,g=[0],R=f[0],S=0,d=1;d<=a;d++)u=w.q(f,d/a),S+=k.vectorLen(k.subtract(u,R)),g.push(S),R=u;return g=g.map(O=>O/S),g};function y(f,a,u,g){if(a<0)return 0;if(a>1)return 1;for(var R,S,d,O,M,V=1;V<=g;V++)if(a<=u[V]){O=(V-1)/g,d=V/g,S=u[V-1],R=u[V],M=(a-S)/(R-S)*(d-O)+O;break}return M}function F(f,a){return k.normalize(k.subtract(f,a))}class k{static zeros_Xx2x2(a){for(var u=[];a--;)u.push([0,0]);return u}static mulItems(a,u){return a.map(g=>g*u)}static mulMatrix(a,u){return a.reduce((g,R,S)=>g+R*u[S],0)}static subtract(a,u){return a.map((g,R)=>g-u[R])}static addArrays(a,u){return a.map((g,R)=>g+u[R])}static addItems(a,u){return a.map(g=>g+u)}static sum(a){return a.reduce((u,g)=>u+g)}static dot(a,u){return k.mulMatrix(a,u)}static vectorLen(a){return Math.hypot(...a)}static divItems(a,u){return a.map(g=>g/u)}static squareItems(a){return a.map(u=>u*u)}static normalize(a){return this.divItems(a,this.vectorLen(a))}}class w{static q(a,u){var g=1-u,R=k.mulItems(a[0],g*g*g),S=k.mulItems(a[1],3*g*g*u),d=k.mulItems(a[2],3*g*u*u),O=k.mulItems(a[3],u*u*u);return k.addArrays(k.addArrays(R,S),k.addArrays(d,O))}static qprime(a,u){var g=1-u,R=k.mulItems(k.subtract(a[1],a[0]),3*g*g),S=k.mulItems(k.subtract(a[2],a[1]),6*g*u),d=k.mulItems(k.subtract(a[3],a[2]),3*u*u);return k.addArrays(k.addArrays(R,S),d)}static qprimeprime(a,u){return k.addArrays(k.mulItems(k.addArrays(k.subtract(a[2],k.mulItems(a[1],2)),a[0]),6*(1-u)),k.mulItems(k.addArrays(k.subtract(a[3],k.mulItems(a[2],2)),a[1]),6*u))}}t.exports=e,t.exports.fitCubic=s,t.exports.createTangent=F},(t,e,s)=>{var x,xe,L,Ee,$,Ce;Object.defineProperty(e,"__esModule",{value:!0}),e.AnnotationLayer=void 0;var n=s(1),i=s(8),r=s(5),h=s(28),T=s(29);const E=1e3,v=9,y=new WeakSet;function F(at){return{width:at[2]-at[0],height:at[3]-at[1]}}class k{static create(c){switch(c.data.annotationType){case n.AnnotationType.LINK:return new f(c);case n.AnnotationType.TEXT:return new a(c);case n.AnnotationType.WIDGET:switch(c.data.fieldType){case"Tx":return new g(c);case"Btn":return c.data.radioButton?new S(c):c.data.checkBox?new R(c):new d(c);case"Ch":return new O(c)}return new u(c);case n.AnnotationType.POPUP:return new M(c);case n.AnnotationType.FREETEXT:return new _(c);case n.AnnotationType.LINE:return new b(c);case n.AnnotationType.SQUARE:return new m(c);case n.AnnotationType.CIRCLE:return new I(c);case n.AnnotationType.POLYLINE:return new j(c);case n.AnnotationType.CARET:return new X(c);case n.AnnotationType.INK:return new lt(c);case n.AnnotationType.POLYGON:return new Y(c);case n.AnnotationType.HIGHLIGHT:return new Q(c);case n.AnnotationType.UNDERLINE:return new z(c);case n.AnnotationType.SQUIGGLY:return new st(c);case n.AnnotationType.STRIKEOUT:return new dt(c);case n.AnnotationType.STAMP:return new ft(c);case n.AnnotationType.FILEATTACHMENT:return new pt(c);default:return new w(c)}}}class w{constructor(c,{isRenderable:P=!1,ignoreBorder:o=!1,createQuadrilaterals:l=!1}={}){this.isRenderable=P,this.data=c.data,this.layer=c.layer,this.page=c.page,this.viewport=c.viewport,this.linkService=c.linkService,this.downloadManager=c.downloadManager,this.imageResourcesPath=c.imageResourcesPath,this.renderForms=c.renderForms,this.svgFactory=c.svgFactory,this.annotationStorage=c.annotationStorage,this.enableScripting=c.enableScripting,this.hasJSActions=c.hasJSActions,this._fieldObjects=c.fieldObjects,this._mouseState=c.mouseState,P&&(this.container=this._createContainer(o)),l&&(this.quadrilaterals=this._createQuadrilaterals(o))}_createContainer(c=!1){const P=this.data,o=this.page,l=this.viewport,C=document.createElement("section"),{width:N,height:H}=F(P.rect),[it,W,rt,K]=l.viewBox,Z=rt-it,ht=K-W;C.setAttribute("data-annotation-id",P.id);const D=n.Util.normalizeRect([P.rect[0],o.view[3]-P.rect[1]+o.view[1],P.rect[2],o.view[3]-P.rect[3]+o.view[1]]);if(!c&&P.borderStyle.width>0){C.style.borderWidth=`${P.borderStyle.width}px`;const vt=P.borderStyle.horizontalCornerRadius,bt=P.borderStyle.verticalCornerRadius;if(vt>0||bt>0){const Et=`calc(${vt}px * var(--scale-factor)) / calc(${bt}px * var(--scale-factor))`;C.style.borderRadius=Et}else if(this instanceof S){const Et=`calc(${N}px * var(--scale-factor)) / calc(${H}px * var(--scale-factor))`;C.style.borderRadius=Et}switch(P.borderStyle.style){case n.AnnotationBorderStyleType.SOLID:C.style.borderStyle="solid";break;case n.AnnotationBorderStyleType.DASHED:C.style.borderStyle="dashed";break;case n.AnnotationBorderStyleType.BEVELED:(0,n.warn)("Unimplemented border style: beveled");break;case n.AnnotationBorderStyleType.INSET:(0,n.warn)("Unimplemented border style: inset");break;case n.AnnotationBorderStyleType.UNDERLINE:C.style.borderBottomStyle="solid";break}const xt=P.borderColor||null;xt?C.style.borderColor=n.Util.makeHexColor(xt[0]|0,xt[1]|0,xt[2]|0):C.style.borderWidth=0}C.style.left=`${100*(D[0]-it)/Z}%`,C.style.top=`${100*(D[1]-W)/ht}%`;const{rotation:ct}=P;return P.hasOwnCanvas||ct===0?(C.style.width=`${100*N/Z}%`,C.style.height=`${100*H/ht}%`):this.setRotation(ct,C),C}setRotation(c,P=this.container){const[o,l,C,N]=this.viewport.viewBox,H=C-o,it=N-l,{width:W,height:rt}=F(this.data.rect);let K,Z;c%180===0?(K=100*W/H,Z=100*rt/it):(K=100*rt/H,Z=100*W/it),P.style.width=`${K}%`,P.style.height=`${Z}%`,P.setAttribute("data-main-rotation",(360-c)%360)}get _commonActions(){const c=(P,o,l)=>{const C=l.detail[P];l.target.style[o]=h.ColorConverters[`${C[0]}_HTML`](C.slice(1))};return(0,n.shadow)(this,"_commonActions",{display:P=>{const o=P.detail.display%2===1;this.container.style.visibility=o?"hidden":"visible",this.annotationStorage.setValue(this.data.id,{hidden:o,print:P.detail.display===0||P.detail.display===3})},print:P=>{this.annotationStorage.setValue(this.data.id,{print:P.detail.print})},hidden:P=>{this.container.style.visibility=P.detail.hidden?"hidden":"visible",this.annotationStorage.setValue(this.data.id,{hidden:P.detail.hidden})},focus:P=>{setTimeout(()=>P.target.focus({preventScroll:!1}),0)},userName:P=>{P.target.title=P.detail.userName},readonly:P=>{P.detail.readonly?P.target.setAttribute("readonly",""):P.target.removeAttribute("readonly")},required:P=>{this._setRequired(P.target,P.detail.required)},bgColor:P=>{c("bgColor","backgroundColor",P)},fillColor:P=>{c("fillColor","backgroundColor",P)},fgColor:P=>{c("fgColor","color",P)},textColor:P=>{c("textColor","color",P)},borderColor:P=>{c("borderColor","borderColor",P)},strokeColor:P=>{c("strokeColor","borderColor",P)},rotation:P=>{const o=P.detail.rotation;this.setRotation(o),this.annotationStorage.setValue(this.data.id,{rotation:o})}})}_dispatchEventFromSandbox(c,P){const o=this._commonActions;for(const l of Object.keys(P.detail)){const C=c[l]||o[l];C&&C(P)}}_setDefaultPropertiesFromJS(c){if(!this.enableScripting)return;const P=this.annotationStorage.getRawValue(this.data.id);if(!P)return;const o=this._commonActions;for(const[l,C]of Object.entries(P)){const N=o[l];if(N){const H={detail:{[l]:C},target:c};N(H),delete P[l]}}}_createQuadrilaterals(c=!1){if(!this.data.quadPoints)return null;const P=[],o=this.data.rect;for(const l of this.data.quadPoints)this.data.rect=[l[2].x,l[2].y,l[1].x,l[1].y],P.push(this._createContainer(c));return this.data.rect=o,P}_createPopup(c,P){let o=this.container;this.quadrilaterals&&(c=c||this.quadrilaterals,o=this.quadrilaterals[0]),c||(c=document.createElement("div"),c.className="popupTriggerArea",o.append(c));const C=new V({container:o,trigger:c,color:P.color,titleObj:P.titleObj,modificationDate:P.modificationDate,contentsObj:P.contentsObj,richText:P.richText,hideWrapper:!0}).render();C.style.left="100%",o.append(C)}_renderQuadrilaterals(c){for(const P of this.quadrilaterals)P.className=c;return this.quadrilaterals}render(){(0,n.unreachable)("Abstract method `AnnotationElement.render` called")}_getElementsByName(c,P=null){const o=[];if(this._fieldObjects){const l=this._fieldObjects[c];if(l)for(const{page:C,id:N,exportValues:H}of l){if(C===-1||N===P)continue;const it=typeof H=="string"?H:null,W=document.querySelector(`[data-element-id="${N}"]`);if(W&&!y.has(W)){(0,n.warn)(`_getElementsByName - element not allowed: ${N}`);continue}o.push({id:N,exportValue:it,domElement:W})}return o}for(const l of document.getElementsByName(c)){const{id:C,exportValue:N}=l;C!==P&&y.has(l)&&o.push({id:C,exportValue:N,domElement:l})}return o}static get platform(){const c=typeof navigator<"u"?navigator.platform:"";return(0,n.shadow)(this,"platform",{isWin:c.includes("Win"),isMac:c.includes("Mac")})}}class f extends w{constructor(c,P=null){super(c,{isRenderable:!0,ignoreBorder:!!(P!=null&&P.ignoreBorder),createQuadrilaterals:!0}),this.isTooltipOnly=c.data.isTooltipOnly}render(){const{data:c,linkService:P}=this,o=document.createElement("a");o.setAttribute("data-element-id",c.id);let l=!1;return c.url?(P.addLinkAttributes(o,c.url,c.newWindow),l=!0):c.action?(this._bindNamedAction(o,c.action),l=!0):c.dest?(this._bindLink(o,c.dest),l=!0):(c.actions&&(c.actions.Action||c.actions["Mouse Up"]||c.actions["Mouse Down"])&&this.enableScripting&&this.hasJSActions&&(this._bindJSAction(o,c),l=!0),c.resetForm?(this._bindResetFormAction(o,c.resetForm),l=!0):this.isTooltipOnly&&!l&&(this._bindLink(o,""),l=!0)),this.quadrilaterals?this._renderQuadrilaterals("linkAnnotation").map((C,N)=>{const H=N===0?o:o.cloneNode();return C.append(H),C}):(this.container.className="linkAnnotation",l&&this.container.append(o),this.container)}_bindLink(c,P){c.href=this.linkService.getDestinationHash(P),c.onclick=()=>(P&&this.linkService.goToDestination(P),!1),(P||P==="")&&(c.className="internalLink")}_bindNamedAction(c,P){c.href=this.linkService.getAnchorUrl(""),c.onclick=()=>(this.linkService.executeNamedAction(P),!1),c.className="internalLink"}_bindJSAction(c,P){c.href=this.linkService.getAnchorUrl("");const o=new Map([["Action","onclick"],["Mouse Up","onmouseup"],["Mouse Down","onmousedown"]]);for(const l of Object.keys(P.actions)){const C=o.get(l);C&&(c[C]=()=>{var N;return(N=this.linkService.eventBus)==null||N.dispatch("dispatcheventinsandbox",{source:this,detail:{id:P.id,name:l}}),!1})}c.onclick||(c.onclick=()=>!1),c.className="internalLink"}_bindResetFormAction(c,P){const o=c.onclick;if(o||(c.href=this.linkService.getAnchorUrl("")),c.className="internalLink",!this._fieldObjects){(0,n.warn)('_bindResetFormAction - "resetForm" action not supported, ensure that the `fieldObjects` parameter is provided.'),o||(c.onclick=()=>!1);return}c.onclick=()=>{var rt;o&&o();const{fields:l,refs:C,include:N}=P,H=[];if(l.length!==0||C.length!==0){const K=new Set(C);for(const Z of l){const ht=this._fieldObjects[Z]||[];for(const{id:D}of ht)K.add(D)}for(const Z of Object.values(this._fieldObjects))for(const ht of Z)K.has(ht.id)===N&&H.push(ht)}else for(const K of Object.values(this._fieldObjects))H.push(...K);const it=this.annotationStorage,W=[];for(const K of H){const{id:Z}=K;switch(W.push(Z),K.type){case"text":{const D=K.defaultValue||"";it.setValue(Z,{value:D});break}case"checkbox":case"radiobutton":{const D=K.defaultValue===K.exportValues;it.setValue(Z,{value:D});break}case"combobox":case"listbox":{const D=K.defaultValue||"";it.setValue(Z,{value:D});break}default:continue}const ht=document.querySelector(`[data-element-id="${Z}"]`);if(ht){if(!y.has(ht)){(0,n.warn)(`_bindResetFormAction - element not allowed: ${Z}`);continue}}else continue;ht.dispatchEvent(new Event("resetform"))}return this.enableScripting&&((rt=this.linkService.eventBus)==null||rt.dispatch("dispatcheventinsandbox",{source:this,detail:{id:"app",ids:W,name:"ResetForm"}})),!1}}}class a extends w{constructor(c){var o,l,C;const P=!!(c.data.hasPopup||(o=c.data.titleObj)!=null&&o.str||(l=c.data.contentsObj)!=null&&l.str||(C=c.data.richText)!=null&&C.str);super(c,{isRenderable:P})}render(){this.container.className="textAnnotation";const c=document.createElement("img");return c.src=this.imageResourcesPath+"annotation-"+this.data.name.toLowerCase()+".svg",c.alt="[{{type}} Annotation]",c.dataset.l10nId="text_annotation_type",c.dataset.l10nArgs=JSON.stringify({type:this.data.name}),this.data.hasPopup||this._createPopup(c,this.data),this.container.append(c),this.container}}class u extends w{render(){return this.data.alternativeText&&(this.container.title=this.data.alternativeText),this.container}_getKeyModifier(c){const{isWin:P,isMac:o}=w.platform;return P&&c.ctrlKey||o&&c.metaKey}_setEventListener(c,P,o,l){P.includes("mouse")?c.addEventListener(P,C=>{var N;(N=this.linkService.eventBus)==null||N.dispatch("dispatcheventinsandbox",{source:this,detail:{id:this.data.id,name:o,value:l(C),shift:C.shiftKey,modifier:this._getKeyModifier(C)}})}):c.addEventListener(P,C=>{var N;(N=this.linkService.eventBus)==null||N.dispatch("dispatcheventinsandbox",{source:this,detail:{id:this.data.id,name:o,value:l(C)}})})}_setEventListeners(c,P,o){var l;for(const[C,N]of P)(N==="Action"||(l=this.data.actions)!=null&&l[N])&&this._setEventListener(c,C,N,o)}_setBackgroundColor(c){const P=this.data.backgroundColor||null;c.style.backgroundColor=P===null?"transparent":n.Util.makeHexColor(P[0],P[1],P[2])}_setTextStyle(c){const P=["left","center","right"],{fontColor:o}=this.data.defaultAppearanceData,l=this.data.defaultAppearanceData.fontSize||v,C=c.style;let N;if(this.data.multiLine){const H=Math.abs(this.data.rect[3]-this.data.rect[1]),it=Math.round(H/(n.LINE_FACTOR*l))||1,W=H/it;N=Math.min(l,Math.round(W/n.LINE_FACTOR))}else{const H=Math.abs(this.data.rect[3]-this.data.rect[1]);N=Math.min(l,Math.round(H/n.LINE_FACTOR))}C.fontSize=`calc(${N}px * var(--scale-factor))`,C.color=n.Util.makeHexColor(o[0],o[1],o[2]),this.data.textAlignment!==null&&(C.textAlign=P[this.data.textAlignment])}_setRequired(c,P){P?c.setAttribute("required",!0):c.removeAttribute("required"),c.setAttribute("aria-required",P)}}class g extends u{constructor(c){const P=c.renderForms||!c.data.hasAppearance&&!!c.data.fieldValue;super(c,{isRenderable:P})}setPropertyOnSiblings(c,P,o,l){const C=this.annotationStorage;for(const N of this._getElementsByName(c.name,c.id))N.domElement&&(N.domElement[P]=o),C.setValue(N.id,{[l]:o})}render(){var l;const c=this.annotationStorage,P=this.data.id;this.container.className="textWidgetAnnotation";let o=null;if(this.renderForms){const C=c.getValue(P,{value:this.data.fieldValue});let N=C.formattedValue||C.value||"";const H=c.getValue(P,{charLimit:this.data.maxLen}).charLimit;H&&N.length>H&&(N=N.slice(0,H));const it={userValue:N,formattedValue:null,valueOnFocus:""};this.data.multiLine?(o=document.createElement("textarea"),o.textContent=N,this.data.doNotScroll&&(o.style.overflowY="hidden")):(o=document.createElement("input"),o.type="text",o.setAttribute("value",N),this.data.doNotScroll&&(o.style.overflowX="hidden")),y.add(o),o.setAttribute("data-element-id",P),o.disabled=this.data.readOnly,o.name=this.data.fieldName,o.tabIndex=E,this._setRequired(o,this.data.required),H&&(o.maxLength=H),o.addEventListener("input",rt=>{c.setValue(P,{value:rt.target.value}),this.setPropertyOnSiblings(o,"value",rt.target.value,"value")}),o.addEventListener("resetform",rt=>{const K=this.data.defaultFieldValue??"";o.value=it.userValue=K,it.formattedValue=null});let W=rt=>{const{formattedValue:K}=it;K!=null&&(rt.target.value=K),rt.target.scrollLeft=0};if(this.enableScripting&&this.hasJSActions){o.addEventListener("focus",K=>{it.userValue&&(K.target.value=it.userValue),it.valueOnFocus=K.target.value}),o.addEventListener("updatefromsandbox",K=>{const Z={value(ht){it.userValue=ht.detail.value??"",c.setValue(P,{value:it.userValue.toString()}),ht.target.value=it.userValue},formattedValue(ht){const{formattedValue:D}=ht.detail;it.formattedValue=D,D!=null&&ht.target!==document.activeElement&&(ht.target.value=D),c.setValue(P,{formattedValue:D})},selRange(ht){ht.target.setSelectionRange(...ht.detail.selRange)},charLimit:ht=>{var bt;const{charLimit:D}=ht.detail,{target:ct}=ht;if(D===0){ct.removeAttribute("maxLength");return}ct.setAttribute("maxLength",D);let vt=it.userValue;!vt||vt.length<=D||(vt=vt.slice(0,D),ct.value=it.userValue=vt,c.setValue(P,{value:vt}),(bt=this.linkService.eventBus)==null||bt.dispatch("dispatcheventinsandbox",{source:this,detail:{id:P,name:"Keystroke",value:vt,willCommit:!0,commitKey:1,selStart:ct.selectionStart,selEnd:ct.selectionEnd}}))}};this._dispatchEventFromSandbox(Z,K)}),o.addEventListener("keydown",K=>{var D;let Z=-1;if(K.key==="Escape"?Z=0:K.key==="Enter"?Z=2:K.key==="Tab"&&(Z=3),Z===-1)return;const{value:ht}=K.target;it.valueOnFocus!==ht&&(it.userValue=ht,(D=this.linkService.eventBus)==null||D.dispatch("dispatcheventinsandbox",{source:this,detail:{id:P,name:"Keystroke",value:ht,willCommit:!0,commitKey:Z,selStart:K.target.selectionStart,selEnd:K.target.selectionEnd}}))});const rt=W;W=null,o.addEventListener("blur",K=>{var ht;const{value:Z}=K.target;it.userValue=Z,this._mouseState.isDown&&it.valueOnFocus!==Z&&((ht=this.linkService.eventBus)==null||ht.dispatch("dispatcheventinsandbox",{source:this,detail:{id:P,name:"Keystroke",value:Z,willCommit:!0,commitKey:1,selStart:K.target.selectionStart,selEnd:K.target.selectionEnd}})),rt(K)}),(l=this.data.actions)!=null&&l.Keystroke&&o.addEventListener("beforeinput",K=>{var Et;const{data:Z,target:ht}=K,{value:D,selectionStart:ct,selectionEnd:vt}=ht;let bt=ct,xt=vt;switch(K.inputType){case"deleteWordBackward":{const Rt=D.substring(0,ct).match(/\w*[^\w]*$/);Rt&&(bt-=Rt[0].length);break}case"deleteWordForward":{const Rt=D.substring(ct).match(/^[^\w]*\w*/);Rt&&(xt+=Rt[0].length);break}case"deleteContentBackward":ct===vt&&(bt-=1);break;case"deleteContentForward":ct===vt&&(xt+=1);break}K.preventDefault(),(Et=this.linkService.eventBus)==null||Et.dispatch("dispatcheventinsandbox",{source:this,detail:{id:P,name:"Keystroke",value:D,change:Z||"",willCommit:!1,selStart:bt,selEnd:xt}})}),this._setEventListeners(o,[["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],K=>K.target.value)}if(W&&o.addEventListener("blur",W),this.data.comb){const K=(this.data.rect[2]-this.data.rect[0])/H;o.classList.add("comb"),o.style.letterSpacing=`calc(${K}px * var(--scale-factor) - 1ch)`}}else o=document.createElement("div"),o.textContent=this.data.fieldValue,o.style.verticalAlign="middle",o.style.display="table-cell";return this._setTextStyle(o),this._setBackgroundColor(o),this._setDefaultPropertiesFromJS(o),this.container.append(o),this.container}}class R extends u{constructor(c){super(c,{isRenderable:c.renderForms})}render(){const c=this.annotationStorage,P=this.data,o=P.id;let l=c.getValue(o,{value:P.exportValue===P.fieldValue}).value;typeof l=="string"&&(l=l!=="Off",c.setValue(o,{value:l})),this.container.className="buttonWidgetAnnotation checkBox";const C=document.createElement("input");return y.add(C),C.setAttribute("data-element-id",o),C.disabled=P.readOnly,this._setRequired(C,this.data.required),C.type="checkbox",C.name=P.fieldName,l&&C.setAttribute("checked",!0),C.setAttribute("exportValue",P.exportValue),C.tabIndex=E,C.addEventListener("change",N=>{const{name:H,checked:it}=N.target;for(const W of this._getElementsByName(H,o)){const rt=it&&W.exportValue===P.exportValue;W.domElement&&(W.domElement.checked=rt),c.setValue(W.id,{value:rt})}c.setValue(o,{value:it})}),C.addEventListener("resetform",N=>{const H=P.defaultFieldValue||"Off";N.target.checked=H===P.exportValue}),this.enableScripting&&this.hasJSActions&&(C.addEventListener("updatefromsandbox",N=>{const H={value(it){it.target.checked=it.detail.value!=="Off",c.setValue(o,{value:it.target.checked})}};this._dispatchEventFromSandbox(H,N)}),this._setEventListeners(C,[["change","Validate"],["change","Action"],["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],N=>N.target.checked)),this._setBackgroundColor(C),this._setDefaultPropertiesFromJS(C),this.container.append(C),this.container}}class S extends u{constructor(c){super(c,{isRenderable:c.renderForms})}render(){this.container.className="buttonWidgetAnnotation radioButton";const c=this.annotationStorage,P=this.data,o=P.id;let l=c.getValue(o,{value:P.fieldValue===P.buttonValue}).value;typeof l=="string"&&(l=l!==P.buttonValue,c.setValue(o,{value:l}));const C=document.createElement("input");if(y.add(C),C.setAttribute("data-element-id",o),C.disabled=P.readOnly,this._setRequired(C,this.data.required),C.type="radio",C.name=P.fieldName,l&&C.setAttribute("checked",!0),C.tabIndex=E,C.addEventListener("change",N=>{const{name:H,checked:it}=N.target;for(const W of this._getElementsByName(H,o))c.setValue(W.id,{value:!1});c.setValue(o,{value:it})}),C.addEventListener("resetform",N=>{const H=P.defaultFieldValue;N.target.checked=H!=null&&H===P.buttonValue}),this.enableScripting&&this.hasJSActions){const N=P.buttonValue;C.addEventListener("updatefromsandbox",H=>{const it={value:W=>{const rt=N===W.detail.value;for(const K of this._getElementsByName(W.target.name)){const Z=rt&&K.id===o;K.domElement&&(K.domElement.checked=Z),c.setValue(K.id,{value:Z})}}};this._dispatchEventFromSandbox(it,H)}),this._setEventListeners(C,[["change","Validate"],["change","Action"],["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],H=>H.target.checked)}return this._setBackgroundColor(C),this._setDefaultPropertiesFromJS(C),this.container.append(C),this.container}}class d extends f{constructor(c){super(c,{ignoreBorder:c.data.hasAppearance})}render(){const c=super.render();c.className="buttonWidgetAnnotation pushButton",this.data.alternativeText&&(c.title=this.data.alternativeText);const P=c.lastChild;return this.enableScripting&&this.hasJSActions&&P&&(this._setDefaultPropertiesFromJS(P),P.addEventListener("updatefromsandbox",o=>{this._dispatchEventFromSandbox({},o)})),c}}class O extends u{constructor(c){super(c,{isRenderable:c.renderForms})}render(){this.container.className="choiceWidgetAnnotation";const c=this.annotationStorage,P=this.data.id,o=c.getValue(P,{value:this.data.fieldValue}),l=document.createElement("select");y.add(l),l.setAttribute("data-element-id",P),l.disabled=this.data.readOnly,this._setRequired(l,this.data.required),l.name=this.data.fieldName,l.tabIndex=E;let C=this.data.combo&&this.data.options.length>0;this.data.combo||(l.size=this.data.options.length,this.data.multiSelect&&(l.multiple=!0)),l.addEventListener("resetform",W=>{const rt=this.data.defaultFieldValue;for(const K of l.options)K.selected=K.value===rt});for(const W of this.data.options){const rt=document.createElement("option");rt.textContent=W.displayValue,rt.value=W.exportValue,o.value.includes(W.exportValue)&&(rt.setAttribute("selected",!0),C=!1),l.append(rt)}let N=null;if(C){const W=document.createElement("option");W.value=" ",W.setAttribute("hidden",!0),W.setAttribute("selected",!0),l.prepend(W),N=()=>{W.remove(),l.removeEventListener("input",N),N=null},l.addEventListener("input",N)}const H=(W,rt)=>{const K=rt?"value":"textContent",Z=W.target.options;return W.target.multiple?Array.prototype.filter.call(Z,ht=>ht.selected).map(ht=>ht[K]):Z.selectedIndex===-1?null:Z[Z.selectedIndex][K]},it=W=>{const rt=W.target.options;return Array.prototype.map.call(rt,K=>({displayValue:K.textContent,exportValue:K.value}))};return this.enableScripting&&this.hasJSActions?(l.addEventListener("updatefromsandbox",W=>{const rt={value(K){N==null||N();const Z=K.detail.value,ht=new Set(Array.isArray(Z)?Z:[Z]);for(const D of l.options)D.selected=ht.has(D.value);c.setValue(P,{value:H(K,!0)})},multipleSelection(K){l.multiple=!0},remove(K){const Z=l.options,ht=K.detail.remove;Z[ht].selected=!1,l.remove(ht),Z.length>0&&Array.prototype.findIndex.call(Z,ct=>ct.selected)===-1&&(Z[0].selected=!0),c.setValue(P,{value:H(K,!0),items:it(K)})},clear(K){for(;l.length!==0;)l.remove(0);c.setValue(P,{value:null,items:[]})},insert(K){const{index:Z,displayValue:ht,exportValue:D}=K.detail.insert,ct=l.children[Z],vt=document.createElement("option");vt.textContent=ht,vt.value=D,ct?ct.before(vt):l.append(vt),c.setValue(P,{value:H(K,!0),items:it(K)})},items(K){const{items:Z}=K.detail;for(;l.length!==0;)l.remove(0);for(const ht of Z){const{displayValue:D,exportValue:ct}=ht,vt=document.createElement("option");vt.textContent=D,vt.value=ct,l.append(vt)}l.options.length>0&&(l.options[0].selected=!0),c.setValue(P,{value:H(K,!0),items:it(K)})},indices(K){const Z=new Set(K.detail.indices);for(const ht of K.target.options)ht.selected=Z.has(ht.index);c.setValue(P,{value:H(K,!0)})},editable(K){K.target.disabled=!K.detail.editable}};this._dispatchEventFromSandbox(rt,W)}),l.addEventListener("input",W=>{var Z;const rt=H(W,!0),K=H(W,!1);c.setValue(P,{value:rt}),(Z=this.linkService.eventBus)==null||Z.dispatch("dispatcheventinsandbox",{source:this,detail:{id:P,name:"Keystroke",value:K,changeEx:rt,willCommit:!0,commitKey:1,keyDown:!1}})}),this._setEventListeners(l,[["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"],["input","Action"]],W=>W.target.checked)):l.addEventListener("input",function(W){c.setValue(P,{value:H(W,!0)})}),this.data.combo&&this._setTextStyle(l),this._setBackgroundColor(l),this._setDefaultPropertiesFromJS(l),this.container.append(l),this.container}}class M extends w{constructor(c){var o,l,C;const P=!!((o=c.data.titleObj)!=null&&o.str||(l=c.data.contentsObj)!=null&&l.str||(C=c.data.richText)!=null&&C.str);super(c,{isRenderable:P})}render(){const c=["Line","Square","Circle","PolyLine","Polygon","Ink"];if(this.container.className="popupAnnotation",c.includes(this.data.parentType))return this.container;const P=`[data-annotation-id="${this.data.parentId}"]`,o=this.layer.querySelectorAll(P);if(o.length===0)return this.container;const l=new V({container:this.container,trigger:Array.from(o),color:this.data.color,titleObj:this.data.titleObj,modificationDate:this.data.modificationDate,contentsObj:this.data.contentsObj,richText:this.data.richText}),C=this.page,N=n.Util.normalizeRect([this.data.parentRect[0],C.view[3]-this.data.parentRect[1]+C.view[1],this.data.parentRect[2],C.view[3]-this.data.parentRect[3]+C.view[1]]),H=N[0]+this.data.parentRect[2]-this.data.parentRect[0],it=N[1],[W,rt,K,Z]=this.viewport.viewBox,ht=K-W,D=Z-rt;return this.container.style.left=`${100*(H-W)/ht}%`,this.container.style.top=`${100*(it-rt)/D}%`,this.container.append(l.render()),this.container}}class V{constructor(c){this.container=c.container,this.trigger=c.trigger,this.color=c.color,this.titleObj=c.titleObj,this.modificationDate=c.modificationDate,this.contentsObj=c.contentsObj,this.richText=c.richText,this.hideWrapper=c.hideWrapper||!1,this.pinned=!1}render(){var H,it;const P=document.createElement("div");P.className="popupWrapper",this.hideElement=this.hideWrapper?P:this.container,this.hideElement.hidden=!0;const o=document.createElement("div");o.className="popup";const l=this.color;if(l){const W=.7*(255-l[0])+l[0],rt=.7*(255-l[1])+l[1],K=.7*(255-l[2])+l[2];o.style.backgroundColor=n.Util.makeHexColor(W|0,rt|0,K|0)}const C=document.createElement("h1");C.dir=this.titleObj.dir,C.textContent=this.titleObj.str,o.append(C);const N=i.PDFDateString.toDateObject(this.modificationDate);if(N){const W=document.createElement("span");W.className="popupDate",W.textContent="{{date}}, {{time}}",W.dataset.l10nId="annotation_date_string",W.dataset.l10nArgs=JSON.stringify({date:N.toLocaleDateString(),time:N.toLocaleTimeString()}),o.append(W)}if((H=this.richText)!=null&&H.str&&(!((it=this.contentsObj)!=null&&it.str)||this.contentsObj.str===this.richText.str))T.XfaLayer.render({xfaHtml:this.richText.html,intent:"richText",div:o}),o.lastChild.className="richText popupContent";else{const W=this._formatContents(this.contentsObj);o.append(W)}Array.isArray(this.trigger)||(this.trigger=[this.trigger]);for(const W of this.trigger)W.addEventListener("click",this._toggle.bind(this)),W.addEventListener("mouseover",this._show.bind(this,!1)),W.addEventListener("mouseout",this._hide.bind(this,!1));return o.addEventListener("click",this._hide.bind(this,!0)),P.append(o),P}_formatContents({str:c,dir:P}){const o=document.createElement("p");o.className="popupContent",o.dir=P;const l=c.split(/(?:\r\n?|\n)/);for(let C=0,N=l.length;C<N;++C){const H=l[C];o.append(document.createTextNode(H)),C<N-1&&o.append(document.createElement("br"))}return o}_toggle(){this.pinned?this._hide(!0):this._show(!0)}_show(c=!1){c&&(this.pinned=!0),this.hideElement.hidden&&(this.hideElement.hidden=!1,this.container.style.zIndex=parseInt(this.container.style.zIndex)+1e3)}_hide(c=!0){c&&(this.pinned=!1),!this.hideElement.hidden&&!this.pinned&&(this.hideElement.hidden=!0,this.container.style.zIndex=parseInt(this.container.style.zIndex)-1e3)}}class _ extends w{constructor(c){var o,l,C;const P=!!(c.data.hasPopup||(o=c.data.titleObj)!=null&&o.str||(l=c.data.contentsObj)!=null&&l.str||(C=c.data.richText)!=null&&C.str);super(c,{isRenderable:P,ignoreBorder:!0}),this.textContent=c.data.textContent}render(){if(this.container.className="freeTextAnnotation",this.textContent){const c=document.createElement("div");c.className="annotationTextContent",c.setAttribute("role","comment");for(const P of this.textContent){const o=document.createElement("span");o.textContent=P,c.append(o)}this.container.append(c)}return this.data.hasPopup||this._createPopup(null,this.data),this.container}}class b extends w{constructor(c){var o,l,C;const P=!!(c.data.hasPopup||(o=c.data.titleObj)!=null&&o.str||(l=c.data.contentsObj)!=null&&l.str||(C=c.data.richText)!=null&&C.str);super(c,{isRenderable:P,ignoreBorder:!0})}render(){this.container.className="lineAnnotation";const c=this.data,{width:P,height:o}=F(c.rect),l=this.svgFactory.create(P,o,!0),C=this.svgFactory.createElement("svg:line");return C.setAttribute("x1",c.rect[2]-c.lineCoordinates[0]),C.setAttribute("y1",c.rect[3]-c.lineCoordinates[1]),C.setAttribute("x2",c.rect[2]-c.lineCoordinates[2]),C.setAttribute("y2",c.rect[3]-c.lineCoordinates[3]),C.setAttribute("stroke-width",c.borderStyle.width||1),C.setAttribute("stroke","transparent"),C.setAttribute("fill","transparent"),l.append(C),this.container.append(l),this._createPopup(C,c),this.container}}class m extends w{constructor(c){var o,l,C;const P=!!(c.data.hasPopup||(o=c.data.titleObj)!=null&&o.str||(l=c.data.contentsObj)!=null&&l.str||(C=c.data.richText)!=null&&C.str);super(c,{isRenderable:P,ignoreBorder:!0})}render(){this.container.className="squareAnnotation";const c=this.data,{width:P,height:o}=F(c.rect),l=this.svgFactory.create(P,o,!0),C=c.borderStyle.width,N=this.svgFactory.createElement("svg:rect");return N.setAttribute("x",C/2),N.setAttribute("y",C/2),N.setAttribute("width",P-C),N.setAttribute("height",o-C),N.setAttribute("stroke-width",C||1),N.setAttribute("stroke","transparent"),N.setAttribute("fill","transparent"),l.append(N),this.container.append(l),this._createPopup(N,c),this.container}}class I extends w{constructor(c){var o,l,C;const P=!!(c.data.hasPopup||(o=c.data.titleObj)!=null&&o.str||(l=c.data.contentsObj)!=null&&l.str||(C=c.data.richText)!=null&&C.str);super(c,{isRenderable:P,ignoreBorder:!0})}render(){this.container.className="circleAnnotation";const c=this.data,{width:P,height:o}=F(c.rect),l=this.svgFactory.create(P,o,!0),C=c.borderStyle.width,N=this.svgFactory.createElement("svg:ellipse");return N.setAttribute("cx",P/2),N.setAttribute("cy",o/2),N.setAttribute("rx",P/2-C/2),N.setAttribute("ry",o/2-C/2),N.setAttribute("stroke-width",C||1),N.setAttribute("stroke","transparent"),N.setAttribute("fill","transparent"),l.append(N),this.container.append(l),this._createPopup(N,c),this.container}}class j extends w{constructor(c){var o,l,C;const P=!!(c.data.hasPopup||(o=c.data.titleObj)!=null&&o.str||(l=c.data.contentsObj)!=null&&l.str||(C=c.data.richText)!=null&&C.str);super(c,{isRenderable:P,ignoreBorder:!0}),this.containerClassName="polylineAnnotation",this.svgElementName="svg:polyline"}render(){this.container.className=this.containerClassName;const c=this.data,{width:P,height:o}=F(c.rect),l=this.svgFactory.create(P,o,!0);let C=[];for(const H of c.vertices){const it=H.x-c.rect[0],W=c.rect[3]-H.y;C.push(it+","+W)}C=C.join(" ");const N=this.svgFactory.createElement(this.svgElementName);return N.setAttribute("points",C),N.setAttribute("stroke-width",c.borderStyle.width||1),N.setAttribute("stroke","transparent"),N.setAttribute("fill","transparent"),l.append(N),this.container.append(l),this._createPopup(N,c),this.container}}class Y extends j{constructor(c){super(c),this.containerClassName="polygonAnnotation",this.svgElementName="svg:polygon"}}class X extends w{constructor(c){var o,l,C;const P=!!(c.data.hasPopup||(o=c.data.titleObj)!=null&&o.str||(l=c.data.contentsObj)!=null&&l.str||(C=c.data.richText)!=null&&C.str);super(c,{isRenderable:P,ignoreBorder:!0})}render(){return this.container.className="caretAnnotation",this.data.hasPopup||this._createPopup(null,this.data),this.container}}class lt extends w{constructor(c){var o,l,C;const P=!!(c.data.hasPopup||(o=c.data.titleObj)!=null&&o.str||(l=c.data.contentsObj)!=null&&l.str||(C=c.data.richText)!=null&&C.str);super(c,{isRenderable:P,ignoreBorder:!0}),this.containerClassName="inkAnnotation",this.svgElementName="svg:polyline"}render(){this.container.className=this.containerClassName;const c=this.data,{width:P,height:o}=F(c.rect),l=this.svgFactory.create(P,o,!0);for(const C of c.inkLists){let N=[];for(const it of C){const W=it.x-c.rect[0],rt=c.rect[3]-it.y;N.push(`${W},${rt}`)}N=N.join(" ");const H=this.svgFactory.createElement(this.svgElementName);H.setAttribute("points",N),H.setAttribute("stroke-width",c.borderStyle.width||1),H.setAttribute("stroke","transparent"),H.setAttribute("fill","transparent"),this._createPopup(H,c),l.append(H)}return this.container.append(l),this.container}}class Q extends w{constructor(c){var o,l,C;const P=!!(c.data.hasPopup||(o=c.data.titleObj)!=null&&o.str||(l=c.data.contentsObj)!=null&&l.str||(C=c.data.richText)!=null&&C.str);super(c,{isRenderable:P,ignoreBorder:!0,createQuadrilaterals:!0})}render(){return this.data.hasPopup||this._createPopup(null,this.data),this.quadrilaterals?this._renderQuadrilaterals("highlightAnnotation"):(this.container.className="highlightAnnotation",this.container)}}class z extends w{constructor(c){var o,l,C;const P=!!(c.data.hasPopup||(o=c.data.titleObj)!=null&&o.str||(l=c.data.contentsObj)!=null&&l.str||(C=c.data.richText)!=null&&C.str);super(c,{isRenderable:P,ignoreBorder:!0,createQuadrilaterals:!0})}render(){return this.data.hasPopup||this._createPopup(null,this.data),this.quadrilaterals?this._renderQuadrilaterals("underlineAnnotation"):(this.container.className="underlineAnnotation",this.container)}}class st extends w{constructor(c){var o,l,C;const P=!!(c.data.hasPopup||(o=c.data.titleObj)!=null&&o.str||(l=c.data.contentsObj)!=null&&l.str||(C=c.data.richText)!=null&&C.str);super(c,{isRenderable:P,ignoreBorder:!0,createQuadrilaterals:!0})}render(){return this.data.hasPopup||this._createPopup(null,this.data),this.quadrilaterals?this._renderQuadrilaterals("squigglyAnnotation"):(this.container.className="squigglyAnnotation",this.container)}}class dt extends w{constructor(c){var o,l,C;const P=!!(c.data.hasPopup||(o=c.data.titleObj)!=null&&o.str||(l=c.data.contentsObj)!=null&&l.str||(C=c.data.richText)!=null&&C.str);super(c,{isRenderable:P,ignoreBorder:!0,createQuadrilaterals:!0})}render(){return this.data.hasPopup||this._createPopup(null,this.data),this.quadrilaterals?this._renderQuadrilaterals("strikeoutAnnotation"):(this.container.className="strikeoutAnnotation",this.container)}}class ft extends w{constructor(c){var o,l,C;const P=!!(c.data.hasPopup||(o=c.data.titleObj)!=null&&o.str||(l=c.data.contentsObj)!=null&&l.str||(C=c.data.richText)!=null&&C.str);super(c,{isRenderable:P,ignoreBorder:!0})}render(){return this.container.className="stampAnnotation",this.data.hasPopup||this._createPopup(null,this.data),this.container}}class pt extends w{constructor(c){var l;super(c,{isRenderable:!0});const{filename:P,content:o}=this.data.file;this.filename=(0,i.getFilenameFromUrl)(P),this.content=o,(l=this.linkService.eventBus)==null||l.dispatch("fileattachmentannotation",{source:this,filename:P,content:o})}render(){var P,o;this.container.className="fileAttachmentAnnotation";const c=document.createElement("div");return c.className="popupTriggerArea",c.addEventListener("dblclick",this._download.bind(this)),!this.data.hasPopup&&((P=this.data.titleObj)!=null&&P.str||(o=this.data.contentsObj)!=null&&o.str||this.data.richText)&&this._createPopup(c,this.data),this.container.append(c),this.container}_download(){var c;(c=this.downloadManager)==null||c.openOrDownloadData(this.container,this.content,this.filename)}}const nt=class nt{static render(c){var H,it;const{annotations:P,div:o,viewport:l,accessibilityManager:C}=c;mt(this,L,Ee).call(this,o,l);let N=0;for(const W of P){if(W.annotationType!==n.AnnotationType.POPUP){const{width:K,height:Z}=F(W.rect);if(K<=0||Z<=0)continue}const rt=k.create({data:W,layer:o,page:c.page,viewport:l,linkService:c.linkService,downloadManager:c.downloadManager,imageResourcesPath:c.imageResourcesPath||"",renderForms:c.renderForms!==!1,svgFactory:new i.DOMSVGFactory,annotationStorage:c.annotationStorage||new r.AnnotationStorage,enableScripting:c.enableScripting,hasJSActions:c.hasJSActions,fieldObjects:c.fieldObjects,mouseState:c.mouseState||{isDown:!1}});if(rt.isRenderable){const K=rt.render();if(W.hidden&&(K.style.visibility="hidden"),Array.isArray(K))for(const Z of K)Z.style.zIndex=N++,mt(H=nt,x,xe).call(H,Z,W.id,o,C);else K.style.zIndex=N++,rt instanceof M?o.prepend(K):mt(it=nt,x,xe).call(it,K,W.id,o,C)}}mt(this,$,Ce).call(this,o,c.annotationCanvasMap)}static update(c){const{annotationCanvasMap:P,div:o,viewport:l}=c;mt(this,L,Ee).call(this,o,l),mt(this,$,Ce).call(this,o,P),o.hidden=!1}};x=new WeakSet,xe=function(c,P,o,l){const C=c.firstChild||c;C.id=`${i.AnnotationPrefix}${P}`,o.append(c),l==null||l.moveElementInDOM(o,c,C,!1)},L=new WeakSet,Ee=function(c,{width:P,height:o,rotation:l}){const{style:C}=c,N=l%180!==0,H=Math.floor(P)+"px",it=Math.floor(o)+"px";C.width=N?it:H,C.height=N?H:it,c.setAttribute("data-main-rotation",l)},$=new WeakSet,Ce=function(c,P){if(P){for(const[o,l]of P){const C=c.querySelector(`[data-annotation-id="${o}"]`);if(!C)continue;const{firstChild:N}=C;N?N.nodeName==="CANVAS"?N.replaceWith(l):N.before(l):C.append(l)}P.clear()}},gt(nt,x),gt(nt,L),gt(nt,$);let U=nt;e.AnnotationLayer=U},(t,e)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.ColorConverters=void 0;function s(i){return Math.floor(Math.max(0,Math.min(1,i))*255).toString(16).padStart(2,"0")}class n{static CMYK_G([r,h,T,E]){return["G",1-Math.min(1,.3*r+.59*T+.11*h+E)]}static G_CMYK([r]){return["CMYK",0,0,0,1-r]}static G_RGB([r]){return["RGB",r,r,r]}static G_HTML([r]){const h=s(r);return`#${h}${h}${h}`}static RGB_G([r,h,T]){return["G",.3*r+.59*h+.11*T]}static RGB_HTML([r,h,T]){const E=s(r),v=s(h),y=s(T);return`#${E}${v}${y}`}static T_HTML(){return"#00000000"}static CMYK_RGB([r,h,T,E]){return["RGB",1-Math.min(1,r+E),1-Math.min(1,T+E),1-Math.min(1,h+E)]}static CMYK_HTML(r){const h=this.CMYK_RGB(r).slice(1);return this.RGB_HTML(h)}static RGB_CMYK([r,h,T]){const E=1-r,v=1-h,y=1-T,F=Math.min(E,v,y);return["CMYK",E,v,y,F]}}e.ColorConverters=n},(t,e,s)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.XfaLayer=void 0;var n=s(20);class i{static setupStorage(h,T,E,v,y){const F=v.getValue(T,{value:null});switch(E.name){case"textarea":if(F.value!==null&&(h.textContent=F.value),y==="print")break;h.addEventListener("input",k=>{v.setValue(T,{value:k.target.value})});break;case"input":if(E.attributes.type==="radio"||E.attributes.type==="checkbox"){if(F.value===E.attributes.xfaOn?h.setAttribute("checked",!0):F.value===E.attributes.xfaOff&&h.removeAttribute("checked"),y==="print")break;h.addEventListener("change",k=>{v.setValue(T,{value:k.target.checked?k.target.getAttribute("xfaOn"):k.target.getAttribute("xfaOff")})})}else{if(F.value!==null&&h.setAttribute("value",F.value),y==="print")break;h.addEventListener("input",k=>{v.setValue(T,{value:k.target.value})})}break;case"select":if(F.value!==null)for(const k of E.children)k.attributes.value===F.value&&(k.attributes.selected=!0);h.addEventListener("input",k=>{const w=k.target.options,f=w.selectedIndex===-1?"":w[w.selectedIndex].value;v.setValue(T,{value:f})});break}}static setAttributes({html:h,element:T,storage:E=null,intent:v,linkService:y}){const{attributes:F}=T,k=h instanceof HTMLAnchorElement;F.type==="radio"&&(F.name=`${F.name}-${v}`);for(const[w,f]of Object.entries(F))if(f!=null)switch(w){case"class":f.length&&h.setAttribute(w,f.join(" "));break;case"dataId":break;case"id":h.setAttribute("data-element-id",f);break;case"style":Object.assign(h.style,f);break;case"textContent":h.textContent=f;break;default:(!k||w!=="href"&&w!=="newWindow")&&h.setAttribute(w,f)}k&&y.addLinkAttributes(h,F.href,F.newWindow),E&&F.dataId&&this.setupStorage(h,F.dataId,T,E)}static render(h){var a;const T=h.annotationStorage,E=h.linkService,v=h.xfaHtml,y=h.intent||"display",F=document.createElement(v.name);v.attributes&&this.setAttributes({html:F,element:v,intent:y,linkService:E});const k=[[v,-1,F]],w=h.div;if(w.append(F),h.viewport){const u=`matrix(${h.viewport.transform.join(",")})`;w.style.transform=u}y!=="richText"&&w.setAttribute("class","xfaLayer xfaFont");const f=[];for(;k.length>0;){const[u,g,R]=k.at(-1);if(g+1===u.children.length){k.pop();continue}const S=u.children[++k.at(-1)[1]];if(S===null)continue;const{name:d}=S;if(d==="#text"){const M=document.createTextNode(S.value);f.push(M),R.append(M);continue}let O;if((a=S==null?void 0:S.attributes)!=null&&a.xmlns?O=document.createElementNS(S.attributes.xmlns,d):O=document.createElement(d),R.append(O),S.attributes&&this.setAttributes({html:O,element:S,storage:T,intent:y,linkService:E}),S.children&&S.children.length>0)k.push([S,-1,O]);else if(S.value){const M=document.createTextNode(S.value);n.XfaText.shouldBuildText(d)&&f.push(M),O.append(M)}}for(const u of w.querySelectorAll(".xfaNonInteractive input, .xfaNonInteractive textarea"))u.setAttribute("readOnly",!0);return{textDivs:f}}static update(h){const T=`matrix(${h.viewport.transform.join(",")})`;h.div.style.transform=T,h.div.hidden=!1}}e.XfaLayer=i},(t,e,s)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.TextLayerRenderTask=void 0,e.renderTextLayer=R;var n=s(1),i=s(8);const r=1e5,h=30,T=.8,E=new Map,v=/^\s+$/g;function y(S,d){const O=E.get(S);if(O)return O;d.save(),d.font=`${h}px ${S}`;const M=d.measureText("");let V=M.fontBoundingBoxAscent,_=Math.abs(M.fontBoundingBoxDescent);if(V){d.restore();const m=V/(V+_);return E.set(S,m),m}d.strokeStyle="red",d.clearRect(0,0,h,h),d.strokeText("g",0,0);let b=d.getImageData(0,0,h,h).data;_=0;for(let m=b.length-1-3;m>=0;m-=4)if(b[m]>0){_=Math.ceil(m/4/h);break}d.clearRect(0,0,h,h),d.strokeText("A",0,h),b=d.getImageData(0,0,h,h).data,V=0;for(let m=0,I=b.length;m<I;m+=4)if(b[m]>0){V=h-Math.floor(m/4/h);break}if(d.restore(),V){const m=V/(V+_);return E.set(S,m),m}return E.set(S,T),T}function F(S,d,O,M){const V=document.createElement("span"),_=S._enhanceTextSelection?{angle:0,canvasWidth:0,hasText:d.str!=="",hasEOL:d.hasEOL,originalTransform:null,paddingBottom:0,paddingLeft:0,paddingRight:0,paddingTop:0,scale:1,fontSize:0}:{angle:0,canvasWidth:0,hasText:d.str!=="",hasEOL:d.hasEOL,fontSize:0};S._textDivs.push(V);const b=n.Util.transform(S._viewport.transform,d.transform);let m=Math.atan2(b[1],b[0]);const I=O[d.fontName];I.vertical&&(m+=Math.PI/2);const j=Math.hypot(b[2],b[3]),Y=j*y(I.fontFamily,M);let X,lt;m===0?(X=b[4],lt=b[5]-Y):(X=b[4]+Y*Math.sin(m),lt=b[5]-Y*Math.cos(m)),V.style.left=`${X}px`,V.style.top=`${lt}px`,V.style.fontSize=`${j}px`,V.style.fontFamily=I.fontFamily,_.fontSize=j,V.setAttribute("role","presentation"),V.textContent=d.str,V.dir=d.dir,S._fontInspectorEnabled&&(V.dataset.fontName=d.fontName),m!==0&&(_.angle=m*(180/Math.PI));let Q=!1;if(d.str.length>1||S._enhanceTextSelection&&v.test(d.str))Q=!0;else if(d.str!==" "&&d.transform[0]!==d.transform[3]){const z=Math.abs(d.transform[0]),st=Math.abs(d.transform[3]);z!==st&&Math.max(z,st)/Math.min(z,st)>1.5&&(Q=!0)}if(Q&&(I.vertical?_.canvasWidth=d.height*S._viewport.scale:_.canvasWidth=d.width*S._viewport.scale),S._textDivProperties.set(V,_),S._textContentStream&&S._layoutText(V),S._enhanceTextSelection&&_.hasText){let z=1,st=0;m!==0&&(z=Math.cos(m),st=Math.sin(m));const dt=(I.vertical?d.height:d.width)*S._viewport.scale,ft=j;let pt,U;m!==0?(pt=[z,st,-st,z,X,lt],U=n.Util.getAxialAlignedBoundingBox([0,0,dt,ft],pt)):U=[X,lt,X+dt,lt+ft],S._bounds.push({left:U[0],top:U[1],right:U[2],bottom:U[3],div:V,size:[dt,ft],m:pt})}}function k(S){if(S._canceled)return;const d=S._textDivs,O=S._capability,M=d.length;if(M>r){S._renderingDone=!0,O.resolve();return}if(!S._textContentStream)for(let V=0;V<M;V++)S._layoutText(d[V]);S._renderingDone=!0,O.resolve()}function w(S,d,O){let M=0;for(let V=0;V<O;V++){const _=S[d++];_>0&&(M=M?Math.min(_,M):_)}return M}function f(S){const d=S._bounds,O=S._viewport,M=a(O.width,O.height,d);for(let V=0;V<M.length;V++){const _=d[V].div,b=S._textDivProperties.get(_);if(b.angle===0){b.paddingLeft=d[V].left-M[V].left,b.paddingTop=d[V].top-M[V].top,b.paddingRight=M[V].right-d[V].right,b.paddingBottom=M[V].bottom-d[V].bottom,S._textDivProperties.set(_,b);continue}const m=M[V],I=d[V],j=I.m,Y=j[0],X=j[1],lt=[[0,0],[0,I.size[1]],[I.size[0],0],I.size],Q=new Float64Array(64);for(let st=0,dt=lt.length;st<dt;st++){const ft=n.Util.applyTransform(lt[st],j);Q[st+0]=Y&&(m.left-ft[0])/Y,Q[st+4]=X&&(m.top-ft[1])/X,Q[st+8]=Y&&(m.right-ft[0])/Y,Q[st+12]=X&&(m.bottom-ft[1])/X,Q[st+16]=X&&(m.left-ft[0])/-X,Q[st+20]=Y&&(m.top-ft[1])/Y,Q[st+24]=X&&(m.right-ft[0])/-X,Q[st+28]=Y&&(m.bottom-ft[1])/Y,Q[st+32]=Y&&(m.left-ft[0])/-Y,Q[st+36]=X&&(m.top-ft[1])/-X,Q[st+40]=Y&&(m.right-ft[0])/-Y,Q[st+44]=X&&(m.bottom-ft[1])/-X,Q[st+48]=X&&(m.left-ft[0])/X,Q[st+52]=Y&&(m.top-ft[1])/-Y,Q[st+56]=X&&(m.right-ft[0])/X,Q[st+60]=Y&&(m.bottom-ft[1])/-Y}const z=1+Math.min(Math.abs(Y),Math.abs(X));b.paddingLeft=w(Q,32,16)/z,b.paddingTop=w(Q,48,16)/z,b.paddingRight=w(Q,0,16)/z,b.paddingBottom=w(Q,16,16)/z,S._textDivProperties.set(_,b)}}function a(S,d,O){const M=O.map(function(_,b){return{x1:_.left,y1:_.top,x2:_.right,y2:_.bottom,index:b,x1New:void 0,x2New:void 0}});u(S,M);const V=new Array(O.length);for(const _ of M){const b=_.index;V[b]={left:_.x1New,top:0,right:_.x2New,bottom:0}}O.map(function(_,b){const m=V[b],I=M[b];I.x1=_.top,I.y1=S-m.right,I.x2=_.bottom,I.y2=S-m.left,I.index=b,I.x1New=void 0,I.x2New=void 0}),u(d,M);for(const _ of M){const b=_.index;V[b].top=_.x1New,V[b].bottom=_.x2New}return V}function u(S,d){d.sort(function(V,_){return V.x1-_.x1||V.index-_.index});const M=[{start:-1/0,end:1/0,boundary:{x1:-1/0,y1:-1/0,x2:0,y2:1/0,index:-1,x1New:0,x2New:0}}];for(const V of d){let _=0;for(;_<M.length&&M[_].end<=V.y1;)_++;let b=M.length-1;for(;b>=0&&M[b].start>=V.y2;)b--;let m,I,j,Y,X=-1/0;for(j=_;j<=b;j++){m=M[j],I=m.boundary;let z;I.x2>V.x1?z=I.index>V.index?I.x1New:V.x1:I.x2New===void 0?z=(I.x2+V.x1)/2:z=I.x2New,z>X&&(X=z)}for(V.x1New=X,j=_;j<=b;j++)m=M[j],I=m.boundary,I.x2New===void 0?I.x2>V.x1?I.index>V.index&&(I.x2New=I.x2):I.x2New=X:I.x2New>X&&(I.x2New=Math.max(X,I.x2));const lt=[];let Q=null;for(j=_;j<=b;j++){m=M[j],I=m.boundary;const z=I.x2>V.x2?I:V;Q===z?lt.at(-1).end=m.end:(lt.push({start:m.start,end:m.end,boundary:z}),Q=z)}for(M[_].start<V.y1&&(lt[0].start=V.y1,lt.unshift({start:M[_].start,end:V.y1,boundary:M[_].boundary})),V.y2<M[b].end&&(lt.at(-1).end=V.y2,lt.push({start:V.y2,end:M[b].end,boundary:M[b].boundary})),j=_;j<=b;j++){if(m=M[j],I=m.boundary,I.x2New!==void 0)continue;let z=!1;for(Y=_-1;!z&&Y>=0&&M[Y].start>=I.y1;Y--)z=M[Y].boundary===I;for(Y=b+1;!z&&Y<M.length&&M[Y].end<=I.y2;Y++)z=M[Y].boundary===I;for(Y=0;!z&&Y<lt.length;Y++)z=lt[Y].boundary===I;z||(I.x2New=X)}Array.prototype.splice.apply(M,[_,b-_+1,...lt])}for(const V of M){const _=V.boundary;_.x2New===void 0&&(_.x2New=Math.max(S,_.x2))}}class g{constructor({textContent:d,textContentStream:O,container:M,viewport:V,textDivs:_,textContentItemsStr:b,enhanceTextSelection:m}){var I;m&&(0,i.deprecated)("The `enhanceTextSelection` functionality will be removed in the future."),this._textContent=d,this._textContentStream=O,this._container=M,this._document=M.ownerDocument,this._viewport=V,this._textDivs=_||[],this._textContentItemsStr=b||[],this._enhanceTextSelection=!!m,this._fontInspectorEnabled=!!((I=globalThis.FontInspector)!=null&&I.enabled),this._reader=null,this._layoutTextLastFontSize=null,this._layoutTextLastFontFamily=null,this._layoutTextCtx=null,this._textDivProperties=new WeakMap,this._renderingDone=!1,this._canceled=!1,this._capability=(0,n.createPromiseCapability)(),this._renderTimer=null,this._bounds=[],this._devicePixelRatio=globalThis.devicePixelRatio||1,this._capability.promise.finally(()=>{this._enhanceTextSelection||(this._textDivProperties=null),this._layoutTextCtx&&(this._layoutTextCtx.canvas.width=0,this._layoutTextCtx.canvas.height=0,this._layoutTextCtx=null)}).catch(()=>{})}get promise(){return this._capability.promise}cancel(){this._canceled=!0,this._reader&&(this._reader.cancel(new n.AbortException("TextLayer task cancelled.")).catch(()=>{}),this._reader=null),this._renderTimer!==null&&(clearTimeout(this._renderTimer),this._renderTimer=null),this._capability.reject(new Error("TextLayer task cancelled."))}_processItems(d,O){for(let M=0,V=d.length;M<V;M++){if(d[M].str===void 0){if(d[M].type==="beginMarkedContentProps"||d[M].type==="beginMarkedContent"){const _=this._container;this._container=document.createElement("span"),this._container.classList.add("markedContent"),d[M].id!==null&&this._container.setAttribute("id",`${d[M].id}`),_.append(this._container)}else d[M].type==="endMarkedContent"&&(this._container=this._container.parentNode);continue}this._textContentItemsStr.push(d[M].str),F(this,d[M],O,this._layoutTextCtx)}}_layoutText(d){const O=this._textDivProperties.get(d);let M="";if(O.canvasWidth!==0&&O.hasText){const{fontFamily:V}=d.style,{fontSize:_}=O;(_!==this._layoutTextLastFontSize||V!==this._layoutTextLastFontFamily)&&(this._layoutTextCtx.font=`${_*this._devicePixelRatio}px ${V}`,this._layoutTextLastFontSize=_,this._layoutTextLastFontFamily=V);const{width:b}=this._layoutTextCtx.measureText(d.textContent);if(b>0){const m=this._devicePixelRatio*O.canvasWidth/b;this._enhanceTextSelection&&(O.scale=m),M=`scaleX(${m})`}}if(O.angle!==0&&(M=`rotate(${O.angle}deg) ${M}`),M.length>0&&(this._enhanceTextSelection&&(O.originalTransform=M),d.style.transform=M),O.hasText&&this._container.append(d),O.hasEOL){const V=document.createElement("br");V.setAttribute("role","presentation"),this._container.append(V)}}_render(d=0){const O=(0,n.createPromiseCapability)();let M=Object.create(null);const V=this._document.createElement("canvas");if(V.height=V.width=h,this._layoutTextCtx=V.getContext("2d",{alpha:!1}),this._textContent){const _=this._textContent.items,b=this._textContent.styles;this._processItems(_,b),O.resolve()}else if(this._textContentStream){const _=()=>{this._reader.read().then(({value:b,done:m})=>{if(m){O.resolve();return}Object.assign(M,b.styles),this._processItems(b.items,M),_()},O.reject)};this._reader=this._textContentStream.getReader(),_()}else throw new Error('Neither "textContent" nor "textContentStream" parameters specified.');O.promise.then(()=>{M=null,d?this._renderTimer=setTimeout(()=>{k(this),this._renderTimer=null},d):k(this)},this._capability.reject)}expandTextDivs(d=!1){if(!this._enhanceTextSelection||!this._renderingDone)return;this._bounds!==null&&(f(this),this._bounds=null);const O=[],M=[];for(let V=0,_=this._textDivs.length;V<_;V++){const b=this._textDivs[V],m=this._textDivProperties.get(b);m.hasText&&(d?(O.length=0,M.length=0,m.originalTransform&&O.push(m.originalTransform),m.paddingTop>0?(M.push(`${m.paddingTop}px`),O.push(`translateY(${-m.paddingTop}px)`)):M.push(0),m.paddingRight>0?M.push(`${m.paddingRight/m.scale}px`):M.push(0),m.paddingBottom>0?M.push(`${m.paddingBottom}px`):M.push(0),m.paddingLeft>0?(M.push(`${m.paddingLeft/m.scale}px`),O.push(`translateX(${-m.paddingLeft/m.scale}px)`)):M.push(0),b.style.padding=M.join(" "),O.length&&(b.style.transform=O.join(" "))):(b.style.padding=null,b.style.transform=m.originalTransform))}}}e.TextLayerRenderTask=g;function R(S){const d=new g({textContent:S.textContent,textContentStream:S.textContentStream,container:S.container,viewport:S.viewport,textDivs:S.textDivs,textContentItemsStr:S.textContentItemsStr,enhanceTextSelection:S.enhanceTextSelection});return d._render(S.timeout),d}},(t,e,s)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.SVGGraphics=void 0;var n=s(8),i=s(1),r=s(3);let h=class{constructor(){(0,i.unreachable)("Not implemented: SVGGraphics")}};e.SVGGraphics=h;{let R=function(_){let b=[];const m=[];for(const I of _){if(I.fn==="save"){b.push({fnId:92,fn:"group",items:[]}),m.push(b),b=b.at(-1).items;continue}I.fn==="restore"?b=m.pop():b.push(I)}return b},S=function(_){if(Number.isInteger(_))return _.toString();const b=_.toFixed(10);let m=b.length-1;if(b[m]!=="0")return b;do m--;while(b[m]==="0");return b.substring(0,b[m]==="."?m:m+1)},d=function(_){if(_[4]===0&&_[5]===0){if(_[1]===0&&_[2]===0)return _[0]===1&&_[3]===1?"":`scale(${S(_[0])} ${S(_[3])})`;if(_[0]===_[3]&&_[1]===-_[2]){const b=Math.acos(_[0])*180/Math.PI;return`rotate(${S(b)})`}}else if(_[0]===1&&_[1]===0&&_[2]===0&&_[3]===1)return`translate(${S(_[4])} ${S(_[5])})`;return`matrix(${S(_[0])} ${S(_[1])} ${S(_[2])} ${S(_[3])} ${S(_[4])} ${S(_[5])})`};var T=R,E=S,v=d;const y={fontStyle:"normal",fontWeight:"normal",fillColor:"#000000"},F="http://www.w3.org/XML/1998/namespace",k="http://www.w3.org/1999/xlink",w=["butt","round","square"],f=["miter","round","bevel"],a=function(_,b="",m=!1){if(URL.createObjectURL&&typeof Blob<"u"&&!m)return URL.createObjectURL(new Blob([_],{type:b}));const I="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";let j=`data:${b};base64,`;for(let Y=0,X=_.length;Y<X;Y+=3){const lt=_[Y]&255,Q=_[Y+1]&255,z=_[Y+2]&255,st=lt>>2,dt=(lt&3)<<4|Q>>4,ft=Y+1<X?(Q&15)<<2|z>>6:64,pt=Y+2<X?z&63:64;j+=I[st]+I[dt]+I[ft]+I[pt]}return j},u=function(){const _=new Uint8Array([137,80,78,71,13,10,26,10]),b=12,m=new Int32Array(256);for(let z=0;z<256;z++){let st=z;for(let dt=0;dt<8;dt++)st&1?st=3988292384^st>>1&2147483647:st=st>>1&2147483647;m[z]=st}function I(z,st,dt){let ft=-1;for(let pt=st;pt<dt;pt++){const U=(ft^z[pt])&255,x=m[U];ft=ft>>>8^x}return ft^-1}function j(z,st,dt,ft){let pt=ft;const U=st.length;dt[pt]=U>>24&255,dt[pt+1]=U>>16&255,dt[pt+2]=U>>8&255,dt[pt+3]=U&255,pt+=4,dt[pt]=z.charCodeAt(0)&255,dt[pt+1]=z.charCodeAt(1)&255,dt[pt+2]=z.charCodeAt(2)&255,dt[pt+3]=z.charCodeAt(3)&255,pt+=4,dt.set(st,pt),pt+=st.length;const x=I(dt,ft+4,pt);dt[pt]=x>>24&255,dt[pt+1]=x>>16&255,dt[pt+2]=x>>8&255,dt[pt+3]=x&255}function Y(z,st,dt){let ft=1,pt=0;for(let U=st;U<dt;++U)ft=(ft+(z[U]&255))%65521,pt=(pt+ft)%65521;return pt<<16|ft}function X(z){if(!r.isNodeJS)return lt(z);try{let st;parseInt(process.versions.node)>=8?st=z:st=Buffer.from(z);const dt=require$$5.deflateSync(st,{level:9});return dt instanceof Uint8Array?dt:new Uint8Array(dt)}catch(st){(0,i.warn)("Not compressing PNG because zlib.deflateSync is unavailable: "+st)}return lt(z)}function lt(z){let st=z.length;const dt=65535,ft=Math.ceil(st/dt),pt=new Uint8Array(2+st+ft*5+4);let U=0;pt[U++]=120,pt[U++]=156;let x=0;for(;st>dt;)pt[U++]=0,pt[U++]=255,pt[U++]=255,pt[U++]=0,pt[U++]=0,pt.set(z.subarray(x,x+dt),U),U+=dt,x+=dt,st-=dt;pt[U++]=1,pt[U++]=st&255,pt[U++]=st>>8&255,pt[U++]=~st&65535&255,pt[U++]=(~st&65535)>>8&255,pt.set(z.subarray(x),U),U+=z.length-x;const A=Y(z,0,z.length);return pt[U++]=A>>24&255,pt[U++]=A>>16&255,pt[U++]=A>>8&255,pt[U++]=A&255,pt}function Q(z,st,dt,ft){const pt=z.width,U=z.height;let x,A,L;const q=z.data;switch(st){case i.ImageKind.GRAYSCALE_1BPP:A=0,x=1,L=pt+7>>3;break;case i.ImageKind.RGB_24BPP:A=2,x=8,L=pt*3;break;case i.ImageKind.RGBA_32BPP:A=6,x=8,L=pt*4;break;default:throw new Error("invalid format")}const $=new Uint8Array((1+L)*U);let G=0,nt=0;for(let C=0;C<U;++C)$[G++]=0,$.set(q.subarray(nt,nt+L),G),nt+=L,G+=L;if(st===i.ImageKind.GRAYSCALE_1BPP&&ft){G=0;for(let C=0;C<U;C++){G++;for(let N=0;N<L;N++)$[G++]^=255}}const at=new Uint8Array([pt>>24&255,pt>>16&255,pt>>8&255,pt&255,U>>24&255,U>>16&255,U>>8&255,U&255,x,A,0,0,0]),c=X($),P=_.length+b*3+at.length+c.length,o=new Uint8Array(P);let l=0;return o.set(_,l),l+=_.length,j("IHDR",at,o,l),l+=b+at.length,j("IDATA",c,o,l),l+=b+c.length,j("IEND",new Uint8Array(0),o,l),a(o,"image/png",dt)}return function(st,dt,ft){const pt=st.kind===void 0?i.ImageKind.GRAYSCALE_1BPP:st.kind;return Q(st,pt,dt,ft)}}();class g{constructor(){this.fontSizeScale=1,this.fontWeight=y.fontWeight,this.fontSize=0,this.textMatrix=i.IDENTITY_MATRIX,this.fontMatrix=i.FONT_IDENTITY_MATRIX,this.leading=0,this.textRenderingMode=i.TextRenderingMode.FILL,this.textMatrixScale=1,this.x=0,this.y=0,this.lineX=0,this.lineY=0,this.charSpacing=0,this.wordSpacing=0,this.textHScale=1,this.textRise=0,this.fillColor=y.fillColor,this.strokeColor="#000000",this.fillAlpha=1,this.strokeAlpha=1,this.lineWidth=1,this.lineJoin="",this.lineCap="",this.miterLimit=0,this.dashArray=[],this.dashPhase=0,this.dependencies=[],this.activeClipUrl=null,this.clipGroup=null,this.maskId=""}clone(){return Object.create(this)}setCurrentPoint(b,m){this.x=b,this.y=m}}let O=0,M=0,V=0;e.SVGGraphics=h=class{constructor(_,b,m=!1){(0,n.deprecated)("The SVG back-end is no longer maintained and *may* be removed in the future."),this.svgFactory=new n.DOMSVGFactory,this.current=new g,this.transformMatrix=i.IDENTITY_MATRIX,this.transformStack=[],this.extraStack=[],this.commonObjs=_,this.objs=b,this.pendingClip=null,this.pendingEOFill=!1,this.embedFonts=!1,this.embeddedFonts=Object.create(null),this.cssStyle=null,this.forceDataSchema=!!m,this._operatorIdMapping=[];for(const I in i.OPS)this._operatorIdMapping[i.OPS[I]]=I}save(){this.transformStack.push(this.transformMatrix);const _=this.current;this.extraStack.push(_),this.current=_.clone()}restore(){this.transformMatrix=this.transformStack.pop(),this.current=this.extraStack.pop(),this.pendingClip=null,this.tgrp=null}group(_){this.save(),this.executeOpTree(_),this.restore()}loadDependencies(_){const b=_.fnArray,m=_.argsArray;for(let I=0,j=b.length;I<j;I++)if(b[I]===i.OPS.dependency)for(const Y of m[I]){const X=Y.startsWith("g_")?this.commonObjs:this.objs,lt=new Promise(Q=>{X.get(Y,Q)});this.current.dependencies.push(lt)}return Promise.all(this.current.dependencies)}transform(_,b,m,I,j,Y){const X=[_,b,m,I,j,Y];this.transformMatrix=i.Util.transform(this.transformMatrix,X),this.tgrp=null}getSVG(_,b){this.viewport=b;const m=this._initialize(b);return this.loadDependencies(_).then(()=>(this.transformMatrix=i.IDENTITY_MATRIX,this.executeOpTree(this.convertOpList(_)),m))}convertOpList(_){const b=this._operatorIdMapping,m=_.argsArray,I=_.fnArray,j=[];for(let Y=0,X=I.length;Y<X;Y++){const lt=I[Y];j.push({fnId:lt,fn:b[lt],args:m[Y]})}return R(j)}executeOpTree(_){for(const b of _){const m=b.fn,I=b.fnId,j=b.args;switch(I|0){case i.OPS.beginText:this.beginText();break;case i.OPS.dependency:break;case i.OPS.setLeading:this.setLeading(j);break;case i.OPS.setLeadingMoveText:this.setLeadingMoveText(j[0],j[1]);break;case i.OPS.setFont:this.setFont(j);break;case i.OPS.showText:this.showText(j[0]);break;case i.OPS.showSpacedText:this.showText(j[0]);break;case i.OPS.endText:this.endText();break;case i.OPS.moveText:this.moveText(j[0],j[1]);break;case i.OPS.setCharSpacing:this.setCharSpacing(j[0]);break;case i.OPS.setWordSpacing:this.setWordSpacing(j[0]);break;case i.OPS.setHScale:this.setHScale(j[0]);break;case i.OPS.setTextMatrix:this.setTextMatrix(j[0],j[1],j[2],j[3],j[4],j[5]);break;case i.OPS.setTextRise:this.setTextRise(j[0]);break;case i.OPS.setTextRenderingMode:this.setTextRenderingMode(j[0]);break;case i.OPS.setLineWidth:this.setLineWidth(j[0]);break;case i.OPS.setLineJoin:this.setLineJoin(j[0]);break;case i.OPS.setLineCap:this.setLineCap(j[0]);break;case i.OPS.setMiterLimit:this.setMiterLimit(j[0]);break;case i.OPS.setFillRGBColor:this.setFillRGBColor(j[0],j[1],j[2]);break;case i.OPS.setStrokeRGBColor:this.setStrokeRGBColor(j[0],j[1],j[2]);break;case i.OPS.setStrokeColorN:this.setStrokeColorN(j);break;case i.OPS.setFillColorN:this.setFillColorN(j);break;case i.OPS.shadingFill:this.shadingFill(j[0]);break;case i.OPS.setDash:this.setDash(j[0],j[1]);break;case i.OPS.setRenderingIntent:this.setRenderingIntent(j[0]);break;case i.OPS.setFlatness:this.setFlatness(j[0]);break;case i.OPS.setGState:this.setGState(j[0]);break;case i.OPS.fill:this.fill();break;case i.OPS.eoFill:this.eoFill();break;case i.OPS.stroke:this.stroke();break;case i.OPS.fillStroke:this.fillStroke();break;case i.OPS.eoFillStroke:this.eoFillStroke();break;case i.OPS.clip:this.clip("nonzero");break;case i.OPS.eoClip:this.clip("evenodd");break;case i.OPS.paintSolidColorImageMask:this.paintSolidColorImageMask();break;case i.OPS.paintImageXObject:this.paintImageXObject(j[0]);break;case i.OPS.paintInlineImageXObject:this.paintInlineImageXObject(j[0]);break;case i.OPS.paintImageMaskXObject:this.paintImageMaskXObject(j[0]);break;case i.OPS.paintFormXObjectBegin:this.paintFormXObjectBegin(j[0],j[1]);break;case i.OPS.paintFormXObjectEnd:this.paintFormXObjectEnd();break;case i.OPS.closePath:this.closePath();break;case i.OPS.closeStroke:this.closeStroke();break;case i.OPS.closeFillStroke:this.closeFillStroke();break;case i.OPS.closeEOFillStroke:this.closeEOFillStroke();break;case i.OPS.nextLine:this.nextLine();break;case i.OPS.transform:this.transform(j[0],j[1],j[2],j[3],j[4],j[5]);break;case i.OPS.constructPath:this.constructPath(j[0],j[1]);break;case i.OPS.endPath:this.endPath();break;case 92:this.group(b.items);break;default:(0,i.warn)(`Unimplemented operator ${m}`);break}}}setWordSpacing(_){this.current.wordSpacing=_}setCharSpacing(_){this.current.charSpacing=_}nextLine(){this.moveText(0,this.current.leading)}setTextMatrix(_,b,m,I,j,Y){const X=this.current;X.textMatrix=X.lineMatrix=[_,b,m,I,j,Y],X.textMatrixScale=Math.hypot(_,b),X.x=X.lineX=0,X.y=X.lineY=0,X.xcoords=[],X.ycoords=[],X.tspan=this.svgFactory.createElement("svg:tspan"),X.tspan.setAttributeNS(null,"font-family",X.fontFamily),X.tspan.setAttributeNS(null,"font-size",`${S(X.fontSize)}px`),X.tspan.setAttributeNS(null,"y",S(-X.y)),X.txtElement=this.svgFactory.createElement("svg:text"),X.txtElement.append(X.tspan)}beginText(){const _=this.current;_.x=_.lineX=0,_.y=_.lineY=0,_.textMatrix=i.IDENTITY_MATRIX,_.lineMatrix=i.IDENTITY_MATRIX,_.textMatrixScale=1,_.tspan=this.svgFactory.createElement("svg:tspan"),_.txtElement=this.svgFactory.createElement("svg:text"),_.txtgrp=this.svgFactory.createElement("svg:g"),_.xcoords=[],_.ycoords=[]}moveText(_,b){const m=this.current;m.x=m.lineX+=_,m.y=m.lineY+=b,m.xcoords=[],m.ycoords=[],m.tspan=this.svgFactory.createElement("svg:tspan"),m.tspan.setAttributeNS(null,"font-family",m.fontFamily),m.tspan.setAttributeNS(null,"font-size",`${S(m.fontSize)}px`),m.tspan.setAttributeNS(null,"y",S(-m.y))}showText(_){const b=this.current,m=b.font,I=b.fontSize;if(I===0)return;const j=b.fontSizeScale,Y=b.charSpacing,X=b.wordSpacing,lt=b.fontDirection,Q=b.textHScale*lt,z=m.vertical,st=z?1:-1,dt=m.defaultVMetrics,ft=I*b.fontMatrix[0];let pt=0;for(const A of _){if(A===null){pt+=lt*X;continue}else if(typeof A=="number"){pt+=st*A*I/1e3;continue}const L=(A.isSpace?X:0)+Y,q=A.fontChar;let $,G,nt=A.width;if(z){let c;const P=A.vmetric||dt;c=A.vmetric?P[1]:nt*.5,c=-c*ft;const o=P[2]*ft;nt=P?-P[0]:nt,$=c/j,G=(pt+o)/j}else $=pt/j,G=0;(A.isInFont||m.missingFile)&&(b.xcoords.push(b.x+$),z&&b.ycoords.push(-b.y+G),b.tspan.textContent+=q);let at;z?at=nt*ft-L*lt:at=nt*ft+L*lt,pt+=at}b.tspan.setAttributeNS(null,"x",b.xcoords.map(S).join(" ")),z?b.tspan.setAttributeNS(null,"y",b.ycoords.map(S).join(" ")):b.tspan.setAttributeNS(null,"y",S(-b.y)),z?b.y-=pt:b.x+=pt*Q,b.tspan.setAttributeNS(null,"font-family",b.fontFamily),b.tspan.setAttributeNS(null,"font-size",`${S(b.fontSize)}px`),b.fontStyle!==y.fontStyle&&b.tspan.setAttributeNS(null,"font-style",b.fontStyle),b.fontWeight!==y.fontWeight&&b.tspan.setAttributeNS(null,"font-weight",b.fontWeight);const U=b.textRenderingMode&i.TextRenderingMode.FILL_STROKE_MASK;if(U===i.TextRenderingMode.FILL||U===i.TextRenderingMode.FILL_STROKE?(b.fillColor!==y.fillColor&&b.tspan.setAttributeNS(null,"fill",b.fillColor),b.fillAlpha<1&&b.tspan.setAttributeNS(null,"fill-opacity",b.fillAlpha)):b.textRenderingMode===i.TextRenderingMode.ADD_TO_PATH?b.tspan.setAttributeNS(null,"fill","transparent"):b.tspan.setAttributeNS(null,"fill","none"),U===i.TextRenderingMode.STROKE||U===i.TextRenderingMode.FILL_STROKE){const A=1/(b.textMatrixScale||1);this._setStrokeAttributes(b.tspan,A)}let x=b.textMatrix;b.textRise!==0&&(x=x.slice(),x[5]+=b.textRise),b.txtElement.setAttributeNS(null,"transform",`${d(x)} scale(${S(Q)}, -1)`),b.txtElement.setAttributeNS(F,"xml:space","preserve"),b.txtElement.append(b.tspan),b.txtgrp.append(b.txtElement),this._ensureTransformGroup().append(b.txtElement)}setLeadingMoveText(_,b){this.setLeading(-b),this.moveText(_,b)}addFontStyle(_){if(!_.data)throw new Error('addFontStyle: No font data available, ensure that the "fontExtraProperties" API parameter is set.');this.cssStyle||(this.cssStyle=this.svgFactory.createElement("svg:style"),this.cssStyle.setAttributeNS(null,"type","text/css"),this.defs.append(this.cssStyle));const b=a(_.data,_.mimetype,this.forceDataSchema);this.cssStyle.textContent+=`@font-face { font-family: "${_.loadedName}"; src: url(${b}); }
`}setFont(_){const b=this.current,m=this.commonObjs.get(_[0]);let I=_[1];b.font=m,this.embedFonts&&!m.missingFile&&!this.embeddedFonts[m.loadedName]&&(this.addFontStyle(m),this.embeddedFonts[m.loadedName]=m),b.fontMatrix=m.fontMatrix||i.FONT_IDENTITY_MATRIX;let j="normal";m.black?j="900":m.bold&&(j="bold");const Y=m.italic?"italic":"normal";I<0?(I=-I,b.fontDirection=-1):b.fontDirection=1,b.fontSize=I,b.fontFamily=m.loadedName,b.fontWeight=j,b.fontStyle=Y,b.tspan=this.svgFactory.createElement("svg:tspan"),b.tspan.setAttributeNS(null,"y",S(-b.y)),b.xcoords=[],b.ycoords=[]}endText(){var b;const _=this.current;_.textRenderingMode&i.TextRenderingMode.ADD_TO_PATH_FLAG&&((b=_.txtElement)!=null&&b.hasChildNodes())&&(_.element=_.txtElement,this.clip("nonzero"),this.endPath())}setLineWidth(_){_>0&&(this.current.lineWidth=_)}setLineCap(_){this.current.lineCap=w[_]}setLineJoin(_){this.current.lineJoin=f[_]}setMiterLimit(_){this.current.miterLimit=_}setStrokeAlpha(_){this.current.strokeAlpha=_}setStrokeRGBColor(_,b,m){this.current.strokeColor=i.Util.makeHexColor(_,b,m)}setFillAlpha(_){this.current.fillAlpha=_}setFillRGBColor(_,b,m){this.current.fillColor=i.Util.makeHexColor(_,b,m),this.current.tspan=this.svgFactory.createElement("svg:tspan"),this.current.xcoords=[],this.current.ycoords=[]}setStrokeColorN(_){this.current.strokeColor=this._makeColorN_Pattern(_)}setFillColorN(_){this.current.fillColor=this._makeColorN_Pattern(_)}shadingFill(_){const b=this.viewport.width,m=this.viewport.height,I=i.Util.inverseTransform(this.transformMatrix),j=i.Util.applyTransform([0,0],I),Y=i.Util.applyTransform([0,m],I),X=i.Util.applyTransform([b,0],I),lt=i.Util.applyTransform([b,m],I),Q=Math.min(j[0],Y[0],X[0],lt[0]),z=Math.min(j[1],Y[1],X[1],lt[1]),st=Math.max(j[0],Y[0],X[0],lt[0]),dt=Math.max(j[1],Y[1],X[1],lt[1]),ft=this.svgFactory.createElement("svg:rect");ft.setAttributeNS(null,"x",Q),ft.setAttributeNS(null,"y",z),ft.setAttributeNS(null,"width",st-Q),ft.setAttributeNS(null,"height",dt-z),ft.setAttributeNS(null,"fill",this._makeShadingPattern(_)),this.current.fillAlpha<1&&ft.setAttributeNS(null,"fill-opacity",this.current.fillAlpha),this._ensureTransformGroup().append(ft)}_makeColorN_Pattern(_){return _[0]==="TilingPattern"?this._makeTilingPattern(_):this._makeShadingPattern(_)}_makeTilingPattern(_){const b=_[1],m=_[2],I=_[3]||i.IDENTITY_MATRIX,[j,Y,X,lt]=_[4],Q=_[5],z=_[6],st=_[7],dt=`shading${V++}`,[ft,pt,U,x]=i.Util.normalizeRect([...i.Util.applyTransform([j,Y],I),...i.Util.applyTransform([X,lt],I)]),[A,L]=i.Util.singularValueDecompose2dScale(I),q=Q*A,$=z*L,G=this.svgFactory.createElement("svg:pattern");G.setAttributeNS(null,"id",dt),G.setAttributeNS(null,"patternUnits","userSpaceOnUse"),G.setAttributeNS(null,"width",q),G.setAttributeNS(null,"height",$),G.setAttributeNS(null,"x",`${ft}`),G.setAttributeNS(null,"y",`${pt}`);const nt=this.svg,at=this.transformMatrix,c=this.current.fillColor,P=this.current.strokeColor,o=this.svgFactory.create(U-ft,x-pt);if(this.svg=o,this.transformMatrix=I,st===2){const l=i.Util.makeHexColor(...b);this.current.fillColor=l,this.current.strokeColor=l}return this.executeOpTree(this.convertOpList(m)),this.svg=nt,this.transformMatrix=at,this.current.fillColor=c,this.current.strokeColor=P,G.append(o.childNodes[0]),this.defs.append(G),`url(#${dt})`}_makeShadingPattern(_){switch(typeof _=="string"&&(_=this.objs.get(_)),_[0]){case"RadialAxial":const b=`shading${V++}`,m=_[3];let I;switch(_[1]){case"axial":const j=_[4],Y=_[5];I=this.svgFactory.createElement("svg:linearGradient"),I.setAttributeNS(null,"id",b),I.setAttributeNS(null,"gradientUnits","userSpaceOnUse"),I.setAttributeNS(null,"x1",j[0]),I.setAttributeNS(null,"y1",j[1]),I.setAttributeNS(null,"x2",Y[0]),I.setAttributeNS(null,"y2",Y[1]);break;case"radial":const X=_[4],lt=_[5],Q=_[6],z=_[7];I=this.svgFactory.createElement("svg:radialGradient"),I.setAttributeNS(null,"id",b),I.setAttributeNS(null,"gradientUnits","userSpaceOnUse"),I.setAttributeNS(null,"cx",lt[0]),I.setAttributeNS(null,"cy",lt[1]),I.setAttributeNS(null,"r",z),I.setAttributeNS(null,"fx",X[0]),I.setAttributeNS(null,"fy",X[1]),I.setAttributeNS(null,"fr",Q);break;default:throw new Error(`Unknown RadialAxial type: ${_[1]}`)}for(const j of m){const Y=this.svgFactory.createElement("svg:stop");Y.setAttributeNS(null,"offset",j[0]),Y.setAttributeNS(null,"stop-color",j[1]),I.append(Y)}return this.defs.append(I),`url(#${b})`;case"Mesh":return(0,i.warn)("Unimplemented pattern Mesh"),null;case"Dummy":return"hotpink";default:throw new Error(`Unknown IR type: ${_[0]}`)}}setDash(_,b){this.current.dashArray=_,this.current.dashPhase=b}constructPath(_,b){const m=this.current;let I=m.x,j=m.y,Y=[],X=0;for(const lt of _)switch(lt|0){case i.OPS.rectangle:I=b[X++],j=b[X++];const Q=b[X++],z=b[X++],st=I+Q,dt=j+z;Y.push("M",S(I),S(j),"L",S(st),S(j),"L",S(st),S(dt),"L",S(I),S(dt),"Z");break;case i.OPS.moveTo:I=b[X++],j=b[X++],Y.push("M",S(I),S(j));break;case i.OPS.lineTo:I=b[X++],j=b[X++],Y.push("L",S(I),S(j));break;case i.OPS.curveTo:I=b[X+4],j=b[X+5],Y.push("C",S(b[X]),S(b[X+1]),S(b[X+2]),S(b[X+3]),S(I),S(j)),X+=6;break;case i.OPS.curveTo2:Y.push("C",S(I),S(j),S(b[X]),S(b[X+1]),S(b[X+2]),S(b[X+3])),I=b[X+2],j=b[X+3],X+=4;break;case i.OPS.curveTo3:I=b[X+2],j=b[X+3],Y.push("C",S(b[X]),S(b[X+1]),S(I),S(j),S(I),S(j)),X+=4;break;case i.OPS.closePath:Y.push("Z");break}Y=Y.join(" "),m.path&&_.length>0&&_[0]!==i.OPS.rectangle&&_[0]!==i.OPS.moveTo?Y=m.path.getAttributeNS(null,"d")+Y:(m.path=this.svgFactory.createElement("svg:path"),this._ensureTransformGroup().append(m.path)),m.path.setAttributeNS(null,"d",Y),m.path.setAttributeNS(null,"fill","none"),m.element=m.path,m.setCurrentPoint(I,j)}endPath(){const _=this.current;if(_.path=null,!this.pendingClip)return;if(!_.element){this.pendingClip=null;return}const b=`clippath${O++}`,m=this.svgFactory.createElement("svg:clipPath");m.setAttributeNS(null,"id",b),m.setAttributeNS(null,"transform",d(this.transformMatrix));const I=_.element.cloneNode(!0);if(this.pendingClip==="evenodd"?I.setAttributeNS(null,"clip-rule","evenodd"):I.setAttributeNS(null,"clip-rule","nonzero"),this.pendingClip=null,m.append(I),this.defs.append(m),_.activeClipUrl){_.clipGroup=null;for(const j of this.extraStack)j.clipGroup=null;m.setAttributeNS(null,"clip-path",_.activeClipUrl)}_.activeClipUrl=`url(#${b})`,this.tgrp=null}clip(_){this.pendingClip=_}closePath(){const _=this.current;if(_.path){const b=`${_.path.getAttributeNS(null,"d")}Z`;_.path.setAttributeNS(null,"d",b)}}setLeading(_){this.current.leading=-_}setTextRise(_){this.current.textRise=_}setTextRenderingMode(_){this.current.textRenderingMode=_}setHScale(_){this.current.textHScale=_/100}setRenderingIntent(_){}setFlatness(_){}setGState(_){for(const[b,m]of _)switch(b){case"LW":this.setLineWidth(m);break;case"LC":this.setLineCap(m);break;case"LJ":this.setLineJoin(m);break;case"ML":this.setMiterLimit(m);break;case"D":this.setDash(m[0],m[1]);break;case"RI":this.setRenderingIntent(m);break;case"FL":this.setFlatness(m);break;case"Font":this.setFont(m);break;case"CA":this.setStrokeAlpha(m);break;case"ca":this.setFillAlpha(m);break;default:(0,i.warn)(`Unimplemented graphic state operator ${b}`);break}}fill(){const _=this.current;_.element&&(_.element.setAttributeNS(null,"fill",_.fillColor),_.element.setAttributeNS(null,"fill-opacity",_.fillAlpha),this.endPath())}stroke(){const _=this.current;_.element&&(this._setStrokeAttributes(_.element),_.element.setAttributeNS(null,"fill","none"),this.endPath())}_setStrokeAttributes(_,b=1){const m=this.current;let I=m.dashArray;b!==1&&I.length>0&&(I=I.map(function(j){return b*j})),_.setAttributeNS(null,"stroke",m.strokeColor),_.setAttributeNS(null,"stroke-opacity",m.strokeAlpha),_.setAttributeNS(null,"stroke-miterlimit",S(m.miterLimit)),_.setAttributeNS(null,"stroke-linecap",m.lineCap),_.setAttributeNS(null,"stroke-linejoin",m.lineJoin),_.setAttributeNS(null,"stroke-width",S(b*m.lineWidth)+"px"),_.setAttributeNS(null,"stroke-dasharray",I.map(S).join(" ")),_.setAttributeNS(null,"stroke-dashoffset",S(b*m.dashPhase)+"px")}eoFill(){this.current.element&&this.current.element.setAttributeNS(null,"fill-rule","evenodd"),this.fill()}fillStroke(){this.stroke(),this.fill()}eoFillStroke(){this.current.element&&this.current.element.setAttributeNS(null,"fill-rule","evenodd"),this.fillStroke()}closeStroke(){this.closePath(),this.stroke()}closeFillStroke(){this.closePath(),this.fillStroke()}closeEOFillStroke(){this.closePath(),this.eoFillStroke()}paintSolidColorImageMask(){const _=this.svgFactory.createElement("svg:rect");_.setAttributeNS(null,"x","0"),_.setAttributeNS(null,"y","0"),_.setAttributeNS(null,"width","1px"),_.setAttributeNS(null,"height","1px"),_.setAttributeNS(null,"fill",this.current.fillColor),this._ensureTransformGroup().append(_)}paintImageXObject(_){const b=_.startsWith("g_")?this.commonObjs.get(_):this.objs.get(_);if(!b){(0,i.warn)(`Dependent image with object ID ${_} is not ready yet`);return}this.paintInlineImageXObject(b)}paintInlineImageXObject(_,b){const m=_.width,I=_.height,j=u(_,this.forceDataSchema,!!b),Y=this.svgFactory.createElement("svg:rect");Y.setAttributeNS(null,"x","0"),Y.setAttributeNS(null,"y","0"),Y.setAttributeNS(null,"width",S(m)),Y.setAttributeNS(null,"height",S(I)),this.current.element=Y,this.clip("nonzero");const X=this.svgFactory.createElement("svg:image");X.setAttributeNS(k,"xlink:href",j),X.setAttributeNS(null,"x","0"),X.setAttributeNS(null,"y",S(-I)),X.setAttributeNS(null,"width",S(m)+"px"),X.setAttributeNS(null,"height",S(I)+"px"),X.setAttributeNS(null,"transform",`scale(${S(1/m)} ${S(-1/I)})`),b?b.append(X):this._ensureTransformGroup().append(X)}paintImageMaskXObject(_){const b=this.current,m=_.width,I=_.height,j=b.fillColor;b.maskId=`mask${M++}`;const Y=this.svgFactory.createElement("svg:mask");Y.setAttributeNS(null,"id",b.maskId);const X=this.svgFactory.createElement("svg:rect");X.setAttributeNS(null,"x","0"),X.setAttributeNS(null,"y","0"),X.setAttributeNS(null,"width",S(m)),X.setAttributeNS(null,"height",S(I)),X.setAttributeNS(null,"fill",j),X.setAttributeNS(null,"mask",`url(#${b.maskId})`),this.defs.append(Y),this._ensureTransformGroup().append(X),this.paintInlineImageXObject(_,Y)}paintFormXObjectBegin(_,b){if(Array.isArray(_)&&_.length===6&&this.transform(_[0],_[1],_[2],_[3],_[4],_[5]),b){const m=b[2]-b[0],I=b[3]-b[1],j=this.svgFactory.createElement("svg:rect");j.setAttributeNS(null,"x",b[0]),j.setAttributeNS(null,"y",b[1]),j.setAttributeNS(null,"width",S(m)),j.setAttributeNS(null,"height",S(I)),this.current.element=j,this.clip("nonzero"),this.endPath()}}paintFormXObjectEnd(){}_initialize(_){const b=this.svgFactory.create(_.width,_.height),m=this.svgFactory.createElement("svg:defs");b.append(m),this.defs=m;const I=this.svgFactory.createElement("svg:g");return I.setAttributeNS(null,"transform",d(_.transform)),b.append(I),this.svg=I,b}_ensureClipGroup(){if(!this.current.clipGroup){const _=this.svgFactory.createElement("svg:g");_.setAttributeNS(null,"clip-path",this.current.activeClipUrl),this.svg.append(_),this.current.clipGroup=_}return this.current.clipGroup}_ensureTransformGroup(){return this.tgrp||(this.tgrp=this.svgFactory.createElement("svg:g"),this.tgrp.setAttributeNS(null,"transform",d(this.transformMatrix)),this.current.activeClipUrl?this._ensureClipGroup().append(this.tgrp):this.svg.append(this.tgrp)),this.tgrp}}}},(t,e,s)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.PDFNodeStream=void 0;var n=s(1),i=s(33);const r=require$$5,h=require$$5,T=require$$5,E=require$$5,v=/^file:\/\/\/[a-zA-Z]:\//;function y(S){const d=E.parse(S);return d.protocol==="file:"||d.host?d:/^[a-z]:[/\\]/i.test(S)?E.parse(`file:///${S}`):(d.host||(d.protocol="file:"),d)}class F{constructor(d){this.source=d,this.url=y(d.url),this.isHttp=this.url.protocol==="http:"||this.url.protocol==="https:",this.isFsUrl=this.url.protocol==="file:",this.httpHeaders=this.isHttp&&d.httpHeaders||{},this._fullRequestReader=null,this._rangeRequestReaders=[]}get _progressiveDataLength(){var d;return((d=this._fullRequestReader)==null?void 0:d._loaded)??0}getFullReader(){return(0,n.assert)(!this._fullRequestReader,"PDFNodeStream.getFullReader can only be called once."),this._fullRequestReader=this.isFsUrl?new g(this):new a(this),this._fullRequestReader}getRangeReader(d,O){if(O<=this._progressiveDataLength)return null;const M=this.isFsUrl?new R(this,d,O):new u(this,d,O);return this._rangeRequestReaders.push(M),M}cancelAllRequests(d){this._fullRequestReader&&this._fullRequestReader.cancel(d);for(const O of this._rangeRequestReaders.slice(0))O.cancel(d)}}e.PDFNodeStream=F;class k{constructor(d){this._url=d.url,this._done=!1,this._storedError=null,this.onProgress=null;const O=d.source;this._contentLength=O.length,this._loaded=0,this._filename=null,this._disableRange=O.disableRange||!1,this._rangeChunkSize=O.rangeChunkSize,!this._rangeChunkSize&&!this._disableRange&&(this._disableRange=!0),this._isStreamingSupported=!O.disableStream,this._isRangeSupported=!O.disableRange,this._readableStream=null,this._readCapability=(0,n.createPromiseCapability)(),this._headersCapability=(0,n.createPromiseCapability)()}get headersReady(){return this._headersCapability.promise}get filename(){return this._filename}get contentLength(){return this._contentLength}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}async read(){if(await this._readCapability.promise,this._done)return{value:void 0,done:!0};if(this._storedError)throw this._storedError;const d=this._readableStream.read();return d===null?(this._readCapability=(0,n.createPromiseCapability)(),this.read()):(this._loaded+=d.length,this.onProgress&&this.onProgress({loaded:this._loaded,total:this._contentLength}),{value:new Uint8Array(d).buffer,done:!1})}cancel(d){if(!this._readableStream){this._error(d);return}this._readableStream.destroy(d)}_error(d){this._storedError=d,this._readCapability.resolve()}_setReadableStream(d){this._readableStream=d,d.on("readable",()=>{this._readCapability.resolve()}),d.on("end",()=>{d.destroy(),this._done=!0,this._readCapability.resolve()}),d.on("error",O=>{this._error(O)}),!this._isStreamingSupported&&this._isRangeSupported&&this._error(new n.AbortException("streaming is disabled")),this._storedError&&this._readableStream.destroy(this._storedError)}}class w{constructor(d){this._url=d.url,this._done=!1,this._storedError=null,this.onProgress=null,this._loaded=0,this._readableStream=null,this._readCapability=(0,n.createPromiseCapability)();const O=d.source;this._isStreamingSupported=!O.disableStream}get isStreamingSupported(){return this._isStreamingSupported}async read(){if(await this._readCapability.promise,this._done)return{value:void 0,done:!0};if(this._storedError)throw this._storedError;const d=this._readableStream.read();return d===null?(this._readCapability=(0,n.createPromiseCapability)(),this.read()):(this._loaded+=d.length,this.onProgress&&this.onProgress({loaded:this._loaded}),{value:new Uint8Array(d).buffer,done:!1})}cancel(d){if(!this._readableStream){this._error(d);return}this._readableStream.destroy(d)}_error(d){this._storedError=d,this._readCapability.resolve()}_setReadableStream(d){this._readableStream=d,d.on("readable",()=>{this._readCapability.resolve()}),d.on("end",()=>{d.destroy(),this._done=!0,this._readCapability.resolve()}),d.on("error",O=>{this._error(O)}),this._storedError&&this._readableStream.destroy(this._storedError)}}function f(S,d){return{protocol:S.protocol,auth:S.auth,host:S.hostname,port:S.port,path:S.path,method:"GET",headers:d}}class a extends k{constructor(d){super(d);const O=M=>{if(M.statusCode===404){const m=new n.MissingPDFException(`Missing PDF "${this._url}".`);this._storedError=m,this._headersCapability.reject(m);return}this._headersCapability.resolve(),this._setReadableStream(M);const V=m=>this._readableStream.headers[m.toLowerCase()],{allowRangeRequests:_,suggestedLength:b}=(0,i.validateRangeRequestCapabilities)({getResponseHeader:V,isHttp:d.isHttp,rangeChunkSize:this._rangeChunkSize,disableRange:this._disableRange});this._isRangeSupported=_,this._contentLength=b||this._contentLength,this._filename=(0,i.extractFilenameFromHeader)(V)};this._request=null,this._url.protocol==="http:"?this._request=h.request(f(this._url,d.httpHeaders),O):this._request=T.request(f(this._url,d.httpHeaders),O),this._request.on("error",M=>{this._storedError=M,this._headersCapability.reject(M)}),this._request.end()}}class u extends w{constructor(d,O,M){super(d),this._httpHeaders={};for(const _ in d.httpHeaders){const b=d.httpHeaders[_];typeof b>"u"||(this._httpHeaders[_]=b)}this._httpHeaders.Range=`bytes=${O}-${M-1}`;const V=_=>{if(_.statusCode===404){const b=new n.MissingPDFException(`Missing PDF "${this._url}".`);this._storedError=b;return}this._setReadableStream(_)};this._request=null,this._url.protocol==="http:"?this._request=h.request(f(this._url,this._httpHeaders),V):this._request=T.request(f(this._url,this._httpHeaders),V),this._request.on("error",_=>{this._storedError=_}),this._request.end()}}class g extends k{constructor(d){super(d);let O=decodeURIComponent(this._url.path);v.test(this._url.href)&&(O=O.replace(/^\//,"")),r.lstat(O,(M,V)=>{if(M){M.code==="ENOENT"&&(M=new n.MissingPDFException(`Missing PDF "${O}".`)),this._storedError=M,this._headersCapability.reject(M);return}this._contentLength=V.size,this._setReadableStream(r.createReadStream(O)),this._headersCapability.resolve()})}}class R extends w{constructor(d,O,M){super(d);let V=decodeURIComponent(this._url.path);v.test(this._url.href)&&(V=V.replace(/^\//,"")),this._setReadableStream(r.createReadStream(V,{start:O,end:M-1}))}}},(t,e,s)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.createResponseStatusError=E,e.extractFilenameFromHeader=T,e.validateRangeRequestCapabilities=h,e.validateResponseStatus=v;var n=s(1),i=s(34),r=s(8);function h({getResponseHeader:y,isHttp:F,rangeChunkSize:k,disableRange:w}){const f={allowRangeRequests:!1,suggestedLength:void 0},a=parseInt(y("Content-Length"),10);return!Number.isInteger(a)||(f.suggestedLength=a,a<=2*k)||w||!F||y("Accept-Ranges")!=="bytes"||(y("Content-Encoding")||"identity")!=="identity"||(f.allowRangeRequests=!0),f}function T(y){const F=y("Content-Disposition");if(F){let k=(0,i.getFilenameFromContentDispositionHeader)(F);if(k.includes("%"))try{k=decodeURIComponent(k)}catch{}if((0,r.isPdfFile)(k))return k}return null}function E(y,F){return y===404||y===0&&F.startsWith("file:")?new n.MissingPDFException('Missing PDF "'+F+'".'):new n.UnexpectedResponseException(`Unexpected server response (${y}) while retrieving PDF "${F}".`,y)}function v(y){return y===200||y===206}},(t,e,s)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.getFilenameFromContentDispositionHeader=i;var n=s(1);function i(r){let h=!0,T=E("filename\\*","i").exec(r);if(T){T=T[1];let a=k(T);return a=unescape(a),a=w(a),a=f(a),y(a)}if(T=F(r),T){const a=f(T);return y(a)}if(T=E("filename","i").exec(r),T){T=T[1];let a=k(T);return a=f(a),y(a)}function E(a,u){return new RegExp("(?:^|;)\\s*"+a+'\\s*=\\s*([^";\\s][^;\\s]*|"(?:[^"\\\\]|\\\\"?)+"?)',u)}function v(a,u){if(a){if(!/^[\x00-\xFF]+$/.test(u))return u;try{const g=new TextDecoder(a,{fatal:!0}),R=(0,n.stringToBytes)(u);u=g.decode(R),h=!1}catch{}}return u}function y(a){return h&&/[\x80-\xff]/.test(a)&&(a=v("utf-8",a),h&&(a=v("iso-8859-1",a))),a}function F(a){const u=[];let g;const R=E("filename\\*((?!0\\d)\\d+)(\\*?)","ig");for(;(g=R.exec(a))!==null;){let[,d,O,M]=g;if(d=parseInt(d,10),d in u){if(d===0)break;continue}u[d]=[O,M]}const S=[];for(let d=0;d<u.length&&d in u;++d){let[O,M]=u[d];M=k(M),O&&(M=unescape(M),d===0&&(M=w(M))),S.push(M)}return S.join("")}function k(a){if(a.startsWith('"')){const u=a.slice(1).split('\\"');for(let g=0;g<u.length;++g){const R=u[g].indexOf('"');R!==-1&&(u[g]=u[g].slice(0,R),u.length=g+1),u[g]=u[g].replace(/\\(.)/g,"$1")}a=u.join('"')}return a}function w(a){const u=a.indexOf("'");if(u===-1)return a;const g=a.slice(0,u),S=a.slice(u+1).replace(/^[^']*'/,"");return v(g,S)}function f(a){return!a.startsWith("=?")||/[\x00-\x19\x80-\xff]/.test(a)?a:a.replace(/=\?([\w-]*)\?([QqBb])\?((?:[^?]|\?(?!=))*)\?=/g,function(u,g,R,S){if(R==="q"||R==="Q")return S=S.replace(/_/g," "),S=S.replace(/=([0-9a-fA-F]{2})/g,function(d,O){return String.fromCharCode(parseInt(O,16))}),v(g,S);try{S=atob(S)}catch{}return v(g,S)})}return""}},(t,e,s)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.PDFNetworkStream=void 0;var n=s(1),i=s(33);const r=200,h=206;function T(k){const w=k.response;return typeof w!="string"?w:(0,n.stringToBytes)(w).buffer}class E{constructor(w,f={}){this.url=w,this.isHttp=/^https?:/i.test(w),this.httpHeaders=this.isHttp&&f.httpHeaders||Object.create(null),this.withCredentials=f.withCredentials||!1,this.getXhr=f.getXhr||function(){return new XMLHttpRequest},this.currXhrId=0,this.pendingRequests=Object.create(null)}requestRange(w,f,a){const u={begin:w,end:f};for(const g in a)u[g]=a[g];return this.request(u)}requestFull(w){return this.request(w)}request(w){const f=this.getXhr(),a=this.currXhrId++,u=this.pendingRequests[a]={xhr:f};f.open("GET",this.url),f.withCredentials=this.withCredentials;for(const g in this.httpHeaders){const R=this.httpHeaders[g];typeof R>"u"||f.setRequestHeader(g,R)}return this.isHttp&&"begin"in w&&"end"in w?(f.setRequestHeader("Range",`bytes=${w.begin}-${w.end-1}`),u.expectedStatus=h):u.expectedStatus=r,f.responseType="arraybuffer",w.onError&&(f.onerror=function(g){w.onError(f.status)}),f.onreadystatechange=this.onStateChange.bind(this,a),f.onprogress=this.onProgress.bind(this,a),u.onHeadersReceived=w.onHeadersReceived,u.onDone=w.onDone,u.onError=w.onError,u.onProgress=w.onProgress,f.send(null),a}onProgress(w,f){var u;const a=this.pendingRequests[w];a&&((u=a.onProgress)==null||u.call(a,f))}onStateChange(w,f){var d,O,M;const a=this.pendingRequests[w];if(!a)return;const u=a.xhr;if(u.readyState>=2&&a.onHeadersReceived&&(a.onHeadersReceived(),delete a.onHeadersReceived),u.readyState!==4||!(w in this.pendingRequests))return;if(delete this.pendingRequests[w],u.status===0&&this.isHttp){(d=a.onError)==null||d.call(a,u.status);return}const g=u.status||r;if(!(g===r&&a.expectedStatus===h)&&g!==a.expectedStatus){(O=a.onError)==null||O.call(a,u.status);return}const S=T(u);if(g===h){const V=u.getResponseHeader("Content-Range"),_=/bytes (\d+)-(\d+)\/(\d+)/.exec(V);a.onDone({begin:parseInt(_[1],10),chunk:S})}else S?a.onDone({begin:0,chunk:S}):(M=a.onError)==null||M.call(a,u.status)}getRequestXhr(w){return this.pendingRequests[w].xhr}isPendingRequest(w){return w in this.pendingRequests}abortRequest(w){const f=this.pendingRequests[w].xhr;delete this.pendingRequests[w],f.abort()}}class v{constructor(w){this._source=w,this._manager=new E(w.url,{httpHeaders:w.httpHeaders,withCredentials:w.withCredentials}),this._rangeChunkSize=w.rangeChunkSize,this._fullRequestReader=null,this._rangeRequestReaders=[]}_onRangeRequestReaderClosed(w){const f=this._rangeRequestReaders.indexOf(w);f>=0&&this._rangeRequestReaders.splice(f,1)}getFullReader(){return(0,n.assert)(!this._fullRequestReader,"PDFNetworkStream.getFullReader can only be called once."),this._fullRequestReader=new y(this._manager,this._source),this._fullRequestReader}getRangeReader(w,f){const a=new F(this._manager,w,f);return a.onClosed=this._onRangeRequestReaderClosed.bind(this),this._rangeRequestReaders.push(a),a}cancelAllRequests(w){var f;(f=this._fullRequestReader)==null||f.cancel(w);for(const a of this._rangeRequestReaders.slice(0))a.cancel(w)}}e.PDFNetworkStream=v;class y{constructor(w,f){this._manager=w;const a={onHeadersReceived:this._onHeadersReceived.bind(this),onDone:this._onDone.bind(this),onError:this._onError.bind(this),onProgress:this._onProgress.bind(this)};this._url=f.url,this._fullRequestId=w.requestFull(a),this._headersReceivedCapability=(0,n.createPromiseCapability)(),this._disableRange=f.disableRange||!1,this._contentLength=f.length,this._rangeChunkSize=f.rangeChunkSize,!this._rangeChunkSize&&!this._disableRange&&(this._disableRange=!0),this._isStreamingSupported=!1,this._isRangeSupported=!1,this._cachedChunks=[],this._requests=[],this._done=!1,this._storedError=void 0,this._filename=null,this.onProgress=null}_onHeadersReceived(){const w=this._fullRequestId,f=this._manager.getRequestXhr(w),a=R=>f.getResponseHeader(R),{allowRangeRequests:u,suggestedLength:g}=(0,i.validateRangeRequestCapabilities)({getResponseHeader:a,isHttp:this._manager.isHttp,rangeChunkSize:this._rangeChunkSize,disableRange:this._disableRange});u&&(this._isRangeSupported=!0),this._contentLength=g||this._contentLength,this._filename=(0,i.extractFilenameFromHeader)(a),this._isRangeSupported&&this._manager.abortRequest(w),this._headersReceivedCapability.resolve()}_onDone(w){if(w&&(this._requests.length>0?this._requests.shift().resolve({value:w.chunk,done:!1}):this._cachedChunks.push(w.chunk)),this._done=!0,!(this._cachedChunks.length>0)){for(const f of this._requests)f.resolve({value:void 0,done:!0});this._requests.length=0}}_onError(w){this._storedError=(0,i.createResponseStatusError)(w,this._url),this._headersReceivedCapability.reject(this._storedError);for(const f of this._requests)f.reject(this._storedError);this._requests.length=0,this._cachedChunks.length=0}_onProgress(w){var f;(f=this.onProgress)==null||f.call(this,{loaded:w.loaded,total:w.lengthComputable?w.total:this._contentLength})}get filename(){return this._filename}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}get contentLength(){return this._contentLength}get headersReady(){return this._headersReceivedCapability.promise}async read(){if(this._storedError)throw this._storedError;if(this._cachedChunks.length>0)return{value:this._cachedChunks.shift(),done:!1};if(this._done)return{value:void 0,done:!0};const w=(0,n.createPromiseCapability)();return this._requests.push(w),w.promise}cancel(w){this._done=!0,this._headersReceivedCapability.reject(w);for(const f of this._requests)f.resolve({value:void 0,done:!0});this._requests.length=0,this._manager.isPendingRequest(this._fullRequestId)&&this._manager.abortRequest(this._fullRequestId),this._fullRequestReader=null}}class F{constructor(w,f,a){this._manager=w;const u={onDone:this._onDone.bind(this),onError:this._onError.bind(this),onProgress:this._onProgress.bind(this)};this._url=w.url,this._requestId=w.requestRange(f,a,u),this._requests=[],this._queuedChunk=null,this._done=!1,this._storedError=void 0,this.onProgress=null,this.onClosed=null}_close(){var w;(w=this.onClosed)==null||w.call(this,this)}_onDone(w){const f=w.chunk;this._requests.length>0?this._requests.shift().resolve({value:f,done:!1}):this._queuedChunk=f,this._done=!0;for(const a of this._requests)a.resolve({value:void 0,done:!0});this._requests.length=0,this._close()}_onError(w){this._storedError=(0,i.createResponseStatusError)(w,this._url);for(const f of this._requests)f.reject(this._storedError);this._requests.length=0,this._queuedChunk=null}_onProgress(w){var f;this.isStreamingSupported||(f=this.onProgress)==null||f.call(this,{loaded:w.loaded})}get isStreamingSupported(){return!1}async read(){if(this._storedError)throw this._storedError;if(this._queuedChunk!==null){const f=this._queuedChunk;return this._queuedChunk=null,{value:f,done:!1}}if(this._done)return{value:void 0,done:!0};const w=(0,n.createPromiseCapability)();return this._requests.push(w),w.promise}cancel(w){this._done=!0;for(const f of this._requests)f.resolve({value:void 0,done:!0});this._requests.length=0,this._manager.isPendingRequest(this._requestId)&&this._manager.abortRequest(this._requestId),this._close()}}},(t,e,s)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.PDFFetchStream=void 0;var n=s(1),i=s(33);function r(y,F,k){return{method:"GET",headers:y,signal:k.signal,mode:"cors",credentials:F?"include":"same-origin",redirect:"follow"}}function h(y){const F=new Headers;for(const k in y){const w=y[k];typeof w>"u"||F.append(k,w)}return F}class T{constructor(F){this.source=F,this.isHttp=/^https?:/i.test(F.url),this.httpHeaders=this.isHttp&&F.httpHeaders||{},this._fullRequestReader=null,this._rangeRequestReaders=[]}get _progressiveDataLength(){var F;return((F=this._fullRequestReader)==null?void 0:F._loaded)??0}getFullReader(){return(0,n.assert)(!this._fullRequestReader,"PDFFetchStream.getFullReader can only be called once."),this._fullRequestReader=new E(this),this._fullRequestReader}getRangeReader(F,k){if(k<=this._progressiveDataLength)return null;const w=new v(this,F,k);return this._rangeRequestReaders.push(w),w}cancelAllRequests(F){this._fullRequestReader&&this._fullRequestReader.cancel(F);for(const k of this._rangeRequestReaders.slice(0))k.cancel(F)}}e.PDFFetchStream=T;class E{constructor(F){this._stream=F,this._reader=null,this._loaded=0,this._filename=null;const k=F.source;this._withCredentials=k.withCredentials||!1,this._contentLength=k.length,this._headersCapability=(0,n.createPromiseCapability)(),this._disableRange=k.disableRange||!1,this._rangeChunkSize=k.rangeChunkSize,!this._rangeChunkSize&&!this._disableRange&&(this._disableRange=!0),this._abortController=new AbortController,this._isStreamingSupported=!k.disableStream,this._isRangeSupported=!k.disableRange,this._headers=h(this._stream.httpHeaders);const w=k.url;fetch(w,r(this._headers,this._withCredentials,this._abortController)).then(f=>{if(!(0,i.validateResponseStatus)(f.status))throw(0,i.createResponseStatusError)(f.status,w);this._reader=f.body.getReader(),this._headersCapability.resolve();const a=R=>f.headers.get(R),{allowRangeRequests:u,suggestedLength:g}=(0,i.validateRangeRequestCapabilities)({getResponseHeader:a,isHttp:this._stream.isHttp,rangeChunkSize:this._rangeChunkSize,disableRange:this._disableRange});this._isRangeSupported=u,this._contentLength=g||this._contentLength,this._filename=(0,i.extractFilenameFromHeader)(a),!this._isStreamingSupported&&this._isRangeSupported&&this.cancel(new n.AbortException("Streaming is disabled."))}).catch(this._headersCapability.reject),this.onProgress=null}get headersReady(){return this._headersCapability.promise}get filename(){return this._filename}get contentLength(){return this._contentLength}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}async read(){await this._headersCapability.promise;const{value:F,done:k}=await this._reader.read();return k?{value:F,done:k}:(this._loaded+=F.byteLength,this.onProgress&&this.onProgress({loaded:this._loaded,total:this._contentLength}),{value:new Uint8Array(F).buffer,done:!1})}cancel(F){this._reader&&this._reader.cancel(F),this._abortController.abort()}}class v{constructor(F,k,w){this._stream=F,this._reader=null,this._loaded=0;const f=F.source;this._withCredentials=f.withCredentials||!1,this._readCapability=(0,n.createPromiseCapability)(),this._isStreamingSupported=!f.disableStream,this._abortController=new AbortController,this._headers=h(this._stream.httpHeaders),this._headers.append("Range",`bytes=${k}-${w-1}`);const a=f.url;fetch(a,r(this._headers,this._withCredentials,this._abortController)).then(u=>{if(!(0,i.validateResponseStatus)(u.status))throw(0,i.createResponseStatusError)(u.status,a);this._readCapability.resolve(),this._reader=u.body.getReader()}).catch(this._readCapability.reject),this.onProgress=null}get isStreamingSupported(){return this._isStreamingSupported}async read(){await this._readCapability.promise;const{value:F,done:k}=await this._reader.read();return k?{value:F,done:k}:(this._loaded+=F.byteLength,this.onProgress&&this.onProgress({loaded:this._loaded}),{value:new Uint8Array(F).buffer,done:!1})}cancel(F){this._reader&&this._reader.cancel(F),this._abortController.abort()}}}],__webpack_module_cache__={};function __w_pdfjs_require__(t){var e=__webpack_module_cache__[t];if(e!==void 0)return e.exports;var s=__webpack_module_cache__[t]={exports:{}};return __webpack_modules__[t](s,s.exports,__w_pdfjs_require__),s.exports}var __webpack_exports__={};return(()=>{var t=__webpack_exports__;Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"AnnotationEditorLayer",{enumerable:!0,get:function(){return i.AnnotationEditorLayer}}),Object.defineProperty(t,"AnnotationEditorParamsType",{enumerable:!0,get:function(){return e.AnnotationEditorParamsType}}),Object.defineProperty(t,"AnnotationEditorType",{enumerable:!0,get:function(){return e.AnnotationEditorType}}),Object.defineProperty(t,"AnnotationEditorUIManager",{enumerable:!0,get:function(){return r.AnnotationEditorUIManager}}),Object.defineProperty(t,"AnnotationLayer",{enumerable:!0,get:function(){return h.AnnotationLayer}}),Object.defineProperty(t,"AnnotationMode",{enumerable:!0,get:function(){return e.AnnotationMode}}),Object.defineProperty(t,"CMapCompressionType",{enumerable:!0,get:function(){return e.CMapCompressionType}}),Object.defineProperty(t,"GlobalWorkerOptions",{enumerable:!0,get:function(){return T.GlobalWorkerOptions}}),Object.defineProperty(t,"InvalidPDFException",{enumerable:!0,get:function(){return e.InvalidPDFException}}),Object.defineProperty(t,"LoopbackPort",{enumerable:!0,get:function(){return s.LoopbackPort}}),Object.defineProperty(t,"MissingPDFException",{enumerable:!0,get:function(){return e.MissingPDFException}}),Object.defineProperty(t,"OPS",{enumerable:!0,get:function(){return e.OPS}}),Object.defineProperty(t,"PDFDataRangeTransport",{enumerable:!0,get:function(){return s.PDFDataRangeTransport}}),Object.defineProperty(t,"PDFDateString",{enumerable:!0,get:function(){return n.PDFDateString}}),Object.defineProperty(t,"PDFWorker",{enumerable:!0,get:function(){return s.PDFWorker}}),Object.defineProperty(t,"PasswordResponses",{enumerable:!0,get:function(){return e.PasswordResponses}}),Object.defineProperty(t,"PermissionFlag",{enumerable:!0,get:function(){return e.PermissionFlag}}),Object.defineProperty(t,"PixelsPerInch",{enumerable:!0,get:function(){return n.PixelsPerInch}}),Object.defineProperty(t,"RenderingCancelledException",{enumerable:!0,get:function(){return n.RenderingCancelledException}}),Object.defineProperty(t,"SVGGraphics",{enumerable:!0,get:function(){return y.SVGGraphics}}),Object.defineProperty(t,"UNSUPPORTED_FEATURES",{enumerable:!0,get:function(){return e.UNSUPPORTED_FEATURES}}),Object.defineProperty(t,"UnexpectedResponseException",{enumerable:!0,get:function(){return e.UnexpectedResponseException}}),Object.defineProperty(t,"Util",{enumerable:!0,get:function(){return e.Util}}),Object.defineProperty(t,"VerbosityLevel",{enumerable:!0,get:function(){return e.VerbosityLevel}}),Object.defineProperty(t,"XfaLayer",{enumerable:!0,get:function(){return F.XfaLayer}}),Object.defineProperty(t,"build",{enumerable:!0,get:function(){return s.build}}),Object.defineProperty(t,"createPromiseCapability",{enumerable:!0,get:function(){return e.createPromiseCapability}}),Object.defineProperty(t,"createValidAbsoluteUrl",{enumerable:!0,get:function(){return e.createValidAbsoluteUrl}}),Object.defineProperty(t,"getDocument",{enumerable:!0,get:function(){return s.getDocument}}),Object.defineProperty(t,"getFilenameFromUrl",{enumerable:!0,get:function(){return n.getFilenameFromUrl}}),Object.defineProperty(t,"getPdfFilenameFromUrl",{enumerable:!0,get:function(){return n.getPdfFilenameFromUrl}}),Object.defineProperty(t,"getXfaPageViewport",{enumerable:!0,get:function(){return n.getXfaPageViewport}}),Object.defineProperty(t,"isPdfFile",{enumerable:!0,get:function(){return n.isPdfFile}}),Object.defineProperty(t,"loadScript",{enumerable:!0,get:function(){return n.loadScript}}),Object.defineProperty(t,"renderTextLayer",{enumerable:!0,get:function(){return v.renderTextLayer}}),Object.defineProperty(t,"shadow",{enumerable:!0,get:function(){return e.shadow}}),Object.defineProperty(t,"version",{enumerable:!0,get:function(){return s.version}});var e=__w_pdfjs_require__(1),s=__w_pdfjs_require__(4),n=__w_pdfjs_require__(8),i=__w_pdfjs_require__(22),r=__w_pdfjs_require__(7),h=__w_pdfjs_require__(27),T=__w_pdfjs_require__(15),E=__w_pdfjs_require__(3),v=__w_pdfjs_require__(30),y=__w_pdfjs_require__(31),F=__w_pdfjs_require__(29);if(E.isNodeJS){const{PDFNodeStream:k}=__w_pdfjs_require__(32);(0,s.setPDFNetworkStreamFactory)(w=>new k(w))}else{const{PDFNetworkStream:k}=__w_pdfjs_require__(35),{PDFFetchStream:w}=__w_pdfjs_require__(36);(0,s.setPDFNetworkStreamFactory)(f=>(0,n.isValidFetchUrl)(f.url)?new w(f):new k(f))}})(),__webpack_exports__})())})(pdf);var pdfExports=pdf.exports;const pdfjsWorker="/assets/pdf.worker-6b078827.js",ScoreViewer_vue_vue_type_style_index_0_scoped_4a44b18e_lang="",_export_sfc=(t,e)=>{const s=t.__vccOpts||t;for(const[n,i]of e)s[n]=i;return s},_hoisted_1$b={class:"score-viewer"},_hoisted_2$a={key:0},_hoisted_3$a=["src","onMousedown"],_hoisted_4$8=["onClick"],_sfc_main$b={__name:"ScoreViewer",props:{imgUrl:String,pdfUrl:String},emits:["crop"],setup(t,{emit:e}){pdfExports.GlobalWorkerOptions.workerSrc=pdfjsWorker;const s=t,n=ref([]),i=ref(null),r=ref(null),h=ref([]),T=ref(null),E=ref(!1),v=ref({x:0,y:0}),y=ref(null),F=ref(null);let k=null,w=null,f=null;async function a(b){const I=await pdfExports.getDocument(b).promise,j=[];for(let Y=1;Y<=I.numPages;Y++){const X=await I.getPage(Y),lt=X.getViewport({scale:2}),Q=document.createElement("canvas");Q.width=lt.width,Q.height=lt.height,await X.render({canvasContext:Q.getContext("2d"),viewport:lt}).promise,j.push(Q.toDataURL("image/png"))}return j}function u(b,m,I){return Math.max(m,Math.min(I,b))}function g(b,m){const Y=r.value.querySelectorAll("img")[m].getBoundingClientRect(),X=u(b.clientX,Y.left,Y.right)-Y.left,lt=u(b.clientY,Y.top,Y.bottom)-Y.top;return{x:X,y:lt}}function R(b,m){if(b.button!==0)return;E.value=!0,y.value=m,f=m;const{x:I,y:j}=g(b,m);v.value={x:I,y:j},T.value={pageIdx:m,x:I,y:j,w:0,h:0},k=Y=>S(Y),w=Y=>d(),document.addEventListener("mousemove",k),document.addEventListener("mouseup",w)}function S(b){if(!E.value||f===null||!(b.buttons&1))return;const{x:m,y:I}=g(b,f),j=v.value.x,Y=v.value.y;T.value={pageIdx:f,x:Math.min(j,m),y:Math.min(Y,I),w:Math.abs(m-j),h:Math.abs(I-Y)}}function d(b){!E.value||f===null||(E.value=!1,T.value&&T.value.w>5&&T.value.h>5&&(h.value.push({...T.value}),V(T.value,T.value.pageIdx).then(m=>{_("crop",m)})),T.value=null,y.value=null,f=null,document.removeEventListener("mousemove",k),document.removeEventListener("mouseup",w))}function O(b){h.value.splice(b,1),F.value===b?F.value=null:F.value>b&&F.value--}function M(b){return{left:b.x+"px",top:b.y+"px",width:b.w+"px",height:b.h+"px"}}function V(b,m){return new Promise((I,j)=>{const X=r.value.querySelectorAll("img")[m],lt=document.createElement("canvas");lt.width=b.w,lt.height=b.h;const Q=lt.getContext("2d"),z=X.naturalWidth/X.width,st=X.naturalHeight/X.height;Q.drawImage(X,b.x*z,b.y*st,b.w*z,b.h*st,0,0,b.w,b.h),I(lt.toDataURL("image/png"))})}const _=e;return watch([()=>s.imgUrl,()=>s.pdfUrl],async()=>{h.value=[],T.value=null,E.value=!1,F.value=null,s.imgUrl?n.value=[s.imgUrl]:s.pdfUrl?n.value=await a(s.pdfUrl):n.value=[]}),(b,m)=>(openBlock(),createElementBlock("div",_hoisted_1$b,[!t.imgUrl&&!t.pdfUrl?(openBlock(),createElementBlock("p",_hoisted_2$a,"请上传乐谱图片（JPG/PNG）或PDF文件")):(openBlock(),createElementBlock("div",{key:1,class:"img-wrapper",ref_key:"imgWrapper",ref:r},[(openBlock(!0),createElementBlock(Fragment,null,renderList(n.value,(I,j)=>(openBlock(),createElementBlock("div",{key:j,style:{position:"relative",display:"inline-block"}},[createBaseVNode("img",{src:I,ref_for:!0,ref_key:"imgEl",ref:i,onMousedown:Y=>R(Y,j)},null,40,_hoisted_3$a),(openBlock(!0),createElementBlock(Fragment,null,renderList(h.value.filter(Y=>Y.pageIdx===j),(Y,X)=>(openBlock(),createElementBlock("div",{key:"rect-"+X,class:"select-rect",style:normalizeStyle(M(Y))},[createBaseVNode("button",{class:"delete-btn",onMousedown:m[0]||(m[0]=withModifiers(()=>{},["stop","prevent"])),onClick:withModifiers(lt=>O(h.value.findIndex(Q=>Q===Y)),["stop","prevent"])},"×",40,_hoisted_4$8)],4))),128)),T.value&&T.value.pageIdx===j?(openBlock(),createElementBlock("div",{key:0,class:"select-rect",style:normalizeStyle(M(T.value))},null,4)):createCommentVNode("",!0)]))),128))],512))]))}},ScoreViewer=_export_sfc(_sfc_main$b,[["__scopeId","data-v-4a44b18e"]]),NavBar_vue_vue_type_style_index_0_scoped_d07b26e0_lang="",_hoisted_1$a={class:"navbar"},_hoisted_2$9={class:"nav-container"},_hoisted_3$9={class:"nav-tabs"},_sfc_main$a={__name:"NavBar",emits:["tab-change"],setup(t,{emit:e}){const s=ref("analysis"),n=e;function i(r){s.value=r,n("tab-change",r)}return(r,h)=>(openBlock(),createElementBlock("nav",_hoisted_1$a,[createBaseVNode("div",_hoisted_2$9,[h[3]||(h[3]=createStaticVNode('<div class="nav-brand" data-v-d07b26e0><div class="logo" data-v-d07b26e0> 🎹 </div><div class="brand-text" data-v-d07b26e0><h1 class="site-title" data-v-d07b26e0>Piano Improv Studio</h1><span class="site-subtitle" data-v-d07b26e0>钢琴即兴演奏工作室</span></div></div>',1)),createBaseVNode("div",_hoisted_3$9,[createBaseVNode("button",{class:normalizeClass(["nav-tab",{active:s.value==="basics"}]),onClick:h[0]||(h[0]=T=>i("basics"))}," 📚 基础知识 ",2),createBaseVNode("button",{class:normalizeClass(["nav-tab",{active:s.value==="advanced"}]),onClick:h[1]||(h[1]=T=>i("advanced"))}," 🎼 进阶知识 ",2),createBaseVNode("button",{class:normalizeClass(["nav-tab",{active:s.value==="analysis"}]),onClick:h[2]||(h[2]=T=>i("analysis"))}," 🔍 乐谱分析 ",2)])])]))}},NavBar=_export_sfc(_sfc_main$a,[["__scopeId","data-v-d07b26e0"]]),_imports_0$1="/images/piano-keys.png",_imports_1="/images/notes-staff.png",_imports_2="/images/note-lengths.png",TheoryDetail_vue_vue_type_style_index_0_scoped_51962bf6_lang="",_hoisted_1$9={class:"theory-detail"},_hoisted_2$8={class:"content-container"},_hoisted_3$8={class:"header"},_hoisted_4$7={class:"content-grid"},_hoisted_5$7={class:"left-content"},_hoisted_6$7={class:"content-section"},_hoisted_7$7={class:"content-card"},_hoisted_8$7={class:"image-container"},_hoisted_9$3={class:"image-container"},_hoisted_10$3={class:"content-section"},_hoisted_11$3={class:"content-card"},_hoisted_12$1={class:"image-container"},_sfc_main$9={__name:"TheoryDetail",setup(t){const e=s=>{console.log("图片加载失败:",s.target.src)};return(s,n)=>(openBlock(),createElementBlock("div",_hoisted_1$9,[createBaseVNode("div",_hoisted_2$8,[createBaseVNode("div",_hoisted_3$8,[createBaseVNode("button",{class:"back-btn",onClick:n[0]||(n[0]=i=>s.$emit("back"))},"← 返回"),n[1]||(n[1]=createBaseVNode("h1",null,"🎼 乐理概述",-1))]),createBaseVNode("div",_hoisted_4$7,[createBaseVNode("div",_hoisted_5$7,[createBaseVNode("section",_hoisted_6$7,[n[5]||(n[5]=createBaseVNode("h2",null,"📝 音符（Note）",-1)),createBaseVNode("div",_hoisted_7$7,[n[4]||(n[4]=createStaticVNode('<p class="theory-text" data-v-51962bf6>音乐的最小单位，是带有<strong class="highlight" data-v-51962bf6>音高</strong>的声音。</p><p class="theory-text" data-v-51962bf6>西方音乐一个八度中有 <strong class="highlight" data-v-51962bf6>12个音符</strong>（A到G，以及升号♯和降号♭）。</p><p class="theory-text" data-v-51962bf6><strong class="highlight" data-v-51962bf6>同音异名（Enharmonic）</strong>：不同名字但音高相同的音，如 <span class="note-example" data-v-51962bf6>C♯ = D♭</span>。</p>',3)),createBaseVNode("div",_hoisted_8$7,[createBaseVNode("img",{src:_imports_0$1,alt:"钢琴键盘",class:"theory-image",onError:e},null,32),n[2]||(n[2]=createBaseVNode("p",{class:"image-caption"},"钢琴键盘上的音符分布",-1))]),createBaseVNode("div",_hoisted_9$3,[createBaseVNode("img",{src:_imports_1,alt:"五线谱音符",class:"theory-image",onError:e},null,32),n[3]||(n[3]=createBaseVNode("p",{class:"image-caption"},"五线谱上的音符表示",-1))])])]),createBaseVNode("section",_hoisted_10$3,[n[8]||(n[8]=createBaseVNode("h2",null,"⏱️ 音符时值（Note Lengths）",-1)),createBaseVNode("div",_hoisted_11$3,[n[7]||(n[7]=createBaseVNode("p",{class:"theory-text"},[createTextVNode("每个音符不仅有"),createBaseVNode("strong",{class:"highlight"},"音高"),createTextVNode("，还有"),createBaseVNode("strong",{class:"highlight"},"时值"),createTextVNode("，决定它持续的时间。")],-1)),createBaseVNode("div",_hoisted_12$1,[createBaseVNode("img",{src:_imports_2,alt:"音符时值",class:"theory-image",onError:e},null,32),n[6]||(n[6]=createBaseVNode("p",{class:"image-caption"},"基本音符时值对比",-1))])])]),n[9]||(n[9]=createStaticVNode('<section class="content-section" data-v-51962bf6><h2 data-v-51962bf6>🎵 一切音乐构造的本质</h2><div class="content-card" data-v-51962bf6><p class="theory-text" data-v-51962bf6>所有和弦、音阶、调式、旋律等音乐概念，最终都可以还原为这 <strong class="highlight" data-v-51962bf6>12个音</strong> 的组合。</p></div></section><section class="content-section" data-v-51962bf6><h2 data-v-51962bf6>💡 学习建议 / 经验总结</h2><div class="content-card" data-v-51962bf6><h3 class="learning-tip" data-v-51962bf6>（1）坚持每天练钢琴（尽量）</h3><h3 class="learning-tip" data-v-51962bf6>（2）如果能做到每天练琴，网站内容可以作为辅助而非核心</h3><h3 class="learning-tip" data-v-51962bf6>（3）不要忘记前两点</h3></div></section>',2))]),n[10]||(n[10]=createStaticVNode('<div class="right-content" data-v-51962bf6><div class="ai-bot" data-v-51962bf6><h3 data-v-51962bf6>🤖 AI 助手</h3><div class="chat-area" data-v-51962bf6><p class="bot-message" data-v-51962bf6>您好！我是您的钢琴学习助手。关于乐理概述，您有什么问题吗？</p></div><div class="input-area" data-v-51962bf6><textarea placeholder="输入您的问题..." rows="3" data-v-51962bf6></textarea><button data-v-51962bf6>发送</button></div></div></div>',1))])])]))}},TheoryDetail=_export_sfc(_sfc_main$9,[["__scopeId","data-v-51962bf6"]]),ScaleDetail_vue_vue_type_style_index_0_scoped_5a8f786c_lang="",_hoisted_1$8={class:"scale-detail"},_hoisted_2$7={class:"content-container"},_hoisted_3$7={class:"header"},_sfc_main$8={__name:"ScaleDetail",setup(t){return(e,s)=>(openBlock(),createElementBlock("div",_hoisted_1$8,[createBaseVNode("div",_hoisted_2$7,[createBaseVNode("div",_hoisted_3$7,[createBaseVNode("button",{class:"back-btn",onClick:s[0]||(s[0]=n=>e.$emit("back"))},"← 返回"),s[1]||(s[1]=createBaseVNode("h1",null,"🎼 音阶（Scales）本质理解与练习引导",-1))]),s[2]||(s[2]=createStaticVNode('<div class="content-grid" data-v-5a8f786c><div class="left-content" data-v-5a8f786c><section class="content-section" data-v-5a8f786c><h2 data-v-5a8f786c>📝 1. 音阶（Scale）是什么？</h2><div class="content-card" data-v-5a8f786c><p class="theory-text" data-v-5a8f786c>音阶是从<strong class="highlight" data-v-5a8f786c>12个固定音</strong>中<strong class="highlight" data-v-5a8f786c>选出部分音</strong>，按照一定顺序排列起来的&quot;音的集合&quot;。</p><div class="key-points" data-v-5a8f786c><div class="key-point" data-v-5a8f786c><span class="point-icon" data-v-5a8f786c>🎯</span><span data-v-5a8f786c>每个音阶有一个<strong data-v-5a8f786c>起点</strong>，称为&quot;根音&quot;（Root）</span></div><div class="key-point" data-v-5a8f786c><span class="point-icon" data-v-5a8f786c>🎵</span><span data-v-5a8f786c>音阶就是音乐的&quot;语料库&quot;：它决定了我们能用哪些音来写旋律、即兴、编和声</span></div><div class="key-point" data-v-5a8f786c><span class="point-icon" data-v-5a8f786c>💡</span><span data-v-5a8f786c>简单说，<strong data-v-5a8f786c>音阶 = 音乐的词汇表</strong>，不同音阶有不同&quot;情绪&quot;</span></div></div></div></section><section class="content-section" data-v-5a8f786c><h2 data-v-5a8f786c>🔧 2. 音阶是怎么构成的？</h2><div class="content-card" data-v-5a8f786c><p class="theory-text" data-v-5a8f786c>音阶并不是随便选几个音，而是：</p><div class="definition-box" data-v-5a8f786c><p class="definition-text" data-v-5a8f786c>从根音开始，按照特定的&quot;间隔&quot;（音程）排列出来的音序列。</p></div><div class="interval-explanation" data-v-5a8f786c><h3 data-v-5a8f786c>音程单位：</h3><div class="interval-item" data-v-5a8f786c><span class="interval-name" data-v-5a8f786c>半音（Semitone）</span><span class="interval-desc" data-v-5a8f786c>= 钢琴上相邻两个键（如 C 到 C♯）</span></div><div class="interval-item" data-v-5a8f786c><span class="interval-name" data-v-5a8f786c>全音（Tone）</span><span class="interval-desc" data-v-5a8f786c>= 跳过一个键（如 C 到 D）</span></div></div><div class="example-box" data-v-5a8f786c><h3 data-v-5a8f786c>📌 举例：C大调音阶的音程模式</h3><div class="scale-example" data-v-5a8f786c><div class="scale-notes" data-v-5a8f786c>C - D - E - F - G - A - B - C</div><div class="scale-intervals" data-v-5a8f786c>间隔为：T - T - S - T - T - T - S</div><div class="scale-note" data-v-5a8f786c>（T=Tone 全音，S=Semitone 半音）</div></div><p class="conclusion" data-v-5a8f786c>这套&quot;间隔规则&quot;就决定了这是<strong class="highlight" data-v-5a8f786c>大调</strong>。</p></div></div></section><section class="content-section" data-v-5a8f786c><h2 data-v-5a8f786c>🎵 3. 常见的音阶类型（核心四种）</h2><div class="content-card" data-v-5a8f786c><p class="theory-text" data-v-5a8f786c>以下是最常见的四种&quot;7声音阶&quot;（每个音阶都可移调）：</p><div class="scale-table" data-v-5a8f786c><div class="table-header" data-v-5a8f786c><div class="header-cell" data-v-5a8f786c>音阶名称</div><div class="header-cell" data-v-5a8f786c>情绪色彩</div><div class="header-cell" data-v-5a8f786c>间隔结构</div></div><div class="table-row" data-v-5a8f786c><div class="cell scale-name" data-v-5a8f786c>🎵 <strong data-v-5a8f786c>大调（Major）</strong></div><div class="cell emotion" data-v-5a8f786c>明亮、稳定</div><div class="cell pattern" data-v-5a8f786c>T - T - S - T - T - T - S</div></div><div class="table-row" data-v-5a8f786c><div class="cell scale-name" data-v-5a8f786c>🎵 <strong data-v-5a8f786c>自然小调（Natural Minor）</strong></div><div class="cell emotion" data-v-5a8f786c>阴郁、柔和</div><div class="cell pattern" data-v-5a8f786c>T - S - T - T - S - T - T</div></div><div class="table-row" data-v-5a8f786c><div class="cell scale-name" data-v-5a8f786c>🎵 <strong data-v-5a8f786c>和声小调（Harmonic Minor）</strong></div><div class="cell emotion" data-v-5a8f786c>神秘、东方感</div><div class="cell pattern" data-v-5a8f786c>T - S - T - T - S - T½ - S <em data-v-5a8f786c>(1.5音)</em></div></div><div class="table-row" data-v-5a8f786c><div class="cell scale-name" data-v-5a8f786c>🎵 <strong data-v-5a8f786c>旋律小调（Melodic Minor）</strong></div><div class="cell emotion" data-v-5a8f786c>优雅、含蓄</div><div class="cell pattern" data-v-5a8f786c>T - S - T - T - T - T - S <em data-v-5a8f786c>(上行)</em></div></div></div><div class="key-understanding" data-v-5a8f786c><h3 data-v-5a8f786c>🧠 关键理解：</h3><p class="understanding-text" data-v-5a8f786c>所有这些音阶，本质上只是从12个音中挑选7个，并规定这些音之间的间隔关系。</p></div></div></section><section class="content-section" data-v-5a8f786c><h2 data-v-5a8f786c>🤔 4. 为什么会有音阶？（追问本质）</h2><div class="content-card" data-v-5a8f786c><p class="theory-text" data-v-5a8f786c><strong data-v-5a8f786c>音乐为什么不直接用12个音？为什么要用音阶&quot;挑7个&quot;？</strong></p><div class="reason-points" data-v-5a8f786c><div class="reason-point" data-v-5a8f786c><span class="reason-icon" data-v-5a8f786c>🎯</span><span data-v-5a8f786c>为了&quot;统一音高语言&quot;，制造听感上的稳定性和方向感</span></div><div class="reason-point" data-v-5a8f786c><span class="reason-icon" data-v-5a8f786c>🎵</span><span data-v-5a8f786c>音阶帮助音乐构建&quot;调性&quot;，让听众觉得音乐是有重心、有回家的感觉的</span></div><div class="reason-point" data-v-5a8f786c><span class="reason-icon" data-v-5a8f786c>✨</span><span data-v-5a8f786c>音阶限制了音的选择范围，但也<strong data-v-5a8f786c>提高了可控性和美感统一性</strong></span></div></div><div class="conclusion-box" data-v-5a8f786c><p class="conclusion-text" data-v-5a8f786c>换句话说：</p><div class="quote-box" data-v-5a8f786c><p data-v-5a8f786c>音阶让旋律变得像&quot;句子&quot;而不是&quot;乱说话&quot;。</p></div></div></div></section><section class="content-section" data-v-5a8f786c><h2 data-v-5a8f786c>💡 5. 练习建议（从听、弹、构建三个维度训练）</h2><div class="content-card" data-v-5a8f786c><div class="practice-section" data-v-5a8f786c><h3 data-v-5a8f786c>（1）🎹 机械练习：熟练各大调/小调音阶指法</h3><ul class="practice-list" data-v-5a8f786c><li data-v-5a8f786c>参考《哈农》或《Czerny》五指练习</li><li data-v-5a8f786c>练习顺序：C大调 → G → D → F → B♭ → … 依照升降号熟悉</li></ul></div><div class="practice-section" data-v-5a8f786c><h3 data-v-5a8f786c>（2）👂 听觉练习：辨别大调 vs 小调音阶</h3><ul class="practice-list" data-v-5a8f786c><li data-v-5a8f786c>听一段旋律（比如C调的旋律），判断其是大调还是小调</li><li data-v-5a8f786c>感受情绪：<strong data-v-5a8f786c>明亮 vs 忧郁</strong></li></ul></div><div class="practice-section" data-v-5a8f786c><h3 data-v-5a8f786c>（3）🧠 理解练习：音阶构建题</h3><p class="theory-text" data-v-5a8f786c>给定根音（如A），要求学生写出：</p><ul class="practice-list" data-v-5a8f786c><li data-v-5a8f786c>A大调音阶（并写出间隔模式）</li><li data-v-5a8f786c>A自然小调音阶（并标出♭3, ♭6, ♭7）</li></ul></div><div class="practice-tip" data-v-5a8f786c><h3 data-v-5a8f786c>📝 提示：</h3><p class="tip-text" data-v-5a8f786c>每学一个新调，可以在谱纸或键盘上<strong data-v-5a8f786c>写出来 + 弹出来 + 听出来</strong>，三管齐下理解最深。</p></div></div></section></div><div class="right-content" data-v-5a8f786c><div class="ai-bot" data-v-5a8f786c><h3 data-v-5a8f786c>🤖 AI 助手</h3><div class="chat-area" data-v-5a8f786c><p class="bot-message" data-v-5a8f786c>您好！我是您的钢琴学习助手。关于音阶的学习，您有什么问题吗？我可以帮您理解音阶的构成、练习方法，或者解答其他相关问题。</p></div><div class="input-area" data-v-5a8f786c><textarea placeholder="输入您的问题..." rows="3" data-v-5a8f786c></textarea><button data-v-5a8f786c>发送</button></div></div></div></div>',1))])]))}},ScaleDetail=_export_sfc(_sfc_main$8,[["__scopeId","data-v-5a8f786c"]]),KeyDetail_vue_vue_type_style_index_0_scoped_5f442d5b_lang="",_hoisted_1$7={class:"key-detail"},_hoisted_2$6={class:"content-container"},_hoisted_3$6={class:"header"},_hoisted_4$6={class:"content-grid"},_hoisted_5$6={class:"right-content"},_hoisted_6$6={class:"ai-bot"},_hoisted_7$6={class:"input-area"},_hoisted_8$6=["onKeydown"],_sfc_main$7={__name:"KeyDetail",setup(t){const e=ref(""),s=()=>{e.value.trim()&&(console.log("发送消息:",e.value),e.value="")};return(n,i)=>(openBlock(),createElementBlock("div",_hoisted_1$7,[createBaseVNode("div",_hoisted_2$6,[createBaseVNode("div",_hoisted_3$6,[createBaseVNode("button",{onClick:i[0]||(i[0]=r=>n.$emit("back")),class:"back-btn"},"← 返回"),i[2]||(i[2]=createBaseVNode("h1",null,"🎼 调性（Key）",-1))]),createBaseVNode("div",_hoisted_4$6,[i[5]||(i[5]=createStaticVNode('<div class="left-content" data-v-5f442d5b><div class="content-section" data-v-5f442d5b><h2 data-v-5f442d5b>1. ✅ 什么是调性（Key）？</h2><div class="content-card" data-v-5f442d5b><p class="theory-text" data-v-5f442d5b> 调性是音乐的<span class="highlight" data-v-5f442d5b>&quot;音高重心&quot;</span>和<span class="highlight" data-v-5f442d5b>&quot;方向&quot;</span>。 它决定了一首曲子用的是哪一套音符（即：什么音阶）。 </p><p class="theory-text" data-v-5f442d5b> 音乐中的大部分旋律和和声都会围绕这个调的<span class="highlight" data-v-5f442d5b>&quot;主音&quot;</span>（Tonic）展开。 </p><p class="theory-text" data-v-5f442d5b><strong data-v-5f442d5b>举例：</strong>一首在 C大调 中的音乐，大多数音符会来自 C大调音阶（C–D–E–F–G–A–B），旋律和和声围绕C（主音）展开。 </p></div></div><div class="content-section" data-v-5f442d5b><h2 data-v-5f442d5b>2. ❓ 为什么会有调性（Key）这个概念？它解决什么问题？</h2><div class="content-card" data-v-5f442d5b><p class="theory-text" data-v-5f442d5b> 调性这个概念的出现，是为了让音乐更有<span class="highlight" data-v-5f442d5b>方向感</span>和<span class="highlight" data-v-5f442d5b>归属感</span>。 </p><p class="theory-text" data-v-5f442d5b> 🎯 它解决的问题是：<span class="highlight" data-v-5f442d5b>&quot;音符太多、音阶组合太多，我该怎么选？&quot;</span></p><p class="theory-text" data-v-5f442d5b> 十二平均律中有12个音，如果没有规则，音乐会听起来杂乱无章。 </p><p class="theory-text" data-v-5f442d5b> 🎼 调性就是音符的使用规则：我选择只用某个音阶的音，然后围绕一个主音展开。 </p><p class="theory-text" data-v-5f442d5b> ✅ 有了调性，音乐就有了<span class="highlight" data-v-5f442d5b>&quot;家&quot;</span>（主音）、<span class="highlight" data-v-5f442d5b>&quot;路径&quot;</span>（音阶）、<span class="highlight" data-v-5f442d5b>&quot;旅程&quot;</span>（和弦）和<span class="highlight" data-v-5f442d5b>&quot;终点&quot;</span>（终止感）。 </p></div></div><div class="content-section" data-v-5f442d5b><h2 data-v-5f442d5b>3. 🎵 音阶（上一节）和调性有什么关系？</h2><div class="content-card" data-v-5f442d5b><p class="theory-text" data-v-5f442d5b> 音阶是<span class="highlight" data-v-5f442d5b>&quot;调性&quot;</span>的材料，调性是<span class="highlight" data-v-5f442d5b>&quot;音阶的运用&quot;</span>。 可以这样理解：音阶是调性的<span class="highlight" data-v-5f442d5b>&quot;词汇表&quot;</span>，调性是把这些词汇用来<span class="highlight" data-v-5f442d5b>&quot;写句子&quot;</span>的规则。 </p><p class="theory-text" data-v-5f442d5b><strong data-v-5f442d5b>举例：</strong></p><p class="theory-text" data-v-5f442d5b> &quot;C大调音阶&quot; 是一个音的集合。 </p><p class="theory-text" data-v-5f442d5b> &quot;C大调&quot; 是指：这首歌用这个音阶、围绕C来组织旋律与和声。 </p></div></div><div class="content-section" data-v-5f442d5b><h2 data-v-5f442d5b>4. 🗂️ 有哪些调性？</h2><div class="content-card" data-v-5f442d5b><p class="theory-text" data-v-5f442d5b> 基本分为两类（每个主音有一种大调和一种小调）： </p><div class="key-types" data-v-5f442d5b><div class="key-type" data-v-5f442d5b><h3 data-v-5f442d5b>🎵 大调（Major）</h3><p data-v-5f442d5b>C大调、G大调</p><p data-v-5f442d5b><strong data-v-5f442d5b>特点：</strong>明亮、开放、稳定感强</p></div><div class="key-type" data-v-5f442d5b><h3 data-v-5f442d5b>🎵 小调（Minor）</h3><p data-v-5f442d5b>A小调、D小调</p><p data-v-5f442d5b><strong data-v-5f442d5b>特点：</strong>阴郁、柔和、张力多</p></div></div><p class="theory-text" data-v-5f442d5b> 一共有 <span class="highlight" data-v-5f442d5b>12 个主音 × 2（大调/小调）= 24 个常用调性</span>。 其中每个大调和一个小调共享相同的音符（称为关系大小调）。 </p></div></div><div class="content-section" data-v-5f442d5b><h2 data-v-5f442d5b>5. 🔍 怎么识别调性？</h2><div class="content-card" data-v-5f442d5b><div class="identification-method" data-v-5f442d5b><h3 data-v-5f442d5b>（1）看调号（Key Signature）</h3><p data-v-5f442d5b>五线谱开头的♯或♭表示当前的调。</p><p data-v-5f442d5b><strong data-v-5f442d5b>无升降号 → C大调 或 A小调</strong></p></div><div class="identification-method" data-v-5f442d5b><h3 data-v-5f442d5b>（2）听旋律&quot;落在哪个音&quot;</h3><p data-v-5f442d5b>多数旋律会&quot;回家&quot;到主音（tonic），可通过终止音感知。</p></div><div class="identification-method" data-v-5f442d5b><h3 data-v-5f442d5b>（3）分析和弦走向（进阶）</h3><p data-v-5f442d5b>看常见和弦进程，如 I–IV–V、ii–V–I 等，帮助判断当前调。</p></div></div></div><div class="content-section" data-v-5f442d5b><h2 data-v-5f442d5b>6. 🎹 怎么应用调性？（即兴演奏视角）</h2><div class="content-card" data-v-5f442d5b><p class="theory-text" data-v-5f442d5b> 调性是即兴演奏中最重要的起点： </p><div class="application-point" data-v-5f442d5b><p data-v-5f442d5b>🎶 知道当前音乐的 Key，就知道可以用哪个音阶来即兴。</p><p data-v-5f442d5b><strong data-v-5f442d5b>如：</strong>音乐在 G大调 → 可用 G大调音阶来弹旋律。</p></div><div class="application-point" data-v-5f442d5b><p data-v-5f442d5b>🎼 根据 Key 推出其自然和弦（diatonic chords），辅助和声编配与solo构思。</p></div><div class="application-point" data-v-5f442d5b><p data-v-5f442d5b>🔁 发生转调（modulation）时，要快速判断新调、切换音阶。</p></div></div></div><div class="content-section" data-v-5f442d5b><h2 data-v-5f442d5b>7. 🧠 练习建议</h2><div class="content-card" data-v-5f442d5b><div class="practice-item" data-v-5f442d5b><h3 data-v-5f442d5b>（1）练习所有大调与小调调性（上一节音阶中的练习）</h3><p data-v-5f442d5b>如：D大调、B♭小调，包括其调号（升几号/降几号）和对应的音阶。</p></div><div class="practice-item" data-v-5f442d5b><h3 data-v-5f442d5b>（2）练习在每个调上构建和弦组</h3><p data-v-5f442d5b>例如：在 G大调中构建 I–IV–V → G–C–D</p></div><div class="practice-item" data-v-5f442d5b><h3 data-v-5f442d5b>（3）听辨调性</h3><p data-v-5f442d5b>听一段旋律，判断主音是什么，推断是大调还是小调。</p></div><div class="practice-item" data-v-5f442d5b><h3 data-v-5f442d5b>（4）实际应用</h3><p data-v-5f442d5b>找一首歌（如《Autumn Leaves》），分析其调性，尝试用对应音阶做简单即兴。</p></div></div></div></div>',1)),createBaseVNode("div",_hoisted_5$6,[createBaseVNode("div",_hoisted_6$6,[i[3]||(i[3]=createBaseVNode("h3",null,"🎵 AI 钢琴助手",-1)),i[4]||(i[4]=createBaseVNode("div",{class:"chat-area"},[createBaseVNode("div",{class:"bot-message"},[createTextVNode(" 您好！我是您的钢琴学习助手。关于调性（Key）有什么问题吗？我可以帮您： "),createBaseVNode("ul",null,[createBaseVNode("li",null,"解释调性的概念和应用"),createBaseVNode("li",null,"分析调号识别方法"),createBaseVNode("li",null,"指导调性练习"),createBaseVNode("li",null,"解答即兴演奏中的调性问题")])])],-1)),createBaseVNode("div",_hoisted_7$6,[withDirectives(createBaseVNode("textarea",{placeholder:"请输入您的问题...","onUpdate:modelValue":i[1]||(i[1]=r=>e.value=r),onKeydown:withKeys(withModifiers(s,["ctrl"]),["enter"])},null,40,_hoisted_8$6),[[vModelText,e.value]]),createBaseVNode("button",{onClick:s},"发送")])])])])])]))}},KeyDetail=_export_sfc(_sfc_main$7,[["__scopeId","data-v-5f442d5b"]]),_imports_0="/images/musical-intervals.png",ChordIntervalsDetail_vue_vue_type_style_index_0_scoped_db64b139_lang="",_hoisted_1$6={class:"chord-intervals-detail"},_hoisted_2$5={class:"content-container"},_hoisted_3$5={class:"header"},_hoisted_4$5={class:"content-grid"},_hoisted_5$5={class:"left-content"},_hoisted_6$5={class:"content-section"},_hoisted_7$5={class:"content-card"},_hoisted_8$5={class:"right-content"},_hoisted_9$2={class:"ai-bot"},_hoisted_10$2={class:"input-area"},_hoisted_11$2=["onKeydown"],_sfc_main$6={__name:"ChordIntervalsDetail",setup(t){const e=ref(""),s=()=>{e.value.trim()&&(console.log("发送消息:",e.value),e.value="")},n=i=>{console.log("图片加载失败:",i.target.src)};return(i,r)=>(openBlock(),createElementBlock("div",_hoisted_1$6,[createBaseVNode("div",_hoisted_2$5,[createBaseVNode("div",_hoisted_3$5,[createBaseVNode("button",{onClick:r[0]||(r[0]=h=>i.$emit("back")),class:"back-btn"},"← 返回"),r[2]||(r[2]=createBaseVNode("h1",null,"🎼 音程与三和弦（Chords & Intervals）",-1))]),createBaseVNode("div",_hoisted_4$5,[createBaseVNode("div",_hoisted_5$5,[r[6]||(r[6]=createStaticVNode('<div class="content-section" data-v-db64b139><h2 data-v-db64b139>1. 音程的定义</h2><div class="content-card" data-v-db64b139><p class="theory-text" data-v-db64b139> 音程是两个音之间的距离。 </p><p class="theory-text" data-v-db64b139> 最小的音程单位是<span class="highlight" data-v-db64b139>半音（semitone / half-step）</span>，两个半音组成一个<span class="highlight" data-v-db64b139>全音（whole-step / tone）</span>。 </p></div></div><div class="content-section" data-v-db64b139><h2 data-v-db64b139>2. 音程的度数与性质</h2><div class="content-card" data-v-db64b139><p class="theory-text" data-v-db64b139> 音程可以通过两个属性来描述： </p><ul data-v-db64b139><li class="theory-text" data-v-db64b139><span class="highlight" data-v-db64b139>度数（Number）</span>：如一度（unison）、二度、三度……八度等； </li><li class="theory-text" data-v-db64b139><span class="highlight" data-v-db64b139>性质（Quality）</span>：如大调（Major）、小调（Minor）、增（Augmented）、减（Diminished）、完全（Perfect）。 </li></ul></div></div>',2)),createBaseVNode("div",_hoisted_6$5,[r[5]||(r[5]=createBaseVNode("h2",null,"1.3 常见音程",-1)),createBaseVNode("div",_hoisted_7$5,[r[3]||(r[3]=createBaseVNode("p",{class:"theory-text"}," 以下是常见音程的列表： ",-1)),createBaseVNode("img",{src:_imports_0,alt:"常见音程表",class:"content-image",onError:n},null,32),r[4]||(r[4]=createBaseVNode("p",{class:"image-caption"},"常见音程及其半音数量",-1))])]),r[7]||(r[7]=createStaticVNode('<div class="content-section" data-v-db64b139><h2 data-v-db64b139>2. 三和弦（Triads）</h2><div class="content-card" data-v-db64b139><h3 data-v-db64b139>2.1 和弦的定义</h3><p class="theory-text" data-v-db64b139> 和弦（Chord）是两个或多个音同时演奏的组合。 </p><p class="theory-text" data-v-db64b139> 三个音以三度关系叠置而成的和弦称为<span class="highlight" data-v-db64b139>三和弦（Triad）</span>。 </p><h3 data-v-db64b139>2.2 和弦构建原理：叠三度音程</h3><p class="theory-text" data-v-db64b139> 两种基本的三度： </p><ul data-v-db64b139><li class="theory-text" data-v-db64b139>大三度（Major 3rd）</li><li class="theory-text" data-v-db64b139>小三度（Minor 3rd）</li></ul><p class="theory-text" data-v-db64b139> 通过不同顺序的叠置构成不同种类的三和弦。 </p><h3 data-v-db64b139>2.3 四种基本三和弦类型</h3><table data-v-db64b139><thead data-v-db64b139><tr data-v-db64b139><th data-v-db64b139>和弦类型</th><th data-v-db64b139>度数结构</th><th data-v-db64b139>音程结构</th><th data-v-db64b139>从 C 开始的音</th><th data-v-db64b139>记谱方式</th></tr></thead><tbody data-v-db64b139><tr data-v-db64b139><td data-v-db64b139>大三和弦 Major</td><td data-v-db64b139>1 – 3 – 5</td><td data-v-db64b139>大三度 + 小三度</td><td data-v-db64b139>C – E – G</td><td data-v-db64b139>C 或 CΔ</td></tr><tr data-v-db64b139><td data-v-db64b139>小三和弦 Minor</td><td data-v-db64b139>1 – ♭3 – 5</td><td data-v-db64b139>小三度 + 大三度</td><td data-v-db64b139>C – E♭ – G</td><td data-v-db64b139>Cm 或 C–</td></tr><tr data-v-db64b139><td data-v-db64b139>减三和弦 Dim</td><td data-v-db64b139>1 – ♭3 – ♭5</td><td data-v-db64b139>小三度 + 小三度</td><td data-v-db64b139>C – E♭ – G♭</td><td data-v-db64b139>Cdim 或 Co</td></tr><tr data-v-db64b139><td data-v-db64b139>增三和弦 Aug</td><td data-v-db64b139>1 – 3 – ♯5</td><td data-v-db64b139>大三度 + 大三度</td><td data-v-db64b139>C – E – G♯</td><td data-v-db64b139>Caug 或 C+</td></tr></tbody></table><h3 data-v-db64b139>2.4 和弦转位（Inversions）</h3><p class="theory-text" data-v-db64b139> 通过将底部的音移到最上方来创建不同的转位（Inversion）。 </p><ul data-v-db64b139><li class="theory-text" data-v-db64b139>原位：根音在最低</li><li class="theory-text" data-v-db64b139>第一转位：第三音在最低</li><li class="theory-text" data-v-db64b139>第二转位：第五音在最低</li></ul></div></div>',1))]),createBaseVNode("div",_hoisted_8$5,[createBaseVNode("div",_hoisted_9$2,[r[8]||(r[8]=createBaseVNode("h3",null,"🎵 AI 钢琴助手",-1)),r[9]||(r[9]=createBaseVNode("div",{class:"chat-area"},[createBaseVNode("div",{class:"bot-message"},[createTextVNode(" 您好！我是您的钢琴学习助手。关于音程与和弦有什么问题吗？我可以帮您： "),createBaseVNode("ul",null,[createBaseVNode("li",null,"解释音程的概念和分类"),createBaseVNode("li",null,"分析三和弦的构建方法"),createBaseVNode("li",null,"指导音程与和弦的练习"),createBaseVNode("li",null,"解答音乐理论相关问题")])])],-1)),createBaseVNode("div",_hoisted_10$2,[withDirectives(createBaseVNode("textarea",{placeholder:"请输入您的问题...","onUpdate:modelValue":r[1]||(r[1]=h=>e.value=h),onKeydown:withKeys(withModifiers(s,["ctrl"]),["enter"])},null,40,_hoisted_11$2),[[vModelText,e.value]]),createBaseVNode("button",{onClick:s},"发送")])])])])])]))}},ChordIntervalsDetail=_export_sfc(_sfc_main$6,[["__scopeId","data-v-db64b139"]]),DegreeFunctionsDetail_vue_vue_type_style_index_0_scoped_9eeed9c0_lang="",_hoisted_1$5={class:"degree-functions-detail"},_hoisted_2$4={class:"content-container"},_hoisted_3$4={class:"header"},_hoisted_4$4={class:"content-grid"},_hoisted_5$4={class:"right-content"},_hoisted_6$4={class:"ai-bot"},_hoisted_7$4={class:"input-area"},_hoisted_8$4=["onKeydown"],_sfc_main$5={__name:"DegreeFunctionsDetail",setup(t){const e=ref(""),s=()=>{e.value.trim()&&(console.log("发送消息:",e.value),e.value="")};return(n,i)=>(openBlock(),createElementBlock("div",_hoisted_1$5,[createBaseVNode("div",_hoisted_2$4,[createBaseVNode("div",_hoisted_3$4,[createBaseVNode("button",{onClick:i[0]||(i[0]=r=>n.$emit("back")),class:"back-btn"},"← 返回"),i[2]||(i[2]=createBaseVNode("h1",null,"🎯 调性中的七个角色（Degree Functions）",-1))]),createBaseVNode("div",_hoisted_4$4,[i[5]||(i[5]=createStaticVNode('<div class="left-content" data-v-9eeed9c0><div class="content-section" data-v-9eeed9c0><div class="learning-tip" data-v-9eeed9c0><h3 data-v-9eeed9c0>🎯 目标</h3><p data-v-9eeed9c0>理解调性中的 7 个音/和弦在音乐中所扮演的&quot;功能角色&quot;，并通过功能分类掌握它们在即兴、编曲和和声中的实际应用。</p></div></div><div class="content-section" data-v-9eeed9c0><h2 data-v-9eeed9c0>4.1 为什么要学习 Degree Functions？</h2><div class="content-card" data-v-9eeed9c0><p class="theory-text" data-v-9eeed9c0> 虽然大调有 7 个音、7 个和弦，但它们功能不同、情绪不同、用途不同 </p><p class="theory-text" data-v-9eeed9c0> 理解这些角色能让你： </p><ul data-v-9eeed9c0><li class="theory-text" data-v-9eeed9c0>听懂音乐结构</li><li class="theory-text" data-v-9eeed9c0>更自然地即兴演奏</li><li class="theory-text" data-v-9eeed9c0>更合理地编配和声进行</li></ul></div></div><div class="content-section" data-v-9eeed9c0><h2 data-v-9eeed9c0>4.2 三大核心功能分类（功能和声简化模型）</h2><div class="content-card" data-v-9eeed9c0><p class="theory-text" data-v-9eeed9c0> 我们将大调音阶中的 7 个音（或和弦）按照功能简化为三大类： </p><table data-v-9eeed9c0><thead data-v-9eeed9c0><tr data-v-9eeed9c0><th data-v-9eeed9c0>功能类别</th><th data-v-9eeed9c0>所含音级（度数）</th><th data-v-9eeed9c0>常见和弦</th><th data-v-9eeed9c0>主要作用</th></tr></thead><tbody data-v-9eeed9c0><tr data-v-9eeed9c0><td data-v-9eeed9c0>🎯 主功能（Tonic 功能）</td><td data-v-9eeed9c0>I、vi、iii</td><td data-v-9eeed9c0>C、Am、Em</td><td data-v-9eeed9c0>稳定、归属、音乐的落点（&quot;回家&quot;感）</td></tr><tr data-v-9eeed9c0><td data-v-9eeed9c0>🚶‍♂️ 下属功能（Subdominant 功能）</td><td data-v-9eeed9c0>ii、IV</td><td data-v-9eeed9c0>Dm、F</td><td data-v-9eeed9c0>展开、连接、情绪的推动和准备转折</td></tr><tr data-v-9eeed9c0><td data-v-9eeed9c0>⚡ 属功能（Dominant 功能）</td><td data-v-9eeed9c0>V、vii°</td><td data-v-9eeed9c0>G、B°</td><td data-v-9eeed9c0>紧张、推动、引导回主和弦（强烈&quot;回家&quot;倾向）</td></tr></tbody></table></div></div><div class="content-section" data-v-9eeed9c0><h2 data-v-9eeed9c0>4.3 各类功能详解 + 实例</h2><div class="content-card" data-v-9eeed9c0><div class="function-section" data-v-9eeed9c0><h3 data-v-9eeed9c0>🎯 4.3.1 Tonic 功能区：家的感觉</h3><p class="theory-text" data-v-9eeed9c0><strong data-v-9eeed9c0>代表：</strong>I（主和弦）、vi（下中音）、iii（中音）</p><p class="theory-text" data-v-9eeed9c0><strong data-v-9eeed9c0>情感特征：</strong>稳定、舒适、收尾</p><p class="theory-text" data-v-9eeed9c0><strong data-v-9eeed9c0>和弦示例（C大调）：</strong>C、Am、Em</p><p class="theory-text" data-v-9eeed9c0><strong data-v-9eeed9c0>即兴建议：</strong>旋律可以&quot;落在&quot;这些音上完成句子</p><p class="theory-text" data-v-9eeed9c0><strong data-v-9eeed9c0>练习：</strong>尝试从不同 Dominant 和弦&quot;回到&quot;这些和弦，感受稳定</p></div><div class="function-section" data-v-9eeed9c0><h3 data-v-9eeed9c0>🚶‍♂️ 4.3.2 Subdominant 功能区：展开与过渡</h3><p class="theory-text" data-v-9eeed9c0><strong data-v-9eeed9c0>代表：</strong>ii（上主音）、IV（下属音）</p><p class="theory-text" data-v-9eeed9c0><strong data-v-9eeed9c0>情感特征：</strong>推进、模糊方向、制造中段感</p><p class="theory-text" data-v-9eeed9c0><strong data-v-9eeed9c0>和弦示例（C大调）：</strong>Dm、F</p><p class="theory-text" data-v-9eeed9c0><strong data-v-9eeed9c0>典型作用：</strong>连接 Tonic → Dominant</p><p class="theory-text" data-v-9eeed9c0><strong data-v-9eeed9c0>即兴建议：</strong>适合制造铺垫、旋律的&quot;爬升&quot;阶段</p><p class="theory-text" data-v-9eeed9c0><strong data-v-9eeed9c0>练习：</strong>写一个 I–IV–V–I 进行，体会中段和张力的变化</p></div><div class="function-section" data-v-9eeed9c0><h3 data-v-9eeed9c0>⚡ 4.3.3 Dominant 功能区：推动和解决</h3><p class="theory-text" data-v-9eeed9c0><strong data-v-9eeed9c0>代表：</strong>V（属音）、vii°（导音）</p><p class="theory-text" data-v-9eeed9c0><strong data-v-9eeed9c0>情感特征：</strong>紧张、指向性强、需要&quot;落地&quot;</p><p class="theory-text" data-v-9eeed9c0><strong data-v-9eeed9c0>和弦示例（C大调）：</strong>G、B°</p><p class="theory-text" data-v-9eeed9c0><strong data-v-9eeed9c0>功能：</strong>强烈推动回到 I（Tonic）</p><p class="theory-text" data-v-9eeed9c0><strong data-v-9eeed9c0>即兴建议：</strong>制造悬念、准备转折，最后落到 Tonic 解 tension</p><p class="theory-text" data-v-9eeed9c0><strong data-v-9eeed9c0>练习：</strong>用 V–I 写一句旋律，结尾强调&quot;回家&quot;的感觉</p></div></div></div><div class="content-section" data-v-9eeed9c0><h2 data-v-9eeed9c0>4.4 常见的功能和声进行（功能结构）</h2><div class="content-card" data-v-9eeed9c0><p class="theory-text" data-v-9eeed9c0> 这些是一些最常见的和声进行，可以用来理解&quot;功能流动&quot;在实际音乐中的体现： </p><table data-v-9eeed9c0><thead data-v-9eeed9c0><tr data-v-9eeed9c0><th data-v-9eeed9c0>和声进行</th><th data-v-9eeed9c0>功能结构</th><th data-v-9eeed9c0>C 大调示例</th></tr></thead><tbody data-v-9eeed9c0><tr data-v-9eeed9c0><td data-v-9eeed9c0>I → IV → V → I</td><td data-v-9eeed9c0>主功能 → 下属功能 → 属功能 → 主功能</td><td data-v-9eeed9c0>C → F → G → C</td></tr><tr data-v-9eeed9c0><td data-v-9eeed9c0>ii → V → I</td><td data-v-9eeed9c0>下属功能 → 属功能 → 主功能</td><td data-v-9eeed9c0>Dm → G → C</td></tr><tr data-v-9eeed9c0><td data-v-9eeed9c0>vi → IV → V → I</td><td data-v-9eeed9c0>主功能 → 下属功能 → 属功能 → 主功能</td><td data-v-9eeed9c0>Am → F → G → C</td></tr></tbody></table><p class="theory-text" data-v-9eeed9c0><strong data-v-9eeed9c0>🎵 说明：</strong>几乎所有的西方音乐和爵士标准曲，其核心和声流动都可以看作是这三类功能的组合。 </p></div></div><div class="content-section" data-v-9eeed9c0><h2 data-v-9eeed9c0>4.5 七个度数在三类功能中的归属总览</h2><div class="content-card" data-v-9eeed9c0><table data-v-9eeed9c0><thead data-v-9eeed9c0><tr data-v-9eeed9c0><th data-v-9eeed9c0>度数</th><th data-v-9eeed9c0>英文名称</th><th data-v-9eeed9c0>所属功能类别</th><th data-v-9eeed9c0>和弦类型（以 C 大调为例）</th><th data-v-9eeed9c0>功能作用简述</th></tr></thead><tbody data-v-9eeed9c0><tr data-v-9eeed9c0><td data-v-9eeed9c0>1</td><td data-v-9eeed9c0>Tonic（主音）</td><td data-v-9eeed9c0>🎯 主功能</td><td data-v-9eeed9c0>C Major</td><td data-v-9eeed9c0>起点/终点，最稳定的和弦，音乐的&quot;家&quot;</td></tr><tr data-v-9eeed9c0><td data-v-9eeed9c0>2</td><td data-v-9eeed9c0>Supertonic（上主音）</td><td data-v-9eeed9c0>🚶‍♂️ 下属功能</td><td data-v-9eeed9c0>D minor</td><td data-v-9eeed9c0>构建过渡，引向属和弦或主和弦</td></tr><tr data-v-9eeed9c0><td data-v-9eeed9c0>3</td><td data-v-9eeed9c0>Mediant（中音）</td><td data-v-9eeed9c0>🎯 主功能</td><td data-v-9eeed9c0>E minor</td><td data-v-9eeed9c0>柔和中性，补充主和弦的&quot;归属感&quot;</td></tr><tr data-v-9eeed9c0><td data-v-9eeed9c0>4</td><td data-v-9eeed9c0>Subdominant（下属音）</td><td data-v-9eeed9c0>🚶‍♂️ 下属功能</td><td data-v-9eeed9c0>F Major</td><td data-v-9eeed9c0>打开进行，常用于引导向属和弦</td></tr><tr data-v-9eeed9c0><td data-v-9eeed9c0>5</td><td data-v-9eeed9c0>Dominant（属音）</td><td data-v-9eeed9c0>⚡ 属功能</td><td data-v-9eeed9c0>G Major</td><td data-v-9eeed9c0>有最大张力，引导回主和弦（V → I）</td></tr><tr data-v-9eeed9c0><td data-v-9eeed9c0>6</td><td data-v-9eeed9c0>Submediant（下中音）</td><td data-v-9eeed9c0>🎯 主功能</td><td data-v-9eeed9c0>A minor</td><td data-v-9eeed9c0>柔和的主功能替代，常用于流行和声</td></tr><tr data-v-9eeed9c0><td data-v-9eeed9c0>7</td><td data-v-9eeed9c0>Leading Tone（导音）</td><td data-v-9eeed9c0>⚡ 属功能</td><td data-v-9eeed9c0>B diminished</td><td data-v-9eeed9c0>极强指向性，引导回主音 C</td></tr></tbody></table></div></div><div class="content-section" data-v-9eeed9c0><h2 data-v-9eeed9c0>4.6 实践练习</h2><div class="content-card" data-v-9eeed9c0><div class="practice-section" data-v-9eeed9c0><div class="practice-item" data-v-9eeed9c0><h4 data-v-9eeed9c0>🎧 练习一：和弦功能分类判断</h4><p data-v-9eeed9c0>给出一组和弦（如 Dm – G – C – Am），要求学生分类出 Tonic / SubD / Dominant</p></div><div class="practice-item" data-v-9eeed9c0><h4 data-v-9eeed9c0>✏️ 练习二：按功能编写进行</h4><p data-v-9eeed9c0>在一个调内，自选一个功能结构（如 SubD → Dom → Ton），用实际和弦写出一个4小节进行</p></div><div class="practice-item" data-v-9eeed9c0><h4 data-v-9eeed9c0>🎹 练习三：功能限定即兴</h4><p data-v-9eeed9c0>限定只使用 SubD 区域进行即兴（如在 Dm 和 F 上旋律编写），体验&quot;未解决&quot;的感觉</p></div><div class="practice-item" data-v-9eeed9c0><h4 data-v-9eeed9c0>🎼 练习四：听感引导训练</h4><p data-v-9eeed9c0>听三段进行：1. 纯 Tonic 区域；2. SubD–Tonic；3. SubD–Dom–Tonic，让学生判断结尾是否&quot;回家&quot;</p></div></div></div></div></div>',1)),createBaseVNode("div",_hoisted_5$4,[createBaseVNode("div",_hoisted_6$4,[i[3]||(i[3]=createBaseVNode("h3",null,"🎵 AI 钢琴助手",-1)),i[4]||(i[4]=createBaseVNode("div",{class:"chat-area"},[createBaseVNode("div",{class:"bot-message"},[createTextVNode(" 您好！我是您的钢琴学习助手。关于调性中的七个角色有什么问题吗？我可以帮您： "),createBaseVNode("ul",null,[createBaseVNode("li",null,"解释三大功能分类（主功能、下属功能、属功能）"),createBaseVNode("li",null,"分析各功能的情感特征和应用"),createBaseVNode("li",null,"指导功能和声进行的练习"),createBaseVNode("li",null,"解答音乐理论相关问题")])])],-1)),createBaseVNode("div",_hoisted_7$4,[withDirectives(createBaseVNode("textarea",{placeholder:"请输入您的问题...","onUpdate:modelValue":i[1]||(i[1]=r=>e.value=r),onKeydown:withKeys(withModifiers(s,["ctrl"]),["enter"])},null,40,_hoisted_8$4),[[vModelText,e.value]]),createBaseVNode("button",{onClick:s},"发送")])])])])])]))}},DegreeFunctionsDetail=_export_sfc(_sfc_main$5,[["__scopeId","data-v-9eeed9c0"]]),ModesDetail_vue_vue_type_style_index_0_scoped_a70297ae_lang="",_hoisted_1$4={class:"modes-detail"},_hoisted_2$3={class:"content-container"},_hoisted_3$3={class:"header"},_hoisted_4$3={class:"content-grid"},_hoisted_5$3={class:"right-content"},_hoisted_6$3={class:"ai-bot"},_hoisted_7$3={class:"input-area"},_hoisted_8$3=["onKeydown"],_sfc_main$4={__name:"ModesDetail",setup(t){const e=ref(""),s=()=>{e.value.trim()&&(console.log("发送消息:",e.value),e.value="")};return(n,i)=>(openBlock(),createElementBlock("div",_hoisted_1$4,[createBaseVNode("div",_hoisted_2$3,[createBaseVNode("div",_hoisted_3$3,[createBaseVNode("button",{onClick:i[0]||(i[0]=r=>n.$emit("back")),class:"back-btn"},"← 返回"),i[2]||(i[2]=createBaseVNode("h1",null,"🎼 调式（Modes）",-1))]),createBaseVNode("div",_hoisted_4$3,[i[5]||(i[5]=createStaticVNode('<div class="left-content" data-v-a70297ae><div class="content-section" data-v-a70297ae><h2 data-v-a70297ae>1. 调式基础概念</h2><div class="content-card" data-v-a70297ae><h3 data-v-a70297ae>1.1 调式、音阶、调的基本区别</h3><div class="concept-comparison" data-v-a70297ae><div class="concept-item" data-v-a70297ae><h4 data-v-a70297ae>🎵 音阶（Scale）</h4><p class="theory-text" data-v-a70297ae>按照一定音程顺序排列的一组音（例如 C 大调：C D E F G A B）。</p></div><div class="concept-item" data-v-a70297ae><h4 data-v-a70297ae>🎼 调（Key）</h4><p class="theory-text" data-v-a70297ae>以某一个音为&quot;中心&quot;构建出来的音阶系统，它包含音阶、调号和功能和弦。</p></div><div class="concept-item" data-v-a70297ae><h4 data-v-a70297ae>🎭 调式（Mode）</h4><div class="mode-definition" data-v-a70297ae><h5 data-v-a70297ae>🎼 什么是调式（Mode）？</h5><div class="definition-highlight" data-v-a70297ae><p class="theory-text" data-v-a70297ae><strong data-v-a70297ae>✅ 简洁定义：</strong></p><p class="theory-text" data-v-a70297ae>调式是由一个现有音阶中，改变&quot;主音（Tonal Center）&quot;而形成的新音阶结构。</p></div><div class="explanation" data-v-a70297ae><p class="theory-text" data-v-a70297ae><strong data-v-a70297ae>换句话说：</strong></p><p class="theory-text" data-v-a70297ae>音阶由两个关键组成：</p><ol data-v-a70297ae><li class="theory-text" data-v-a70297ae>它包含哪些音（音符集合）</li><li class="theory-text" data-v-a70297ae>哪个音是它的&quot;主音&quot;或&quot;归属感中心&quot;——也就是&quot;调式中心音（Tonal Center）&quot;</li></ol><p class="theory-text" data-v-a70297ae><strong data-v-a70297ae>当你保持音符不变，只是把主音位置换了，你就创造了一个新调式（Mode）。</strong></p></div></div></div></div><h3 data-v-a70297ae>1.2 为什么要学习调式？</h3><div class="learning-reasons" data-v-a70297ae><div class="reason-item" data-v-a70297ae><h4 data-v-a70297ae>🎨 旋律表达的多样性</h4><p class="theory-text" data-v-a70297ae>通过调式，我们能跳出传统大调/小调的框架，创造更多样的旋律色彩。</p></div><div class="reason-item" data-v-a70297ae><h4 data-v-a70297ae>🎹 伴随和弦的变化需求</h4><p class="theory-text" data-v-a70297ae>和弦类型变化时，需要匹配的调式来支撑旋律。</p></div><div class="reason-item" data-v-a70297ae><h4 data-v-a70297ae>📚 调式历史简述</h4><p class="theory-text" data-v-a70297ae>最早源于中世纪教会音乐（教会调式），后被爵士、电影配乐等广泛采用。</p></div></div></div></div><div class="content-section" data-v-a70297ae><h2 data-v-a70297ae>2. 七大调式概览（以 C 大调为例）</h2><div class="content-card" data-v-a70297ae><div class="mode-item" data-v-a70297ae><h3 data-v-a70297ae>2.1 Ionian（伊奥尼亚调式）</h3><div class="mode-details" data-v-a70297ae><p class="theory-text" data-v-a70297ae><strong data-v-a70297ae>音阶结构：</strong>C D E F G A B</p><p class="theory-text" data-v-a70297ae><strong data-v-a70297ae>音程结构：</strong>W W H W W W H（W = 全音，H = 半音）</p><p class="theory-text" data-v-a70297ae><strong data-v-a70297ae>标志音：</strong>无。属于自然大调。</p><p class="theory-text" data-v-a70297ae><strong data-v-a70297ae>主和弦：</strong>C 大三和弦（C-E-G）</p><p class="theory-text" data-v-a70297ae><strong data-v-a70297ae>情绪：</strong>明亮、稳定、常规</p></div></div><div class="mode-item" data-v-a70297ae><h3 data-v-a70297ae>2.2 Dorian（多利亚调式）</h3><div class="mode-details" data-v-a70297ae><p class="theory-text" data-v-a70297ae><strong data-v-a70297ae>音阶结构：</strong>D E F G A B C</p><p class="theory-text" data-v-a70297ae><strong data-v-a70297ae>音程结构：</strong>W H W W W H W</p><p class="theory-text" data-v-a70297ae><strong data-v-a70297ae>标志音：</strong>♭3, ♮6（区别于 Aeolian 的♭6）</p><p class="theory-text" data-v-a70297ae><strong data-v-a70297ae>主和弦：</strong>D 小三和弦（D-F-A）</p><p class="theory-text" data-v-a70297ae><strong data-v-a70297ae>情绪：</strong>忧郁中带希望，适用于爵士、放克</p></div></div><div class="mode-item" data-v-a70297ae><h3 data-v-a70297ae>2.3 Phrygian（弗里吉亚调式）</h3><div class="mode-details" data-v-a70297ae><p class="theory-text" data-v-a70297ae><strong data-v-a70297ae>音阶结构：</strong>E F G A B C D</p><p class="theory-text" data-v-a70297ae><strong data-v-a70297ae>音程结构：</strong>H W W W H W W</p><p class="theory-text" data-v-a70297ae><strong data-v-a70297ae>标志音：</strong>♭2（极具异域感）</p><p class="theory-text" data-v-a70297ae><strong data-v-a70297ae>主和弦：</strong>E 小三和弦（E-G-B）</p><p class="theory-text" data-v-a70297ae><strong data-v-a70297ae>情绪：</strong>紧张、神秘，拉丁/金属常用</p></div></div><div class="mode-item" data-v-a70297ae><h3 data-v-a70297ae>2.4 Lydian（利底亚调式）</h3><div class="mode-details" data-v-a70297ae><p class="theory-text" data-v-a70297ae><strong data-v-a70297ae>音阶结构：</strong>F G A B C D E</p><p class="theory-text" data-v-a70297ae><strong data-v-a70297ae>音程结构：</strong>W W W H W W H</p><p class="theory-text" data-v-a70297ae><strong data-v-a70297ae>标志音：</strong>♯4（梦幻感、漂浮感）</p><p class="theory-text" data-v-a70297ae><strong data-v-a70297ae>主和弦：</strong>F 大三和弦（F-A-C）</p><p class="theory-text" data-v-a70297ae><strong data-v-a70297ae>情绪：</strong>明亮、开放、有飞跃感</p></div></div><div class="mode-item" data-v-a70297ae><h3 data-v-a70297ae>2.5 Mixolydian（混合利底亚调式）</h3><div class="mode-details" data-v-a70297ae><p class="theory-text" data-v-a70297ae><strong data-v-a70297ae>音阶结构：</strong>G A B C D E F</p><p class="theory-text" data-v-a70297ae><strong data-v-a70297ae>音程结构：</strong>W W H W W H W</p><p class="theory-text" data-v-a70297ae><strong data-v-a70297ae>标志音：</strong>♭7（区别于 Ionian）</p><p class="theory-text" data-v-a70297ae><strong data-v-a70297ae>主和弦：</strong>G 大三和弦（G-B-D）</p><p class="theory-text" data-v-a70297ae><strong data-v-a70297ae>情绪：</strong>布鲁斯味、律动感强</p></div></div><div class="mode-item" data-v-a70297ae><h3 data-v-a70297ae>2.6 Aeolian（爱奥利亚调式）</h3><div class="mode-details" data-v-a70297ae><p class="theory-text" data-v-a70297ae><strong data-v-a70297ae>音阶结构：</strong>A B C D E F G</p><p class="theory-text" data-v-a70297ae><strong data-v-a70297ae>音程结构：</strong>W H W W H W W</p><p class="theory-text" data-v-a70297ae><strong data-v-a70297ae>标志音：</strong>♭3, ♭6, ♭7（自然小调）</p><p class="theory-text" data-v-a70297ae><strong data-v-a70297ae>主和弦：</strong>A 小三和弦（A-C-E）</p><p class="theory-text" data-v-a70297ae><strong data-v-a70297ae>情绪：</strong>悲伤、温柔</p></div></div><div class="mode-item" data-v-a70297ae><h3 data-v-a70297ae>2.7 Locrian（洛克里亚调式）</h3><div class="mode-details" data-v-a70297ae><p class="theory-text" data-v-a70297ae><strong data-v-a70297ae>音阶结构：</strong>B C D E F G A</p><p class="theory-text" data-v-a70297ae><strong data-v-a70297ae>音程结构：</strong>H W W H W W W</p><p class="theory-text" data-v-a70297ae><strong data-v-a70297ae>标志音：</strong>♭2, ♭5（不稳定感强）</p><p class="theory-text" data-v-a70297ae><strong data-v-a70297ae>主和弦：</strong>B 减三和弦（B-D-F）</p><p class="theory-text" data-v-a70297ae><strong data-v-a70297ae>情绪：</strong>暗黑、不安，实验音乐中使用</p></div></div></div></div><div class="content-section" data-v-a70297ae><h2 data-v-a70297ae>3. 调式与和弦</h2><div class="content-card" data-v-a70297ae><div class="essence-summary" data-v-a70297ae><h4 data-v-a70297ae>🎼 本质总结</h4><p class="theory-text" data-v-a70297ae><strong data-v-a70297ae>调式是&quot;音的世界&quot;；旋律和和弦都是这个世界里的不同表现方式。</strong></p></div><div class="relationship-explanation" data-v-a70297ae><div class="melody-relationship" data-v-a70297ae><h4 data-v-a70297ae>🎵 旋律：是调式中的音，线性地排列、移动。</h4></div><div class="chord-relationship" data-v-a70297ae><h4 data-v-a70297ae>🎹 和弦：是调式中的音，垂直地堆叠、同时发声。</h4></div></div><div class="detailed-explanation" data-v-a70297ae><div class="ecosystem-section" data-v-a70297ae><h4 data-v-a70297ae>🎼 1. 调式是&quot;音的生态系统&quot;</h4><ul data-v-a70297ae><li class="theory-text" data-v-a70297ae>它定义了哪些音是&quot;可用的&quot;</li><li class="theory-text" data-v-a70297ae>它决定了音乐的色彩（Lydian梦幻、Phrygian紧张、Dorian开放…）</li></ul></div><div class="melody-section" data-v-a70297ae><h4 data-v-a70297ae>🎶 2. 旋律是&quot;调式的运动线条&quot;</h4><ul data-v-a70297ae><li class="theory-text" data-v-a70297ae>从调式中选音</li><li class="theory-text" data-v-a70297ae>通过节奏、方向、张力释放讲述故事</li></ul></div><div class="chord-section" data-v-a70297ae><h4 data-v-a70297ae>🎹 3. 和弦是&quot;调式的静态快照&quot;</h4><ul data-v-a70297ae><li class="theory-text" data-v-a70297ae>从调式中选音（通常堆叠三度或七度）</li><li class="theory-text" data-v-a70297ae>构成音响背景，支撑旋律的进行</li></ul></div></div></div></div><div class="content-section" data-v-a70297ae><h2 data-v-a70297ae>4. 调式在即兴演奏中的实际应用</h2><div class="content-card" data-v-a70297ae><h3 data-v-a70297ae>即兴演奏中怎么运用调式、和弦和旋律</h3><div class="improvisation-step" data-v-a70297ae><h4 data-v-a70297ae>1. 确定风格（情绪）和调式</h4><ul data-v-a70297ae><li class="theory-text" data-v-a70297ae>先想好你想表达的感觉：欢快？忧郁？神秘？激昂？</li><li class="theory-text" data-v-a70297ae>根据情绪选一个合适的调式，比如大调一般明亮欢快，小调则偏忧郁，莫德尔调式（Dorian、Mixolydian等）带特殊色彩。</li><li class="theory-text" data-v-a70297ae>这个调式决定你后续用哪些音，也奠定整体音乐氛围。</li></ul></div><div class="improvisation-step" data-v-a70297ae><h4 data-v-a70297ae>2. 设计和弦进行（骨架）</h4><ul data-v-a70297ae><li class="theory-text" data-v-a70297ae>和弦是乐曲的&quot;骨架&quot;，提供和声支撑和方向。</li><li class="theory-text" data-v-a70297ae>初学者可以先用简单经典的和弦进行，如2-5-1（Dm7-G7-Cmaj7），或12小节蓝调（I-IV-V）。</li><li class="theory-text" data-v-a70297ae>也可以先即兴唱或弹出一些旋律片段，根据旋律上的关键音反推和弦，保证旋律和和弦协调。</li></ul></div><div class="improvisation-step" data-v-a70297ae><h4 data-v-a70297ae>3. 旋律构建——根据调式和和弦构建旋律</h4><ul data-v-a70297ae><li class="theory-text" data-v-a70297ae><strong data-v-a70297ae>基础：优先选择和弦音</strong>，比如在Cmaj7和弦时，旋律的根音C、三音E、五音G、七音B是最安全且和谐的音。</li><li class="theory-text" data-v-a70297ae><strong data-v-a70297ae>装饰：用调式内的非和弦音</strong>（经过音、邻音等）填充，使旋律更丰富和灵动。</li><li class="theory-text" data-v-a70297ae><strong data-v-a70297ae>目标音：设定旋律目标</strong>，往往是当前或下一个和弦的关键音，旋律线围绕目标音上下移动，形成句子。</li></ul></div><div class="improvisation-step" data-v-a70297ae><h4 data-v-a70297ae>4. 和弦变化</h4><ul data-v-a70297ae><li class="theory-text" data-v-a70297ae>随着旋律的发展，有意识地变换和弦，为旋律提供新的支撑和色彩。</li><li class="theory-text" data-v-a70297ae>和弦变化不必太快，给旋律留呼吸空间。</li><li class="theory-text" data-v-a70297ae>在掌握基础后，可尝试借调和替代和弦，丰富表现。</li></ul></div><div class="improvisation-step" data-v-a70297ae><h4 data-v-a70297ae>5. 旋律同步呼应和弦变化</h4><ul data-v-a70297ae><li class="theory-text" data-v-a70297ae>旋律和和弦要像对话一样，旋律跟随和弦变化调整音符和色彩。</li><li class="theory-text" data-v-a70297ae>在和弦转换时，旋律可以利用目标音加强和弦的表达。</li><li class="theory-text" data-v-a70297ae>适时用非和弦音制造张力，随后解决回和弦音，产生动感和情绪起伏。</li></ul></div></div></div><div class="content-section" data-v-a70297ae><h2 data-v-a70297ae>5. 调式即兴练习体系</h2><div class="content-card" data-v-a70297ae><h3 data-v-a70297ae>调式与即兴选择练习设计</h3><div class="practice-exercise" data-v-a70297ae><h4 data-v-a70297ae>练习1：调式音阶熟悉练习</h4><div class="exercise-content" data-v-a70297ae><p class="theory-text" data-v-a70297ae><strong data-v-a70297ae>目的：</strong>掌握各调式的音阶结构和音色感觉。</p><p class="theory-text" data-v-a70297ae><strong data-v-a70297ae>方法：</strong></p><ul data-v-a70297ae><li class="theory-text" data-v-a70297ae>选择一个调式（如C大调、D多利安、E弗利几亚等）。</li><li class="theory-text" data-v-a70297ae>用右手缓慢上下弹奏该调式音阶，感受音阶色彩。</li><li class="theory-text" data-v-a70297ae>用左手简单弹该调式的Ⅰ级和弦。</li><li class="theory-text" data-v-a70297ae>试着哼唱该音阶，注意音阶情绪特点。</li></ul></div></div><div class="practice-exercise" data-v-a70297ae><h4 data-v-a70297ae>练习2：调式和弦构建与识别</h4><div class="exercise-content" data-v-a70297ae><p class="theory-text" data-v-a70297ae><strong data-v-a70297ae>目的：</strong>理解调式内和弦构成及其功能。</p><p class="theory-text" data-v-a70297ae><strong data-v-a70297ae>方法：</strong></p><ul data-v-a70297ae><li class="theory-text" data-v-a70297ae>在所选调式上，依次用左手弹出该调式七个音级构成的三和弦或七和弦（例如C大调的Cmaj7，Dm7，Em7等）。</li><li class="theory-text" data-v-a70297ae>右手弹奏相应调式音阶，感受和弦音与音阶音的关系。</li><li class="theory-text" data-v-a70297ae>听和弦声音色，体会主、属、下属和弦的不同感觉。</li></ul></div></div><div class="practice-exercise" data-v-a70297ae><h4 data-v-a70297ae>练习3：简单即兴——调式音阶旋律与固定和弦</h4><div class="exercise-content" data-v-a70297ae><p class="theory-text" data-v-a70297ae><strong data-v-a70297ae>目的：</strong>练习在固定和弦（如Ⅰ和弦）上用调式音阶即兴。</p><p class="theory-text" data-v-a70297ae><strong data-v-a70297ae>方法：</strong></p><ul data-v-a70297ae><li class="theory-text" data-v-a70297ae>选择调式（如C大调）。</li><li class="theory-text" data-v-a70297ae>左手反复弹奏Ⅰ和弦（Cmaj7）或简单和弦进行（如2-5-1：Dm7-G7-Cmaj7）。</li><li class="theory-text" data-v-a70297ae>右手用该调式音阶自由即兴旋律，优先用和弦音，加入调式音阶的装饰音。</li><li class="theory-text" data-v-a70297ae>注意旋律与和弦的协调，节奏灵活。</li></ul></div></div><div class="practice-exercise" data-v-a70297ae><h4 data-v-a70297ae>练习4：旋律带动和弦——反推和弦进行</h4><div class="exercise-content" data-v-a70297ae><p class="theory-text" data-v-a70297ae><strong data-v-a70297ae>目的：</strong>通过旋律提示识别和弦，培养旋律主导和弦选择的感觉。</p><p class="theory-text" data-v-a70297ae><strong data-v-a70297ae>方法：</strong></p><ul data-v-a70297ae><li class="theory-text" data-v-a70297ae>自由即兴弹奏一个简短旋律片段（用调式内音），唱出来也可以。</li><li class="theory-text" data-v-a70297ae>试着根据旋律的关键音（如停顿音或强调音）选择对应和弦（例如旋律音是G，可能用G7和弦）。</li><li class="theory-text" data-v-a70297ae>左手配和弦，右手继续旋律，观察旋律与和弦的呼应。</li></ul></div></div></div></div></div>',1)),createBaseVNode("div",_hoisted_5$3,[createBaseVNode("div",_hoisted_6$3,[i[3]||(i[3]=createBaseVNode("h3",null,"🎵 AI 钢琴助手",-1)),i[4]||(i[4]=createBaseVNode("div",{class:"chat-area"},[createBaseVNode("div",{class:"bot-message"},[createTextVNode(" 您好！我是您的钢琴学习助手。关于调式有什么问题吗？我可以帮您： "),createBaseVNode("ul",null,[createBaseVNode("li",null,"解释七大调式的特点和区别"),createBaseVNode("li",null,"分析调式与和弦的关系"),createBaseVNode("li",null,"指导调式在即兴演奏中的应用"),createBaseVNode("li",null,"解答音乐理论相关问题")])])],-1)),createBaseVNode("div",_hoisted_7$3,[withDirectives(createBaseVNode("textarea",{placeholder:"请输入您的问题...","onUpdate:modelValue":i[1]||(i[1]=r=>e.value=r),onKeydown:withKeys(withModifiers(s,["ctrl"]),["enter"])},null,40,_hoisted_8$3),[[vModelText,e.value]]),createBaseVNode("button",{onClick:s},"发送")])])])])])]))}},ModesDetail=_export_sfc(_sfc_main$4,[["__scopeId","data-v-a70297ae"]]),HarmonyDetail_vue_vue_type_style_index_0_scoped_4c266a20_lang="",_hoisted_1$3={class:"harmony-detail"},_hoisted_2$2={class:"content-container"},_hoisted_3$2={class:"header"},_hoisted_4$2={class:"content-grid"},_hoisted_5$2={class:"right-content"},_hoisted_6$2={class:"ai-bot"},_hoisted_7$2={class:"input-area"},_hoisted_8$2=["onKeydown"],_sfc_main$3={__name:"HarmonyDetail",setup(t){const e=ref(""),s=()=>{e.value.trim()&&(console.log("发送消息:",e.value),e.value="")};return(n,i)=>(openBlock(),createElementBlock("div",_hoisted_1$3,[createBaseVNode("div",_hoisted_2$2,[createBaseVNode("div",_hoisted_3$2,[createBaseVNode("button",{onClick:i[0]||(i[0]=r=>n.$emit("back")),class:"back-btn"},"← 返回"),i[2]||(i[2]=createBaseVNode("h1",null,"🎼 和声（Harmony）",-1))]),createBaseVNode("div",_hoisted_4$2,[i[5]||(i[5]=createStaticVNode('<div class="left-content" data-v-4c266a20><div class="content-section" data-v-4c266a20><h2 data-v-4c266a20>1. ✅ 什么是和声（Harmony）？</h2><div class="content-card" data-v-4c266a20><p class="theory-text" data-v-4c266a20> 和声通过添加<span class="highlight" data-v-4c266a20>多个音同时发声</span>，丰富旋律的表现力和情感层次。 </p><p class="theory-text" data-v-4c266a20> 它不仅支持旋律，还能营造<span class="highlight" data-v-4c266a20>空间感</span>、<span class="highlight" data-v-4c266a20>动态变化</span>和<span class="highlight" data-v-4c266a20>音乐张力</span>。 </p><p class="theory-text" data-v-4c266a20> 在不同音乐风格中，和声的作用和复杂度会有所不同（古典、爵士、流行、蓝调等）。 </p></div></div><div class="content-section" data-v-4c266a20><h2 data-v-4c266a20>2. 🎵 和声的两种实现方式详解</h2><div class="content-card" data-v-4c266a20><div class="harmony-method" data-v-4c266a20><h3 data-v-4c266a20>🎹 和弦进行（Chord Progression）</h3><p class="theory-text" data-v-4c266a20>是一系列和弦按照一定顺序和节奏排列，为旋律构建<span class="highlight" data-v-4c266a20>和声背景</span>。</p><p class="theory-text" data-v-4c266a20>和弦进行决定了音乐的<span class="highlight" data-v-4c266a20>调性走向</span>、<span class="highlight" data-v-4c266a20>情绪变化</span>和<span class="highlight" data-v-4c266a20>结构</span>。</p></div><div class="harmony-method" data-v-4c266a20><h3 data-v-4c266a20>🎼 音程和声（Intervallic Harmonisation）</h3><p class="theory-text" data-v-4c266a20>在旋律的每个音上叠加一个或多个音形成<span class="highlight" data-v-4c266a20>和声音程</span>，如三度、六度。</p><p class="theory-text" data-v-4c266a20>这种方式常见于双音演奏、和声线条以及钢琴、管弦乐的配器。</p></div></div></div><div class="content-section" data-v-4c266a20><h2 data-v-4c266a20>3. 🎶 常用和声音程的特点</h2><div class="content-card" data-v-4c266a20><div class="interval-section" data-v-4c266a20><h3 data-v-4c266a20>🎵 三度（3rd）和六度（6th）</h3><p class="theory-text" data-v-4c266a20>是最自然、悦耳的<span class="highlight" data-v-4c266a20>和声音程</span>，符合西方音乐和声美学。</p><p class="theory-text" data-v-4c266a20>三度关系构成了基本和弦的构成音，六度常被视为三度的<span class="highlight" data-v-4c266a20>&quot;反转&quot;</span>。</p></div><div class="interval-section" data-v-4c266a20><h3 data-v-4c266a20>🎵 其他音程</h3><p class="theory-text" data-v-4c266a20>四度、五度和八度通常用于<span class="highlight" data-v-4c266a20>和声支持</span>，但直接用作旋律和声会感觉较开放或空旷。</p><p class="theory-text" data-v-4c266a20>二度、小七度等音程带来<span class="highlight" data-v-4c266a20>紧张、不协和感</span>，常用于制造张力。</p></div></div></div><div class="content-section" data-v-4c266a20><h2 data-v-4c266a20>4. 🎼 和声与调式关系</h2><div class="content-card" data-v-4c266a20><p class="theory-text" data-v-4c266a20>和声的构建必须基于旋律所处的<span class="highlight" data-v-4c266a20>调式</span>，以保持音高和谐。</p><p class="theory-text" data-v-4c266a20>不同调式（大调、小调、莫德尔等）中三度和六度的<span class="highlight" data-v-4c266a20>半音与全音关系</span>不同，决定了和声色彩。</p><p class="theory-text" data-v-4c266a20>调式内的和弦功能（主、下属、属）影响<span class="highlight" data-v-4c266a20>和声音程的选择和安排</span>。</p></div></div><div class="content-section" data-v-4c266a20><h2 data-v-4c266a20>5. 🎹 具体和声应用示例</h2><div class="content-card" data-v-4c266a20><div class="example-section" data-v-4c266a20><h3 data-v-4c266a20>🎵 C大调示例</h3><p class="theory-text" data-v-4c266a20>在C大调中，旋律C的三度是E（<span class="highlight" data-v-4c266a20>大三度</span>），六度是A（<span class="highlight" data-v-4c266a20>大六度</span>），都很自然。</p></div><div class="example-section" data-v-4c266a20><h3 data-v-4c266a20>🎵 C小调示例</h3><p class="theory-text" data-v-4c266a20>在C小调中，旋律C的三度是E♭（<span class="highlight" data-v-4c266a20>小三度</span>），六度是A♭（<span class="highlight" data-v-4c266a20>小六度</span>），色彩更暗淡。</p></div><div class="example-section" data-v-4c266a20><h3 data-v-4c266a20>🎵 情绪表达</h3><p class="theory-text" data-v-4c266a20>通过变换和声音程，可以表达<span class="highlight" data-v-4c266a20>不同的情绪和风格</span>。</p></div></div></div></div>',1)),createBaseVNode("div",_hoisted_5$2,[createBaseVNode("div",_hoisted_6$2,[i[3]||(i[3]=createBaseVNode("h3",null,"🎵 AI 钢琴助手",-1)),i[4]||(i[4]=createBaseVNode("div",{class:"chat-area"},[createBaseVNode("div",{class:"bot-message"},[createTextVNode(" 您好！我是您的钢琴学习助手。关于和声有什么问题吗？我可以帮您： "),createBaseVNode("ul",null,[createBaseVNode("li",null,"解释和声的基本概念和作用"),createBaseVNode("li",null,"分析和弦进行与音程和声"),createBaseVNode("li",null,"指导不同调式中的和声应用"),createBaseVNode("li",null,"解答音乐理论相关问题")])])],-1)),createBaseVNode("div",_hoisted_7$2,[withDirectives(createBaseVNode("textarea",{placeholder:"请输入您的问题...","onUpdate:modelValue":i[1]||(i[1]=r=>e.value=r),onKeydown:withKeys(withModifiers(s,["ctrl"]),["enter"])},null,40,_hoisted_8$2),[[vModelText,e.value]]),createBaseVNode("button",{onClick:s},"发送")])])])])])]))}},HarmonyDetail=_export_sfc(_sfc_main$3,[["__scopeId","data-v-4c266a20"]]),BasicsView_vue_vue_type_style_index_0_scoped_40a0a5c2_lang="",_hoisted_1$2={class:"basics-view"},_hoisted_2$1={key:7,class:"content-container"},_hoisted_3$1={class:"big-card-grid"},_hoisted_4$1={class:"big-card"},_hoisted_5$1={class:"sub-list"},_hoisted_6$1=["onClick"],_hoisted_7$1={class:"big-card"},_hoisted_8$1={class:"sub-list"},_hoisted_9$1=["onClick"],_hoisted_10$1={class:"big-card"},_hoisted_11$1={class:"sub-list"},_hoisted_12=["onClick"],_sfc_main$2={__name:"BasicsView",setup(t){const e=ref(!1),s=ref(!1),n=ref(!1),i=ref(!1),r=ref(!1),h=ref(!1),T=ref(!1),E=[{key:"theory",title:"乐理概述"},{key:"scales",title:"音阶"},{key:"keys",title:"调性（Key）"},{key:"chords-intervals",title:"音程与和弦"},{key:"degree-functions",title:"调性中的七个角色（Degree Functions）"},{key:"modes",title:"调式（Modes）"},{key:"harmonisation",title:"和声"}],v=[{key:"intro-jazz",title:"爵士乐简介"},{key:"chord-tensions",title:"和弦张力（延伸音和变音）"},{key:"available-tensions",title:"可用张力"},{key:"shell-chords",title:"壳和弦与省略音"},{key:"chord-sub",title:"和弦替换"},{key:"passing-chords",title:"经过和弦与接近和弦"},{key:"secondary-chords",title:"次属和弦与调性化"},{key:"modal-interchange",title:"调式交换与借用和弦"},{key:"sus-chords",title:"挂留和弦"},{key:"phrygian-chords",title:"弗里吉亚和弦"},{key:"slash-chords",title:"斜线和弦"},{key:"harmonic-rhythm",title:"和声节奏"},{key:"polychords",title:"多重和弦"},{key:"modulation",title:"转调"}],y=[{key:"scales",title:"音阶本质理解与练习引导"},{key:"chord-scale-system",title:"和弦-音阶系统"},{key:"melodic-minor",title:"旋律小调调式与变音音阶"},{key:"bebop-scales",title:"波普音阶"},{key:"wholetone",title:"全音音阶"},{key:"diminished",title:"减音阶与双减和弦"},{key:"pentatonic",title:"五声音阶"},{key:"augmented",title:"增音阶"},{key:"minor-scales",title:"小调音阶"},{key:"improv-scales",title:"即兴演奏音阶选择"},{key:"tritone-sub",title:"三全音替代与音阶"},{key:"chromaticism",title:"半音阶与合成音阶"},{key:"how-many-scales",title:"有多少种音阶"}],F=k=>{console.log("点击了知识点:",k.title,"key:",k.key),k.key==="theory"?e.value=!0:k.key==="scales"?s.value=!0:k.key==="keys"?n.value=!0:k.key==="chords-intervals"?i.value=!0:k.key==="degree-functions"?r.value=!0:k.key==="modes"?h.value=!0:k.key==="harmonisation"?T.value=!0:alert(`点击了: ${k.title}`)};return(k,w)=>(openBlock(),createElementBlock("div",_hoisted_1$2,[e.value?(openBlock(),createBlock(TheoryDetail,{key:0,onBack:w[0]||(w[0]=f=>e.value=!1)})):createCommentVNode("",!0),s.value?(openBlock(),createBlock(ScaleDetail,{key:1,onBack:w[1]||(w[1]=f=>s.value=!1)})):createCommentVNode("",!0),n.value?(openBlock(),createBlock(KeyDetail,{key:2,onBack:w[2]||(w[2]=f=>n.value=!1)})):createCommentVNode("",!0),i.value?(openBlock(),createBlock(ChordIntervalsDetail,{key:3,onBack:w[3]||(w[3]=f=>i.value=!1)})):createCommentVNode("",!0),r.value?(openBlock(),createBlock(DegreeFunctionsDetail,{key:4,onBack:w[4]||(w[4]=f=>r.value=!1)})):createCommentVNode("",!0),h.value?(openBlock(),createBlock(ModesDetail,{key:5,onBack:w[5]||(w[5]=f=>h.value=!1)})):createCommentVNode("",!0),T.value?(openBlock(),createBlock(HarmonyDetail,{key:6,onBack:w[6]||(w[6]=f=>T.value=!1)})):(openBlock(),createElementBlock("div",_hoisted_2$1,[w[10]||(w[10]=createBaseVNode("h2",null,"📚 钢琴即兴演奏基础知识",-1)),createBaseVNode("div",_hoisted_3$1,[createBaseVNode("div",_hoisted_4$1,[w[7]||(w[7]=createBaseVNode("div",{class:"big-card-title"},"乐理概述",-1)),createBaseVNode("ul",_hoisted_5$1,[(openBlock(),createElementBlock(Fragment,null,renderList(E,f=>createBaseVNode("li",{key:f.key,onClick:a=>F(f),class:"clickable-item"},toDisplayString(f.title),9,_hoisted_6$1)),64))])]),createBaseVNode("div",_hoisted_7$1,[w[8]||(w[8]=createBaseVNode("div",{class:"big-card-title"},"和弦",-1)),createBaseVNode("ul",_hoisted_8$1,[(openBlock(),createElementBlock(Fragment,null,renderList(v,f=>createBaseVNode("li",{key:f.key,onClick:a=>F(f),class:"clickable-item"},toDisplayString(f.title),9,_hoisted_9$1)),64))])]),createBaseVNode("div",_hoisted_10$1,[w[9]||(w[9]=createBaseVNode("div",{class:"big-card-title"},"音阶",-1)),createBaseVNode("ul",_hoisted_11$1,[(openBlock(),createElementBlock(Fragment,null,renderList(y,f=>createBaseVNode("li",{key:f.key,onClick:a=>F(f),class:"clickable-item"},toDisplayString(f.title),9,_hoisted_12)),64))])])])]))]))}},BasicsView=_export_sfc(_sfc_main$2,[["__scopeId","data-v-40a0a5c2"]]),AdvancedView_vue_vue_type_style_index_0_scoped_5d6b7e4d_lang="",_hoisted_1$1={class:"advanced-view"},_sfc_main$1={__name:"AdvancedView",setup(t){return(e,s)=>(openBlock(),createElementBlock("div",_hoisted_1$1,s[0]||(s[0]=[createStaticVNode('<div class="content-container" data-v-5d6b7e4d><h2 data-v-5d6b7e4d>🎼 钢琴即兴演奏进阶技巧</h2><div class="placeholder-content" data-v-5d6b7e4d><div class="placeholder-icon" data-v-5d6b7e4d>🎹</div><p class="placeholder-text" data-v-5d6b7e4d>进阶内容正在准备中...</p><p class="placeholder-subtext" data-v-5d6b7e4d>更多精彩技巧即将呈现！</p></div></div>',1)])))}},AdvancedView=_export_sfc(_sfc_main$1,[["__scopeId","data-v-5d6b7e4d"]]),App_vue_vue_type_style_index_0_scoped_7d87f712_lang="",_hoisted_1={class:"app"},_hoisted_2={class:"main-content"},_hoisted_3={key:2,class:"analysis-container"},_hoisted_4={class:"container"},_hoisted_5={class:"chat-history"},_hoisted_6={key:0},_hoisted_7={key:1},_hoisted_8=["innerHTML"],_hoisted_9={class:"chat-input-area"},_hoisted_10={class:"chat-input"},_hoisted_11=["disabled"],_sfc_main={__name:"App",setup(t){useCssVars(d=>({"42f8487f":E.value+"%","627b691d":100-E.value+"%"}));const e=ref("analysis");function s(d){e.value=d}const n=ref(""),i=ref(""),r=ref(""),h=ref(""),T=ref(!1),E=ref(50),v=ref(!1),y=ref(null),F=ref(null),k=ref(null),w=ref("");function f(d){d.preventDefault(),v.value=!0,document.body.style.cursor="col-resize",document.body.style.userSelect="none"}function a(d){if(!v.value)return;d.preventDefault();const O=document.querySelector(".container");if(!O)return;const M=O.getBoundingClientRect(),V=(d.clientX-M.left)/M.width*100;E.value=Math.max(30,Math.min(70,V))}function u(){v.value&&(v.value=!1,document.body.style.cursor="",document.body.style.userSelect="")}onMounted(()=>{document.addEventListener("mousemove",a),document.addEventListener("mouseup",u)}),onUnmounted(()=>{document.removeEventListener("mousemove",a),document.removeEventListener("mouseup",u)});async function g(d){const O=d.target.files[0];if(O)if(n.value="",i.value="",y.value=null,k.value=null,w.value=O.name,O.type.startsWith("image/"))n.value=URL.createObjectURL(O),y.value=O;else if(O.type==="application/pdf"){i.value=URL.createObjectURL(O);try{const M=new FormData;M.append("file",O);const _=await(await fetch("http://localhost:3001/upload-pdf",{method:"POST",body:M})).json();k.value=_.pdfId,console.log("✅ PDF上传成功，pdfId:",k.value)}catch(M){console.error("❌ PDF上传失败:",M),alert("PDF上传失败，请重试")}}else alert("仅支持图片（JPG/PNG）或PDF文件")}async function R(){var O;if(!r.value){h.value="请输入你的问题",T.value=!1;return}T.value=!0,h.value="";let d=F.value;if(!d&&i.value&&k.value)try{console.log("📄 准备PDF图片用于分析...");const V=await(await fetch(i.value)).blob(),_=new FileReader;_.onload=()=>{d=_.result,console.log("✅ PDF图片准备完成")},_.readAsDataURL(V)}catch(M){console.error("❌ PDF图片提取失败:",M)}console.log("🚀 发送问题:",{question:r.value,pdfId:k.value,hasImage:!!d,hasPdf:!!i.value});try{const V=await(await fetch("http://localhost:3001/ask",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({question:r.value,imageBase64:d,pdfId:k.value,fileName:w.value})})).json();h.value=V.reply,console.log("✅ AI回复长度:",((O=V.reply)==null?void 0:O.length)||0)}catch(M){console.error("❌ 请求失败:",M),h.value="请求失败，请稍后重试"}T.value=!1,r.value="",F.value=null}function S(d){if(!d)return"";let O=d.replace(/^(\d+)\.\s+(.+)$/gm,"<h3>$1. $2</h3>").replace(/^[-*]\s+(.+)$/gm,"<li>$1</li>").replace(/\*\*(.+?)\*\*/g,"<strong>$1</strong>").replace(/\*(.+?)\*/g,"<em>$1</em>").replace(/\n/g,"<br>");return O.includes("<li>")&&(O=O.replace(/(<li>.*?<\/li>)+/gs,"<ul>$&</ul>")),O}return(d,O)=>(openBlock(),createElementBlock("div",_hoisted_1,[createVNode(NavBar,{onTabChange:s}),createBaseVNode("div",_hoisted_2,[e.value==="basics"?(openBlock(),createBlock(BasicsView,{key:0})):createCommentVNode("",!0),e.value==="advanced"?(openBlock(),createBlock(AdvancedView,{key:1})):createCommentVNode("",!0),e.value==="analysis"?(openBlock(),createElementBlock("div",_hoisted_3,[createBaseVNode("div",_hoisted_4,[createBaseVNode("section",{class:"score-section",style:normalizeStyle({width:E.value+"%"})},[O[2]||(O[2]=createBaseVNode("h2",null,"🎼 谱子上传与可视化",-1)),createBaseVNode("input",{type:"file",accept:".pdf,image/*",onChange:g},null,32),createVNode(ScoreViewer,{imgUrl:n.value,pdfUrl:i.value,onCrop:O[0]||(O[0]=M=>F.value=M)},null,8,["imgUrl","pdfUrl"])],4),createBaseVNode("div",{class:"divider",onMousedown:f},null,32),createBaseVNode("section",{class:"chat-section",style:normalizeStyle({width:100-E.value+"%"})},[O[4]||(O[4]=createBaseVNode("h2",null,"🤖 AI问答区",-1)),createBaseVNode("div",_hoisted_5,[h.value?(openBlock(),createElementBlock("div",_hoisted_7,[O[3]||(O[3]=createBaseVNode("strong",null,"AI回复：",-1)),createBaseVNode("div",{innerHTML:S(h.value)},null,8,_hoisted_8)])):(openBlock(),createElementBlock("p",_hoisted_6,"💭 这里将显示历史提问与AI回复"))]),createBaseVNode("div",_hoisted_9,[createBaseVNode("div",_hoisted_10,[withDirectives(createBaseVNode("textarea",{"onUpdate:modelValue":O[1]||(O[1]=M=>r.value=M),placeholder:"请输入你的问题...",rows:"1"},null,512),[[vModelText,r.value]]),createBaseVNode("button",{onClick:R,disabled:T.value},toDisplayString(T.value?"🚀 发送中...":"🚀 发送"),9,_hoisted_11)])])],4)])])):createCommentVNode("",!0)])]))}},App=_export_sfc(_sfc_main,[["__scopeId","data-v-7d87f712"]]),main="",app=createApp(App);app.mount("#app");
